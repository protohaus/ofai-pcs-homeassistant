[{"id":"4d69908ddcfaac9c","type":"tab","label":"main","disabled":false,"info":"","env":[]},{"id":"6c2304a77d361b80","type":"tab","label":"Automations","disabled":false,"info":"","env":[]},{"id":"6e04541125600418","type":"tab","label":"Initialize","disabled":false,"info":"","env":[]},{"id":"ad70ca3f38056645","type":"tab","label":"watchdog","disabled":false,"info":"","env":[]},{"id":"a071896d152eb245","type":"tab","label":"input_control","disabled":false,"info":"","env":[]},{"id":"8ecde103e664eec0","type":"tab","label":"cameras_manually","disabled":false,"info":"","env":[]},{"id":"2709ed20d07ea830","type":"tab","label":"telegram_bot","disabled":false,"info":"","env":[]},{"id":"0a84fcef42ddc94e","type":"tab","label":"Flow 1","disabled":true,"info":"","env":[]},{"id":"0f3990356594599b","type":"tab","label":"Graf annotat","disabled":false,"info":"","env":[]},{"id":"ab1036a4c01aab80","type":"subflow","name":"Picture","info":"","category":"","in":[{"x":40,"y":280,"wires":[{"id":"1b2a050c6aeb59a3"}]}],"out":[{"x":1240,"y":300,"wires":[{"id":"339e9f949a87e978","port":0},{"id":"3f7ee72a99f31698","port":0},{"id":"9cd59682cb6e706a","port":0},{"id":"3d50fa9f3089425e","port":0},{"id":"399aec1c9bc888a5","port":0},{"id":"bab8f70489938717","port":0},{"id":"2e52f87077047aa1","port":0},{"id":"f98ff7bd174079fc","port":0},{"id":"a2098170b1d4826f","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"48c607f195e854e0","type":"subflow","name":"Sensor","info":"","category":"","in":[{"x":260,"y":160,"wires":[{"id":"018890c568724ccb"}]}],"out":[{"x":1900,"y":1900,"wires":[{"id":"d191939ade03b663","port":0},{"id":"3de2061006ed4f14","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"b23737722e71b01c","type":"subflow","name":"Status","info":"","category":"","in":[{"x":120,"y":100,"wires":[{"id":"15c51c2042b7ed22"}]}],"out":[{"x":2960,"y":1180,"wires":[{"id":"e5275f00efd0cfaf","port":0},{"id":"5ce807b09bcd0106","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"9e7ca1741a410453","type":"subflow","name":"Restart","info":"","category":"","in":[{"x":100,"y":200,"wires":[{"id":"4611608905aa7003"}]}],"out":[{"x":1300,"y":160,"wires":[{"id":"9870875b85e30781","port":0},{"id":"a0b78b93d8cee4bb","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"ca65c1dbac21ab41","type":"subflow","name":"Power","info":"","category":"","in":[{"x":50,"y":30,"wires":[{"id":"922a8d6a1d97d0ef"}]}],"out":[{"x":900,"y":180,"wires":[{"id":"78872f6d664a1dc4","port":0},{"id":"995a79c0d062cc28","port":0},{"id":"117dd8d8bf3522f8","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"6c80f1ca0dd2938f","type":"subflow","name":"get_plant","info":"","category":"","in":[{"x":100,"y":160,"wires":[{"id":"84751c5bb01f818c"}]}],"out":[{"x":500,"y":160,"wires":[{"id":"7983922acada6878","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"d2fb9f710e7a6826","type":"subflow","name":"get_angles","info":"","category":"","in":[{"x":260,"y":40,"wires":[{"id":"5237d65b65725854"}]}],"out":[{"x":1180,"y":40,"wires":[{"id":"3070e3c89ed7402b","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"4e99185239cf91b2","type":"subflow","name":"photo_path_manual","info":"","category":"","in":[{"x":220,"y":140,"wires":[{"id":"886628d2be68f0a7"}]}],"out":[{"x":740,"y":140,"wires":[{"id":"886628d2be68f0a7","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"3ce6ca2f6197961a","type":"subflow","name":"state_homing_valid","info":"","category":"","in":[{"x":80,"y":160,"wires":[{"id":"73568eaefee8249e"}]}],"out":[{"x":580,"y":140,"wires":[{"id":"fdb455407f39d736","port":0}]},{"x":580,"y":200,"wires":[{"id":"fdb455407f39d736","port":1}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"d8b948f39935830f","type":"subflow","name":"state_motor_enabled","info":"","category":"","in":[{"x":160,"y":60,"wires":[{"id":"c26543d53a9d3aaf"}]}],"out":[{"x":620,"y":40,"wires":[{"id":"19c37ec56a0b6d94","port":0}]},{"x":620,"y":100,"wires":[{"id":"19c37ec56a0b6d94","port":1}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"fd625c48e8c8ae90","type":"subflow","name":"get_automation_main_state","info":"","category":"","in":[{"x":40,"y":120,"wires":[{"id":"781da8795bb615f9"}]}],"out":[{"x":560,"y":80,"wires":[{"id":"e91504ef7f6314bd","port":0}]},{"x":560,"y":160,"wires":[{"id":"e91504ef7f6314bd","port":1}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"53bd181b0b773e57","type":"subflow","name":"state_stepper_mode","info":"","category":"","in":[{"x":80,"y":260,"wires":[{"id":"882565c3c6febbca"}]}],"out":[{"x":1060,"y":100,"wires":[{"id":"88807011f51d9ec0","port":0}]},{"x":1060,"y":160,"wires":[{"id":"88807011f51d9ec0","port":1}]},{"x":1060,"y":220,"wires":[{"id":"88807011f51d9ec0","port":2}]},{"x":1060,"y":280,"wires":[{"id":"88807011f51d9ec0","port":3}]},{"x":1060,"y":340,"wires":[{"id":"88807011f51d9ec0","port":4}]},{"x":1060,"y":400,"wires":[{"id":"88807011f51d9ec0","port":5}]},{"x":1060,"y":460,"wires":[{"id":"88807011f51d9ec0","port":6}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"2d3973ed11ae3dc8","type":"subflow","name":"get_pcs","info":"","category":"","in":[{"x":180,"y":100,"wires":[{"id":"88b036a8fe3db20f"}]}],"out":[{"x":620,"y":60,"wires":[{"id":"e14c14ab4bdfd14d","port":0}]},{"x":620,"y":140,"wires":[{"id":"ee57bbb2778ce146","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"60792d08bd7f197a","type":"subflow","name":"get_automation_kinematics_state","info":"","category":"","in":[{"x":160,"y":140,"wires":[{"id":"4188f9afebc687af"}]}],"out":[{"x":720,"y":100,"wires":[{"id":"e6f58aca0f6eda21","port":0}]},{"x":720,"y":180,"wires":[{"id":"e6f58aca0f6eda21","port":1}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"214e5ec186f9b89b","type":"subflow","name":"homing_active","info":"","category":"","in":[{"x":140,"y":200,"wires":[{"id":"317f2e2d7f56552a"}]}],"out":[{"x":860,"y":160,"wires":[{"id":"4aa83709dad5694c","port":0}]},{"x":860,"y":240,"wires":[{"id":"4aa83709dad5694c","port":1}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"564c0776b24ee8cb","type":"subflow","name":"get_maintenance_mode","info":"","category":"","in":[{"x":80,"y":120,"wires":[{"id":"2aa62311bc7126dc"}]}],"out":[{"x":500,"y":80,"wires":[{"id":"e5f8e1f5b3813e67","port":0}]},{"x":500,"y":140,"wires":[{"id":"e5f8e1f5b3813e67","port":1}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"502d9caae1f74190","type":"subflow","name":"state_kin_stepper_start_automation","info":"","category":"","in":[{"x":220,"y":140,"wires":[{"id":"627d1a455e5f15fa"}]}],"out":[{"x":840,"y":100,"wires":[{"id":"7d7f607e55f62188","port":0}]},{"x":840,"y":180,"wires":[{"id":"7d7f607e55f62188","port":1}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"01e96d9e32906378","type":"subflow","name":"get_kinematics_state","info":"","category":"","in":[{"x":120,"y":140,"wires":[{"id":"1d3cb6856191dcb7"}]}],"out":[{"x":1040,"y":140,"wires":[{"id":"b35a0db0090b2484","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"69b5998777ae11cf","type":"subflow","name":"camera_snapshot","info":"","category":"","in":[{"x":300,"y":200,"wires":[{"id":"11eab4e996d21a25"}]}],"out":[{"x":980,"y":200,"wires":[{"id":"2ffbcecb6e53fb32","port":0}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"6b9686a43efc2793","type":"subflow","name":"state_pictures_taken","info":"","category":"","in":[{"x":160,"y":220,"wires":[{"id":"e6f520ae7555c911"}]}],"out":[{"x":660,"y":200,"wires":[{"id":"b3dae0b521d9265c","port":0}]},{"x":680,"y":260,"wires":[{"id":"b3dae0b521d9265c","port":1}]}],"env":[],"meta":{},"color":"#DDAA99"},{"id":"54b6f9cfdd13e029","type":"subflow","name":"automation_camera_sequence","info":"","category":"","in":[{"x":140,"y":280,"wires":[{"id":"72d4e7f32a5712b1"}]}],"out":[],"env":[],"meta":{},"color":"#DDAA99"},{"id":"dae8012c595a5f92","type":"group","z":"a071896d152eb245","name":"Red LED Slider","style":{"label":true,"stroke":"#000000","color":"#000000","fill":"#ff3f3f","fill-opacity":"0.18"},"nodes":["b405c97244a48623","23915c5983c29334","454841d0413e0d67","f070e3301c83e7de","582c9de03778d0ae","0ce5e54724da0d63","bca75399dc7b7a43","495a07ed3d2ee38c","5219a2b5f16371f7","f8e1e293cf26f072","77da6c79e98e722e","8dbd6a59a24925a9","e570026f73f4c7dc","86c6837a97abc6bd","07802d444ac66ee5","e2ddab2d5feeb314","000ad56c6f8b7ea1","1f5e64788483fc27","47710d7f37607b32","e8df7e2ce49a5909","d7ba3d594aeda62f","2f9bd364159be769","d5b8ddd629a28ee7","b3b06dc2f207ea7a","0657d3b660d0a681","2d960bb1d890766d","e95cf8544df7bd2f","18ee58626c2cd09c","9643e0787a16ba76","72d873ef39e4e3ed","ac121f8d716be353","135ab68b715b01a8","cd3c849e169214f9","e455ac45201ed0f4"],"x":54,"y":559,"w":1352,"h":502},{"id":"2361221b0eb65853","type":"group","z":"a071896d152eb245","name":"Blue LED Slider","style":{"label":true,"stroke":"#000000","color":"#000000","fill":"#0070c0","fill-opacity":"0.28"},"nodes":["162bb5921868c11e","b9e5488fd431ec1f","866b424c36ed9b9a","3b2478327df6e32a","9ce5292fd52a14f5","3a492a7c0492545c","257b355afc622b92","4b9c63b4ed98fe59","71cdfe7535468a2c","40a16276481bd30e","687add4ca87d3ba3","90cd545394e217a7","789a806e0d4f0e3c","378e871b809e639e","feb79f45727afada","85fee2a385293a41","fedd9e693df8d2b8","f7da26dd153d1dd6","6830c0af05cf7229","d8a73af75d857296","d37bb4582cc60540","a4b707f7cec12288","c4e87af4e7272915","0c87f4ba827d4dde","8719df971fdad8bb","8ffe05e3624e192a","67911042620f6a12","fa5588752dd64bdf","28bada945bf52135","0d7651e362608978","4cf6ae319522d33a","b3575d16fc2272df","75b787980b3e8ccc","67259a846e8ca4df"],"x":34,"y":1099,"w":1372,"h":502},{"id":"6920ac130d304910","type":"group","z":"a071896d152eb245","name":"White LED Slider","style":{"label":true,"stroke":"#000000","color":"#000000","fill":"#ffffff"},"nodes":["591ab1cf973c7243","26e2f6ae3368051d","2bc95003dc759b24","4766f276fe427190","790133988aa3a1a7","dc3a7b9cba47ffc9","c41b0284fcb927ed","b1f88d45dded939f","e023df5f11d0eeab","fbe6e6b429761cf0","8ce5e78a6f24a2c3","2e20354fcc2a56f4","f835f73a98c85ea5","ab33347066c0787f","98791e5b1aff5297","0d2671876a531ba2","19951b43f5fdf48c","3893f376aed7f352","d7ce139ba9c43c23","396a0fe774e96162","9cd5e269345c6069","3838e4a95eb2963b","5cf8f80c506a6dde","1c7d41696f1edd94","4e6844e10b366cf7","b360c448d2c82472","38858bf9db522b25","cccab3ab5010649c","ca2d83564f7dac58","4a91bfee7218f819","d1b8885c41113080","d4db4b828fa4b72d","a9109330b9283f4e","be01c9b8f2a309db"],"x":54,"y":39,"w":1332,"h":502},{"id":"1be6052effb87dcb","type":"group","z":"a071896d152eb245","name":"Green LED Slider","style":{"stroke":"#000000","label":true,"color":"#000000","fill":"#92d04f","fill-opacity":"0.2"},"nodes":["2515d71481f5f318","c3b1b0f1ce726a7d","7fde090fe37fa2ea","40feb36534c95f59","839583dc53776b26","4571a28cdf2a8405","2d9195cea94d096b","e6700a133892e4fa","1189fa3f9e0b478b","af858e5dfda58919","6ed050c92479c191","fb962faef204920e","f7fa5410f519b494","36c13ecea2ddaf1b","3d3ef93f058a8535","669551b5667f3725","4b37181896066e8f","f7998a0786e7cf2e","1519293c156f7122","87afa3aba032f01d","7f600c284104e521","2ac7ab0b299adf30","ce29b5662db57c93","8c6b4179a3b7db9e","a34cc5fcf561c98d","8b7ec2f6d53ff5dc","b1d40e5d3ea9bc60","294ed060cc921d62","645e1d7030ab45fd","0201e0d07d776025","0f8ce5b0a614bbed","ae1acb1af55045b5","b733b1b2a2d840a8","28811582f577fb1c"],"x":44,"y":1619,"w":1382,"h":502},{"id":"45a22e8eeb00d1a1","type":"group","z":"a071896d152eb245","name":"UV LED Slider","style":{"label":true,"stroke":"#000000","color":"#000000","fill":"#6f2fa0","fill-opacity":"0.3"},"nodes":["5d4252397a15cb33","cc6ad7e8c28ccdd7","1da0f6d520f831e9","b05115f78aac6a05","bc4db2c40cbc3a2e","daf6ab147fd9813e","3f4f25bb3f6c46bb","424aa7060f60a6fc","c4e0b19c50a876ce","ad8b62da67e84d9e","7c2579a83b5dcfc5","cd69f55f2a13a629","9c1d45a42873a071","662abcc11802cf2a","30bbd0edd70e8144","624c3ecb47e3e490","9c9506d70fc12c91","32e5c7e4b665c4e3","c85e9f760b068144","ddc965e287e65023","0924905f499c443b","60309901b9d2a8ce","ce5fd925cc47cdb1","1891bbc13f99fae0","b95b2e1513702681","389898a961f00c7b","784090adfd7e339f","34e0326e86546cae","a0a613a480e833a2","442a2cd615ab249f","11e4c3aa298efa97","8c25980ebff02f13","82cabd56478777e1","05851328aaf4af5b"],"x":104,"y":2159,"w":1342,"h":502},{"id":"90d9ac488dc91ae9","type":"group","z":"ad70ca3f38056645","name":"Kinematics Pinionwheel Check","style":{"label":true,"stroke":"#000000","color":"#000000","fill":"#d1d1d1","fill-opacity":"0.24"},"nodes":["8ca9ffa5c084a199","1391a6ec2c6256f6","107ba1e3b54447b3","b0739b91bf047eb7","eb9d0a84067feebb","ce7c158c3f28e19b","bdbeba2de4faef43","0807ebe463bd202b","c16233c373d5d5cc","72a98dda56f8774d"],"x":34,"y":39,"w":1632,"h":202},{"id":"691fbdbe109ddb09","type":"group","z":"4d69908ddcfaac9c","name":"Kinematics Control","style":{"stroke":"#000000","fill":"#777777","fill-opacity":"0.25","label":true,"color":"#000000"},"nodes":["b83e4245209825a5","3feed79c668b2b8e","87d001285ef2f659","6e9cf8b26501c4f7","7b64a7795664f27e","dc13f86e411b2262","e0588b45e337dd3d"],"x":594,"y":2199,"w":272,"h":402},{"id":"7726591f7ae49953","type":"group","z":"4d69908ddcfaac9c","name":"Automation States","style":{"stroke":"#000000","fill":"#0070c0","fill-opacity":"0.29","label":true,"color":"#000000"},"nodes":["1e16fd57834f4bab","7c4eed599efc134f","b04e566f27b3aeb6","9003b4141428c86b","35d9c6f3bb695b64","9251d69a8ae4e47b","95fa044b82384055","5d5ef0673ac89375","9a9ee671f52e2d4a","9b61d88cbb490ef0","21c7fd6b77622d76","b938625a6ce1385c","3d5fb1ff5d08a5d9","faaaf98dea657c58","46bd24e166362245","79ab147ab771e9fb"],"x":444,"y":199,"w":722,"h":442},{"id":"64fd3b31b60a4e17","type":"group","z":"4d69908ddcfaac9c","name":"Kinematic States","style":{"stroke":"#000000","fill":"#777777","fill-opacity":"0.23","label":true,"color":"#000000"},"nodes":["730f87b92e887b0c","8f698f16474d86ab","39c2892f0b5d5ea7","d845c102cc8834ac","9e7dd89e3a936dd1","7ed788079f986fad","c1fb2e2aa1079f86","d5da819c14d9d9b8","3f82fb9177eb48a4","3ab8e09267d1ecfc","86d16c7a0bb268b9","bbf0c878a9512c09","1be2a0ec5a68a4e3","c286660332418957","7269614e14c63246","99f524f94889e68c","598acc0a1796788f","7a4427c647084818","ead16b45ef921547","7b572115d43fda8b","e265d5d504fc80db","6ec4aef5b561d81e","eba7bf46452fea95","c59852ea43b9fc66","d6669515c33841fa","6ed9c4531c7effd0","259d4fd83bf318d5","84b0af335a9cb1c5","95119205324e5929","51d51c0cd0c4a949","4e2350a9b0e65ec9","a6c0605898e4e118","0e7975f874edbc85","466ff8738c869dd4","defcaba4a825b973","fc8beec6719e5c8c","698ec6bd61faab38","667adf65ae47f2f2","a99a6db3b524c49a"],"x":544,"y":659,"w":1002,"h":1042},{"id":"65a6d1c782131ce7","type":"group","z":"4d69908ddcfaac9c","name":"Camera Mode","style":{"stroke":"#000000","fill":"#6f2fa0","fill-opacity":"0.1","label":true,"color":"#000000"},"nodes":["15cd0c9a735d73dd","9186e572e06fa84d","a68aa5ec50dac5b4","4fa2176a2f7e48a3","aaeea55965b7ed16","86805ad6307c0fa2","6cc9af9e60e3e56a"],"x":574,"y":1939,"w":1012,"h":202},{"id":"277e265964d355ba","type":"group","z":"4d69908ddcfaac9c","name":"Daytime States","style":{"label":true,"stroke":"#000000","fill":"#0070c0","fill-opacity":"0.17","color":"#000000"},"nodes":["0e5ad999a36c8965","e656a35e49130482","1e6e23fe99c8d241"],"x":574,"y":1719,"w":612,"h":127},{"id":"41c2a49f0bdcc0b0","type":"group","z":"4d69908ddcfaac9c","name":"TODOs","style":{"stroke":"#000000","fill":"#ff0000","fill-opacity":"0.2","label":true,"color":"#000000"},"nodes":["04a8cf8f8cf79072","c842e32bd9335f8b","8dfa1d6c21941144","ff45781464598a95","16d314750215e554","5dc9770fcb4efdd8","cf022ab0eb479907","35ef2ae94920a5f6","03cc2cfbb7550c0a","380dd68c5061d4d7","487a3da5c22e9dfc","5c5521698cb72cbe","656acfae3e0d9c64","02106823f7f7b623"],"x":2294,"y":159,"w":1232,"h":442},{"id":"5238f08ee293f6d0","type":"group","z":"4d69908ddcfaac9c","name":"Statemachine","style":{"stroke":"#000000","fill":"#ffC000","label":true,"color":"#000000"},"nodes":["a03d265efa3a0ed4","0ba6a41169713dd8","13bef2a428f8780a","e324602c5324b1d1","06d2e7387e3d7de1"],"x":1264,"y":59,"w":542,"h":262},{"id":"6665484f8e6201fb","type":"group","z":"ad70ca3f38056645","name":"LED Fan Control","style":{"stroke":"#000000","fill":"#0070c0","label":true,"color":"#000000","fill-opacity":"0.32"},"nodes":["f77b6b99d9b585d9","7ff682cfe81be418","73c85f65a748498e","a89a797d47c84619","66aa662f9a030146","b269615afdc18c97","65c056c2b3d8efbd","d863332e03aafe37","85987e9396cecee1","420fbbf9e490b640"],"x":34,"y":279,"w":1472,"h":242},{"id":"4b8b61390d3258ac","type":"group","z":"ad70ca3f38056645","name":"LED Brightness Safety Control","style":{"stroke":"#000000","fill":"#ffC000","label":true,"color":"#000000","fill-opacity":"0.32"},"nodes":["9fb97547d2bd440f","1373f324c02f03f5","818545a1697e8921","b56330fe8f0f9426","89916ea0b973751c","46c2013b3b1eea7c","94b36427af066668","2ad7e35e4f545a99","40fc822db9a1218f","830fe8a54ab79e64","bd4b30573f7b3401"],"x":34,"y":559,"w":2002,"h":162},{"id":"666a0946f4d763d8","type":"group","z":"6c2304a77d361b80","name":"Daynight Automation","style":{"stroke":"#000000","label":true,"color":"#000000","fill":"#0070c0","fill-opacity":"0.22"},"nodes":["6dbfcc23eaf92b9f","8aa1567ae88d3a16","b7e7f0b66b302a3a","ce2ff2a7d7e73f31","ae3e4b047fb98501","e464e13c4f816437","74bbe0119b080d7c","1774109e9ee43aa3","873a9c44edd2e1f1","b3eb422e7473674d","a3da6a8ee429b31d","c5a47bf50ec2f8df","c5770d1646caf1c9","70dc5213afba01c8","c0a8e86d1b0723a9","955dd9554e7d94a4","52d5ea9b2ae52f98","34a40b32178f4dc5","3b2a74f062fc5f39","63765e7b056aefb5","4dfa1d65d7540cfc"],"x":54,"y":19,"w":1272,"h":342},{"id":"1620ec042e6a36cf","type":"group","z":"6c2304a77d361b80","name":"Daylight Automation","style":{"stroke":"#000000","label":true,"color":"#000000","fill":"#ffC000","fill-opacity":"0.34"},"nodes":["fe9efe762c3c463a","42406eed97e9a3d6","b8bd2e202658bd33","6af4e1ebf1d98e2c","3ab1c276718b889b","ce91067e1d51115a","af86c3229d360ac0","cb92f0db5dfe8843","7a256adb5c4058c1","0b711015e781f34d","cb5e516b1a8f4f4c","06e9fa55a8ac2044","3a9daba58b3fd2fb","8902d10ec62bcc5d","85182bfb34ef7d85","5a2c766924ce53dc","0047b67c867b502d","ed8754e05440e6aa","160b8251e02d3e4f","6a81eb7525fdbe65","cb46cd2c1e5dc129","bd8e0ea9010a6f82","06faffbd1f4defac","f40672f4470a1107","22d0e047ba06307f","f0d182e5eccc9dff","a7fe0914ab695d44","9c8d1153226f7de6","a0ada0fa02727f30","716eaca5ef298301","63465bc6e9197536","6c935722593ece35","017223ba6ad3b894","e3060135c6f87ef2","95cf05bbeed3bd91","cdd4b1ac09073c0e","083bf01f2db0f9a3","a685eca8e485888b","be6c750e1539e262","d6b9149612c6b98c","e034eefa31d5a615","c05c57c718b218c4","36ba49678390f6f4","bf1b3591e951be10","e4bbe823468c4c75","d59196bde60a2848","e5024bd9e374af6a","5bdf480d65fbe912","bcafbae0cc121aa8","cb347f05f5e8f151","decc5dd354be0cd6","210594d846d0dbb2","7369df66c150c317","1e7aeae3579cd872","b3dccdb71076fce5","a54fe2ca64b842a0","f6be39abae7fccae","cf4f938b469cc76d","bdaad57cf10763d8","7aecb92978aa8b08","cbfd310bd09f67be","00237a27c967eedf","1ecf03484ae556d6","922b2bd6c898268f","1765386fddcc2c4c","01f6ec0d64e99630","f279070d697c4abd","479ef872e788f41e","38e2cf50f9753215","1420293998f1b1b3","1cbe91a0dfc70688","deca50aadc9879df","ebb60c1c61efe5bd","b1da5f62a3c466fd","264fcf65fa185265","49aa2a52c4111675","57f4b3cbf6dd98fa","961ff7f717ef33fc","a4a35d751457eaca","21fccd4a97536344","2a54c77f1942de5b","036dad166d1b4159","42a970a24c42776b","54d7708df168952c","3c5d5b141a7e67a3","a3c2642225d26285","27c4e2bf9699cc13","ee93c9d82eeb75cc"],"x":54,"y":759,"w":2452,"h":962},{"id":"8cb7deb87cbc2851","type":"group","z":"6c2304a77d361b80","name":"Day Start End Automation","style":{"stroke":"#000000","fill":"#dbcbe7","label":true,"color":"#000000"},"nodes":["5f5ae0d709e125f3","8372558ac9162d14","c73c4d3f691dcd59","5497e7a85a5d4654","aea71149ca4b79aa","20696e0ce9df07f5","6cb6919a78ecf2e1","4b747eb510fcae82","5924c2047bac91f0","eedb5a81d7fa23ba","59e10d8ec1f02837","4b461e4b418822e6","eb60fad939428a0b","b478057eb616670c","b9e2f4902ffd88c5","b3a20e975f9061c9","674a6478d9931d4e","9bd09c8e087e2e39","b5a0a6614a37d4d9","3e4c51a5866cf87c"],"x":54,"y":399,"w":2152,"h":302},{"id":"fe1035315dc798e0","type":"group","z":"6c2304a77d361b80","name":"LED Control","style":{"stroke":"#000000","fill":"#ffff7f","fill-opacity":"0.23","label":true,"color":"#000000"},"nodes":["fb82010ad8c698d2","0ba3d0b861519d55","b3a09943a46b7bb8","fea461457d30c66d","14e9f644eaa9854b","9383ab4d307c8b74","221d607e57a4eec9","163bc989c0cbd973","6a6e41e7ea98d3f4","e6deee08b29fc990","43cdb00178fe7cc1","8cc11108ca19a42a","6a0cfd5a8ac67a4e","f6311c587b76e10c","5dd8d63fb2037396","67e66918e8c10b56","138f3b1a7ff7fb4e","f3224783b785bf13","6c5498373f8a259e","7311a8a12909a06a","64c759e07c439f7c","8146bba8bbe99445","c54c03bcac30ed44","0a8ce9bc98bb56d5","283cf585f5cfc725","95ab6f9ba36cd00c","fb41c0125a6f8b52","f7d3e2175c10009a","6e1329267cb211a7","c7cf5b819324165c","ca5da5cdf6669106","7e8353a0eb5c8d5f","8e7556d39277456c","e3b950f44aa1667c","ce11681074ff9b0b","cb69d58f30f836cf","63374ebf919b41a4","76f0b6013cb19be7","a876ede498158194","182db0a1c6dbc858","61150eebb5efa74f","b0225f871664421e","d32cf281cf06032c","6215051ba83240ed","3eb4b97be1ced555","0bdd9f0a4a386ccd","0c88717393e4629e","815e7220f354fb42","c68ed1c02008de01","ce262c84b8caa18e","d23843a2b4cd1f84","027d3d81487b9335","bada2d2c233c2858","ea91b79e8389397a","c02f7c0809254d4a","c293608ef26c5928","f8c745ccc1e14a1c","0ee9b79f8f300454","c6a834dba431d100","ac589db0da458bfa","b3850da6a7fc4695","4d6932b42438da36","058beba00dd6bb12","2182e50928063704","c9471a0c644a021a","35704879e43daa60","4bdbc09b36ac0a66","48b03eb9e43876b4","4b25efcef9cad0b5","b9fcd5f68019ca40","4b98bff6d5306df2","c208beec026ae315","9a2c74c6bbbc716b","89bd3dc12aec428b","20506b4bbb33dd94","dadc7f0900357a47","406c8b69f51d6a55","1ff7f4bad879a2c9","66b3ee41cf4c0b9e","cc76c1cefc26a2b4","f0d34e5b5a8a21eb","41d437038e5c04ea","cd18a6c73f1b0e6a","68e1f4c8bbc2dba1","0782d29e5df3367c","6bdd938b989ac798","ec679f7b4805c4bf","3511eb942b05dabc","b65e7ec6b647f8b3","a8011174b48de6a5","2b729516132bbec8","97f3cdc418ade4b4","06c19c58a6872b4c","79f6b84412d87738","5a310592fb6ab221","74092c6544dbb67a","d45c88f902805414","e93c0b7c204f54af","32a8f53ec33ddf46","d776bbafa5cc71d7","f84492bde5f3dc99","3dda1aedc4bb2e54","a6fceecab9390a4b","8c689d2a3e5f1a94","ea82d1b60f274740","bfa42af1815f3079","340ea6da4520c27d","6b66e1a30f0a0cf7","9acd9d9d4b0f8dc8","403cb6aa1625b873","72b8d51bc7109482","38f6a0b76339dbc9","ed716cab95e82f70","0f86837e71513667","e5f9f0c7d9bdc8f8","350d5349a3688f2e","e43470ad50e29bd8","f4214041af3117ab","4deed3a64d543dc6","29b385b28fcd25d8","460b3cf2c9d55f95","c7fbc6602dd42789","b5713b69ca864b16","0f75ec7cdc71cf2e","f18df80d32b61e7d","89dcbdf915948bec","b7803a57c4f75665","de26ba509786ccd9","cf027065c7627374","3b787aeaaf5ffe5a","3ffd0895f03766f0","7f78cd0d8879dcc9","cd76f256782e7490","1370b9dd84b1c1b2","b5a99d67f8c63e6e","e62bbce11942e8f7","8eb06aef12baaca8","28ad279d78ba4637","8fead4cf74eee1f9","b81a6714d257b8ea","e0859806cfc83320","aeb8844a7cf36822","ff2c7579a65290be"],"x":54,"y":1759,"w":3952,"h":862},{"id":"d2c61814b86846fb","type":"group","z":"6c2304a77d361b80","name":"Camera Sequence","style":{"stroke":"#000000","stroke-opacity":"0.91","fill":"#addb7b","fill-opacity":"0.38","label":true,"color":"#000000"},"nodes":["d3e992b454b19cfd","a05a06a21f46661e","21cb1d283508a226","3cfd0b2693a31021","2b2d3213a49a1311","d6e2c81e52f96c28","60aed97cce689e32","832a8a412d3c4984","28ee94dc703bed85","0c8f9cd23a7a29e8","e49a44efef0b25c4","9318777bc0a58ddb","aaee11faa48320f6","d065d3577d31bce9","4482ef9d7204f2c1","df82764698faf548","0938d6e94292ce94","b87797f2846538a4","4fcb5d3d961528ec","202cbf58869e889b","097c8a79d0f8282b","1c57d09efa5007a0","9c84216de2a4e609","1fa012e3cfed2f17","18422b88f225298b","da071124d891f659","b9e79777a83131a5","305d59de30584936","a1204ea828693cba","2302e81365d1cfb6","8f6cc852c3668504","9e7ec1c836105d60","504e167e79629284","388f4365abcbb540","f1f66389f61b4d36","7031130376f7c3cc","74bfc8a0044512f8","773c92490d2f4826","4e2c2cbd288fedad","871f6de77f14b508","771dee6535e2642c","6abb78b1969b6a45","d6b348fe59afd606","a4355dbc69df502b","693bc9c50b29301f","c8b32b4d5b199cca","7c3a19434ae4e8c0","a5672204c699910c","89b1afd1b54fb512","437fd59bde47b12a","60f258a7a1268a5f","1896a27b76728349","9c9f13a9a5e843c5","228e8a6e2a8fb4e3","26d28fd2d514a6b0","a236273c16976832","b7a56701cd03bd6d","3f6a1ff4586b3b58","de39656a7c1907f6","815d28f9afbd6e1d","7fa5d749b5b2db01","5c76b9d948d8cf93","4f8df11a16b34a98","1b360ceb51b0d1aa","96e1478622d58827","112a1360670b7d32","b9881b6644758d71","f7599daa58d19b50","5047e97461550f17","80e2c0b3c6a98395","d646788927b30eb6","30488744fb419d97","0b3b5a47044aa868","c9ce0c8b7db1810e","3f2fcfc88a2d2794","cb973994f4826fbf","6464495bdab4af9c","816f60c9f7bb08df","d2d75c101d09c052","10a741d7856f84bd","bc1c8ea91b2c58c2"],"x":54,"y":2639,"w":2792,"h":567},{"id":"f608c33f06e4a6a3","type":"group","z":"6c2304a77d361b80","name":"Pump Automation","style":{"stroke":"#000000","fill":"#0070c0","fill-opacity":"0.35","label":true,"color":"#000000"},"nodes":["98162e520aefef74","29f37f8ad9971855","731d45e91fd15317","45483bd5cc96ec74","9c85fdfecfea4b63","3ac75bf94a49b8fe","a7927be7d7ce4eb5","34cddbaf4fbc2abe","facefbbd87372c41","1f6f0f8ca7daf997"],"x":54,"y":3239,"w":1172,"h":202},{"id":"5a1dd045f3f8a36a","type":"junction","z":"4d69908ddcfaac9c","x":1600,"y":580,"wires":[["0e7d918107d2ce4a"]]},{"id":"0e7d918107d2ce4a","type":"junction","z":"4d69908ddcfaac9c","x":1720,"y":580,"wires":[["a03d265efa3a0ed4"]]},{"id":"defcaba4a825b973","type":"junction","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","x":1300,"y":880,"wires":[["5a1dd045f3f8a36a"]]},{"id":"79ab147ab771e9fb","type":"junction","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","x":1140,"y":420,"wires":[["5a1dd045f3f8a36a"]]},{"id":"65272e1280335db8","type":"junction","z":"4d69908ddcfaac9c","x":280,"y":200,"wires":[["b7924b4f3fa4598e"]]},{"id":"fc8beec6719e5c8c","type":"junction","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","x":1260,"y":1240,"wires":[["defcaba4a825b973"]]},{"id":"667adf65ae47f2f2","type":"junction","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","x":1500,"y":1320,"wires":[["5a1dd045f3f8a36a"]]},{"id":"a99a6db3b524c49a","type":"junction","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","x":1520,"y":1600,"wires":[["5a1dd045f3f8a36a"]]},{"id":"698ec6bd61faab38","type":"junction","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","x":1060,"y":1520,"wires":[["51d51c0cd0c4a949"]]},{"id":"afe6175658ee697c","type":"junction","z":"4d69908ddcfaac9c","x":740,"y":2580,"wires":[[]]},{"id":"6d8fc78580b7af15","type":"junction","z":"4d69908ddcfaac9c","x":3020,"y":4560,"wires":[[]]},{"id":"1e6e23fe99c8d241","type":"junction","z":"4d69908ddcfaac9c","g":"277e265964d355ba","x":1160,"y":1820,"wires":[["a99a6db3b524c49a"]]},{"id":"63765e7b056aefb5","type":"junction","z":"6c2304a77d361b80","g":"666a0946f4d763d8","x":320,"y":280,"wires":[["70dc5213afba01c8"]]},{"id":"4dfa1d65d7540cfc","type":"junction","z":"6c2304a77d361b80","g":"666a0946f4d763d8","x":320,"y":160,"wires":[["70dc5213afba01c8"]]},{"id":"5bdf480d65fbe912","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":660,"y":1420,"wires":[["cb92f0db5dfe8843","7a256adb5c4058c1","0b711015e781f34d","cb5e516b1a8f4f4c","a0ada0fa02727f30"]]},{"id":"bcafbae0cc121aa8","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":1720,"y":1300,"wires":[["22d0e047ba06307f"]]},{"id":"a54fe2ca64b842a0","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":1060,"y":1460,"wires":[["f6be39abae7fccae"]]},{"id":"00237a27c967eedf","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":380,"y":1100,"wires":[["38e2cf50f9753215"]]},{"id":"1ecf03484ae556d6","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":480,"y":800,"wires":[[]]},{"id":"479ef872e788f41e","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":360,"y":1220,"wires":[["38e2cf50f9753215"]]},{"id":"38e2cf50f9753215","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":500,"y":1380,"wires":[["b3dccdb71076fce5"]]},{"id":"ebb60c1c61efe5bd","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":380,"y":1360,"wires":[["38e2cf50f9753215"]]},{"id":"21fccd4a97536344","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":380,"y":1500,"wires":[["38e2cf50f9753215"]]},{"id":"54d7708df168952c","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":380,"y":1640,"wires":[["38e2cf50f9753215"]]},{"id":"3c5d5b141a7e67a3","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":480,"y":1520,"wires":[[]]},{"id":"a3c2642225d26285","type":"junction","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","x":400,"y":920,"wires":[["b3dccdb71076fce5"]]},{"id":"ca5da5cdf6669106","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":3700,"y":2000,"wires":[["221d607e57a4eec9","163bc989c0cbd973","6a6e41e7ea98d3f4","e6deee08b29fc990"]]},{"id":"7e8353a0eb5c8d5f","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":1720,"y":2240,"wires":[["c6a834dba431d100"]]},{"id":"8e7556d39277456c","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":1720,"y":1920,"wires":[["bada2d2c233c2858"]]},{"id":"e3b950f44aa1667c","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":1720,"y":2000,"wires":[["ea91b79e8389397a"]]},{"id":"ce11681074ff9b0b","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":1720,"y":2080,"wires":[["b3850da6a7fc4695"]]},{"id":"cb69d58f30f836cf","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":1720,"y":2160,"wires":[["f8c745ccc1e14a1c"]]},{"id":"63374ebf919b41a4","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2120,"y":2240,"wires":[["b0225f871664421e"]]},{"id":"76f0b6013cb19be7","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2120,"y":2160,"wires":[["d32cf281cf06032c"]]},{"id":"a876ede498158194","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2120,"y":2080,"wires":[["6215051ba83240ed"]]},{"id":"182db0a1c6dbc858","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2120,"y":2000,"wires":[["3eb4b97be1ced555"]]},{"id":"61150eebb5efa74f","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2120,"y":1920,"wires":[["0bdd9f0a4a386ccd"]]},{"id":"058beba00dd6bb12","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2140,"y":2280,"wires":[["74092c6544dbb67a"]]},{"id":"48b03eb9e43876b4","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2140,"y":2200,"wires":[["79f6b84412d87738"]]},{"id":"4b25efcef9cad0b5","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2120,"y":2120,"wires":[["97f3cdc418ade4b4"]]},{"id":"b9fcd5f68019ca40","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2120,"y":2040,"wires":[["a8011174b48de6a5"]]},{"id":"4b98bff6d5306df2","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2120,"y":1960,"wires":[["b65e7ec6b647f8b3"]]},{"id":"c208beec026ae315","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":3200,"y":2220,"wires":[["0782d29e5df3367c"]]},{"id":"9a2c74c6bbbc716b","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2980,"y":2140,"wires":[["cd18a6c73f1b0e6a"]]},{"id":"89bd3dc12aec428b","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2980,"y":2060,"wires":[["f0d34e5b5a8a21eb"]]},{"id":"20506b4bbb33dd94","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2980,"y":1980,"wires":[["66b3ee41cf4c0b9e"]]},{"id":"dadc7f0900357a47","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2980,"y":1900,"wires":[["406c8b69f51d6a55"]]},{"id":"ec679f7b4805c4bf","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2700,"y":1820,"wires":[[]]},{"id":"b65e7ec6b647f8b3","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2400,"y":1940,"wires":[["3511eb942b05dabc"]]},{"id":"a8011174b48de6a5","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2400,"y":2000,"wires":[["2b729516132bbec8"]]},{"id":"97f3cdc418ade4b4","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2400,"y":2080,"wires":[["06c19c58a6872b4c"]]},{"id":"79f6b84412d87738","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2400,"y":2160,"wires":[["5a310592fb6ab221"]]},{"id":"74092c6544dbb67a","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":2400,"y":2240,"wires":[["d45c88f902805414"]]},{"id":"32a8f53ec33ddf46","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":1180,"y":2160,"wires":[["14e9f644eaa9854b","43cdb00178fe7cc1","5dd8d63fb2037396","7311a8a12909a06a","0a8ce9bc98bb56d5"]]},{"id":"d776bbafa5cc71d7","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":1160,"y":2040,"wires":[["0ba3d0b861519d55","8cc11108ca19a42a","67e66918e8c10b56","6c5498373f8a259e","c54c03bcac30ed44"]]},{"id":"bfa42af1815f3079","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":840,"y":2060,"wires":[["32a8f53ec33ddf46"]]},{"id":"ed716cab95e82f70","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":420,"y":2040,"wires":[["8fead4cf74eee1f9"]]},{"id":"e5f9f0c7d9bdc8f8","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":320,"y":2200,"wires":[["ed716cab95e82f70"]]},{"id":"de26ba509786ccd9","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":400,"y":2500,"wires":[["ed716cab95e82f70"]]},{"id":"cd76f256782e7490","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":720,"y":2460,"wires":[["8fead4cf74eee1f9"]]},{"id":"8fead4cf74eee1f9","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":760,"y":2040,"wires":[["f84492bde5f3dc99"]]},{"id":"e0859806cfc83320","type":"junction","z":"6c2304a77d361b80","g":"fe1035315dc798e0","x":700,"y":2160,"wires":[["8fead4cf74eee1f9"]]},{"id":"112a1360670b7d32","type":"junction","z":"6c2304a77d361b80","g":"d2c61814b86846fb","x":1120,"y":2860,"wires":[["b9e79777a83131a5","305d59de30584936","a1204ea828693cba","2302e81365d1cfb6","8f6cc852c3668504","9e7ec1c836105d60","504e167e79629284"]]},{"id":"b9881b6644758d71","type":"junction","z":"6c2304a77d361b80","g":"d2c61814b86846fb","x":1220,"y":3180,"wires":[["7fa5d749b5b2db01"]]},{"id":"01263ebbefde2d08","type":"junction","z":"4d69908ddcfaac9c","x":1580,"y":2520,"wires":[["c81d771b36572c9a"]]},{"id":"f482c16b.7b4d","type":"server","name":"Home Assistant","version":2,"addon":true,"rejectUnauthorizedCerts":true,"ha_boolean":"","connectionDelay":false,"cacheJson":true,"heartbeat":true,"heartbeatInterval":"30"},{"id":"090665a04fa6c385","type":"mqtt-broker","name":"Homeassistant MQTT Broker","broker":"127.0.0.1","port":"1883","clientid":"","autoConnect":true,"usetls":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willPayload":"","willMsg":{},"userProps":"","sessionExpiry":""},{"id":"ef067c6f.620e6","type":"server","d":true,"name":"hass.io","version":2,"addon":true,"rejectUnauthorizedCerts":true,"ha_boolean":"y|yes|true|on|home|open","connectionDelay":false,"cacheJson":true,"heartbeat":false,"heartbeatInterval":"30"},{"id":"62d7bb2f.196044","type":"server","d":true,"name":"ESP Home","version":2,"addon":false,"rejectUnauthorizedCerts":true,"ha_boolean":"","connectionDelay":false,"cacheJson":false,"heartbeat":true,"heartbeatInterval":"10"},{"id":"d28c9492.f419c8","type":"server","d":true,"name":"","version":2,"addon":true,"rejectUnauthorizedCerts":true,"ha_boolean":"","connectionDelay":false,"cacheJson":false,"heartbeat":false,"heartbeatInterval":""},{"id":"2dde05e9153f7e26","type":"ui_tab","name":"Home","icon":"dashboard","disabled":false,"hidden":false},{"id":"7724bf65801a42b3","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey","palette":"light"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD.MM.YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"5fde6ffd3a8708d4","type":"ui_group","name":"Standard","tab":"2dde05e9153f7e26","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"250eeee2.afada2","type":"mqtt-broker","d":true,"name":"192.168.1.8","broker":"192.168.1.8","port":"1883","clientid":"","autoConnect":true,"usetls":false,"compatmode":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willPayload":"","willMsg":{},"userProps":"","sessionExpiry":""},{"id":"a526e1d6acb6b7ab","type":"telegram bot","botname":"protohaus-ofai-pcs","usernames":"CptPingui,Mon92BS","chatids":"-1001698219543","baseapiurl":"","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","botpath":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":false},{"id":"d73229eefcbd69e2","type":"telegrambot-config","d":true,"botname":"protohaus-ofai-pcs","usernames":"CptPingui,","chatIds":"-1001698219543,","pollInterval":"300"},{"id":"fdbea5e0.730e08","type":"http request","z":"ab1036a4c01aab80","name":"","method":"GET","ret":"bin","paytoqs":"ignore","url":"192.168.188.65/picture/1/current/","tls":"","persist":false,"proxy":"","authType":"basic","senderr":false,"headers":[],"x":470,"y":520,"wires":[["3f7ee72a99f31698"]]},{"id":"25e3021fefb298c5","type":"comment","z":"ab1036a4c01aab80","name":"IP Camera Configuration","info":"","x":510,"y":480,"wires":[]},{"id":"a2098170b1d4826f","type":"function","z":"ab1036a4c01aab80","name":"send picture","func":"var pl = {\n  content: msg.payload,\n  caption: `Picture: pcs1_cam1`,\n  type: 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.originalMessage.chat,\n  from: msg.originalMessage.from,\n  message_id: msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":120,"wires":[[]]},{"id":"173ab3da1bddfcbd","type":"comment","z":"ab1036a4c01aab80","name":"ESP32 Camera Configuration","info":"","x":520,"y":80,"wires":[]},{"id":"43399e15d0db9da5","type":"api-call-service","z":"ab1036a4c01aab80","name":"Snapshot pcs1.cam1","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.pcs1_cam1_camera","data":"{\"filename\":\"/config/www/pcs1_cam1.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":500,"y":120,"wires":[["b1ef6fc950ef5462"]]},{"id":"b1ef6fc950ef5462","type":"file in","z":"ab1036a4c01aab80","name":"load image","filename":"/config/www/pcs1_cam1.jpg","filenameType":"str","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":690,"y":120,"wires":[["a2098170b1d4826f"]]},{"id":"1b2a050c6aeb59a3","type":"switch","z":"ab1036a4c01aab80","name":"Choose Cam","property":"originalMessage.text","propertyType":"msg","rules":[{"t":"eq","v":"/pic_pcs1_cam1","vt":"str"},{"t":"eq","v":"/pic_pcs1_cam2","vt":"str"},{"t":"eq","v":"/pic_pcs1_cam3","vt":"str"},{"t":"eq","v":"/pic_pcs1_cam4","vt":"str"},{"t":"eq","v":"/pic_pcs1_cam5","vt":"str"},{"t":"eq","v":"/pic_pcs1_cam6","vt":"str"},{"t":"eq","v":"/pic_pcs1_cam7","vt":"str"},{"t":"eq","v":"/pic_pcs1_all","vt":"str"},{"t":"eq","v":"/pic_all","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":10,"x":190,"y":280,"wires":[["43399e15d0db9da5"],["08260b977be2b610"],["11110b9b342bbb1f"],["1330d7d89ea87472"],["f84afacb92a942cc"],["479df0f5d416a6f1"],["7d6aba86bc174503"],["7d6aba86bc174503","479df0f5d416a6f1","f84afacb92a942cc","1330d7d89ea87472","11110b9b342bbb1f","08260b977be2b610","43399e15d0db9da5"],["43399e15d0db9da5","08260b977be2b610","11110b9b342bbb1f","1330d7d89ea87472","f84afacb92a942cc","479df0f5d416a6f1","7d6aba86bc174503"],["339e9f949a87e978"]]},{"id":"08260b977be2b610","type":"api-call-service","z":"ab1036a4c01aab80","name":"Snapshot pcs1.cam2","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.pcs1_cam2_camera","data":"{\"filename\":\"/config/www/pcs1_cam2.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":500,"y":160,"wires":[["0f074779063b0565"]]},{"id":"0f074779063b0565","type":"file in","z":"ab1036a4c01aab80","name":"load image","filename":"/config/www/pcs1_cam2.jpg","filenameType":"str","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":690,"y":160,"wires":[["f98ff7bd174079fc"]]},{"id":"11110b9b342bbb1f","type":"api-call-service","z":"ab1036a4c01aab80","name":"Snapshot pcs1.cam3","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.pcs1_cam3_camera","data":"{\"filename\":\"/config/www/pcs1_cam3.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":500,"y":200,"wires":[["d6286627733658d0"]]},{"id":"d6286627733658d0","type":"file in","z":"ab1036a4c01aab80","name":"load image","filename":"/config/www/pcs1_cam3.jpg","filenameType":"str","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":690,"y":200,"wires":[["2e52f87077047aa1"]]},{"id":"1330d7d89ea87472","type":"api-call-service","z":"ab1036a4c01aab80","name":"Snapshot pcs1.cam4","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.pcs1_cam4_camera","data":"{\"filename\":\"/config/www/pcs1_cam4.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":500,"y":240,"wires":[["9b3fa02b9dd46aca"]]},{"id":"9b3fa02b9dd46aca","type":"file in","z":"ab1036a4c01aab80","name":"load image","filename":"/config/www/pcs1_cam4.jpg","filenameType":"str","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":690,"y":240,"wires":[["bab8f70489938717"]]},{"id":"f84afacb92a942cc","type":"api-call-service","z":"ab1036a4c01aab80","name":"Snapshot pcs1.cam5","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.pcs1_cam5_camera","data":"{\"filename\":\"/config/www/pcs1_cam5.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":500,"y":280,"wires":[["14327525df6f7489"]]},{"id":"14327525df6f7489","type":"file in","z":"ab1036a4c01aab80","name":"load image","filename":"/config/www/pcs1_cam5.jpg","filenameType":"str","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":690,"y":280,"wires":[["399aec1c9bc888a5"]]},{"id":"479df0f5d416a6f1","type":"api-call-service","z":"ab1036a4c01aab80","name":"Snapshot pcs1.cam6","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.pcs1_cam6_camera","data":"{\"filename\":\"/config/www/pcs1_cam6.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":500,"y":320,"wires":[["1a8d6b101365b544"]]},{"id":"1a8d6b101365b544","type":"file in","z":"ab1036a4c01aab80","name":"load image","filename":"/config/www/pcs1_cam6.jpg","filenameType":"str","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":690,"y":320,"wires":[["3d50fa9f3089425e"]]},{"id":"7d6aba86bc174503","type":"api-call-service","z":"ab1036a4c01aab80","name":"Snapshot pcs1.cam7","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.pcs1_cam7_camera","data":"{\"filename\":\"/config/www/pcs1_cam7.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":500,"y":360,"wires":[["4f37124a1bb6b24d"]]},{"id":"4f37124a1bb6b24d","type":"file in","z":"ab1036a4c01aab80","name":"load image","filename":"/config/www/pcs1_cam7.jpg","filenameType":"str","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":690,"y":360,"wires":[["9cd59682cb6e706a"]]},{"id":"339e9f949a87e978","type":"function","z":"ab1036a4c01aab80","name":"help Message","func":"var message = \n`\n*You requested an unknown camera*\n\nPlease use one of the following commands\\\\:\n\n/help\n/pic\\\\_pcs1\\\\_cam1\n/pic\\\\_pcs1\\\\_cam2\n/pic\\\\_pcs1\\\\_cam3\n/pic\\\\_pcs1\\\\_cam4\n/pic\\\\_pcs1\\\\_cam5\n/pic\\\\_pcs1\\\\_cam6\n/pic\\\\_pcs1\\\\_cam7\n/pic\\\\_pcs1\\\\_all\n/pic\\\\_all\n`;\n\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":580,"wires":[[]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"f98ff7bd174079fc","type":"function","z":"ab1036a4c01aab80","name":"send picture","func":"var pl = {\n  content: msg.payload,\n  caption: `Picture: pcs1_cam2`,\n  type: 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.originalMessage.chat,\n  from: msg.originalMessage.from,\n  message_id: msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":160,"wires":[[]]},{"id":"2e52f87077047aa1","type":"function","z":"ab1036a4c01aab80","name":"send picture","func":"var pl = {\n  content: msg.payload,\n  caption: `Picture: pcs1_cam3`,\n  type: 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.originalMessage.chat,\n  from: msg.originalMessage.from,\n  message_id: msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":200,"wires":[[]]},{"id":"bab8f70489938717","type":"function","z":"ab1036a4c01aab80","name":"send picture","func":"var pl = {\n  content: msg.payload,\n  caption: `Picture: pcs1_cam4`,\n  type: 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.originalMessage.chat,\n  from: msg.originalMessage.from,\n  message_id: msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":240,"wires":[[]]},{"id":"399aec1c9bc888a5","type":"function","z":"ab1036a4c01aab80","name":"send picture","func":"var pl = {\n  content: msg.payload,\n  caption: `Picture: pcs1_cam5`,\n  type: 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.originalMessage.chat,\n  from: msg.originalMessage.from,\n  message_id: msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":280,"wires":[[]]},{"id":"3d50fa9f3089425e","type":"function","z":"ab1036a4c01aab80","name":"send picture","func":"var pl = {\n  content: msg.payload,\n  caption: `Picture: pcs1_cam6`,\n  type: 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.originalMessage.chat,\n  from: msg.originalMessage.from,\n  message_id: msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":320,"wires":[[]]},{"id":"9cd59682cb6e706a","type":"function","z":"ab1036a4c01aab80","name":"send picture","func":"var pl = {\n  content: msg.payload,\n  caption: `Picture: pcs1_cam7`,\n  type: 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.originalMessage.chat,\n  from: msg.originalMessage.from,\n  message_id: msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":360,"wires":[[]]},{"id":"3f7ee72a99f31698","type":"function","z":"ab1036a4c01aab80","name":"send picture","func":"var pl = {\n  content: msg.payload,\n  caption: `Picture: pcs1_cam8`,\n  type: 'photo',\n  chatId: msg.originalMessage.chat.id,\n  chat: msg.originalMessage.chat,\n  from: msg.originalMessage.from,\n  message_id: msg.originalMessage.message_id\n}\n\nmsg.payload = pl;\n\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":520,"wires":[[]]},{"id":"4c69704eea8fe93b","type":"comment","z":"ab1036a4c01aab80","name":"Camera Configuration","info":"","x":140,"y":40,"wires":[]},{"id":"a9d35b21f14734cc","type":"comment","z":"48c607f195e854e0","name":"Sensor Data Configuration","info":"","x":190,"y":80,"wires":[]},{"id":"3de2061006ed4f14","type":"function","z":"48c607f195e854e0","name":"send message","func":"var message = msg.sensor_values;\nmsg.payload = msg.telegram_message;\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview: true,\n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1720,"y":1840,"wires":[[]]},{"id":"9646d923.432558","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_growth_chamber_average_humidity","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_growth_chamber_average_humidity","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_growth_chamber_average_humidity","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":880,"y":1220,"wires":[["d92bf2f0.d578"]]},{"id":"d92bf2f0.d578","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_growth_chamber_average_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_growth_chamber_average_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_growth_chamber_average_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":890,"y":1280,"wires":[["ec9f0147.f77b2"]]},{"id":"ec9f0147.f77b2","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_growth_chamber_average_illuminance","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_growth_chamber_average_illuminance","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_growth_chamber_average_illuminance","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":890,"y":1340,"wires":[["cf2310f2b0f381a8"]]},{"id":"67634f6c.20eb7","type":"template","z":"48c607f195e854e0","name":"format it","field":"sensor_values","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*__Plant Control System 1 \\- Sensor Data__*\n\n*Power Consumption*\nEnergy total\\: {{pcs1_main_energy}} kWh\nPower total\\: {{pcs1_main_power}} W\n\n*Amperage*\nKinematics\\: {{pcs1_kin_current}} A\nLED1 Hall A\\: {{pcs1_led1_hall_a_current}} A\nLED1 Hall B\\: {{pcs1_led1_hall_b_current}} A\nLED2 Hall A\\: {{pcs1_led2_hall_a_current}} A\nLED2 Hall B\\: {{pcs1_led2_hall_b_current}} A\nLED3 Hall A\\: {{pcs1_led3_hall_a_current}} A\nLED4 Hall A\\: {{pcs1_led4_hall_a_current}} A\n\n*Outside*\nTemperature\\: {{pcs1_outside_average_temperature}} °C\n\n*Electronics Chamber*\nTemperature\\: {{pcs1_pwm_dallas_1_temperature}} °C\nTemperature Power Adapter\\: {{pcs1_pwm_dallas_24_36v_case_temperature}} °C\nTemperature Kinematics Controller\\: {{pcs1_kin_dallas_4_temperature}} °C\n\n*LED Panel*\nTemperature 40mm Fans\\: {{pcs1_led_panel_fan_140mm_average_temperature}} °C\nTemperature 80mm Fans\\: {{pcs1_led_panel_fan_80mm_average_temperature}} °C\nTemperature average\\: {{pcs1_led_panel_average_temperature}} °C\nTemperature max\\: {{pcs1_led_panel_average_max_temperature}} °C\n\n*Growth Chamber*\nTemperature\\: {{pcs1_growth_chamber_average_humidity}} °C\nHumidity\\: {{pcs1_growth_chamber_average_temperature}} \\%\nIlluminance\\: {{pcs1_growth_chamber_average_illuminance}} lx\nIlluminance max\\: {{pcs1_growth_chamber_average_max_illuminance}} lx\n\n*Water tank*\nTemperature\\: {{pcs1_as_rtd}} °C\nPH\\-Value\\: {{pcs1_as_ph}}\nConductivity\\: {{pcs1_as_ec}} μS\\/cm\n\n*Kinematics*\nGlobal angle\\: {{pcs1_kin_stepper_angle}}\nPlant gear angle\\: {{pcs1_kin_stepper_plant_gear_rotation_angle}}\nNumber of cycles\\: {{pcs1_kin_stepper_number_of_cycles}}","output":"str","x":1360,"y":1840,"wires":[["cb25d7b6dbc922e1"]]},{"id":"cb25d7b6dbc922e1","type":"function","z":"48c607f195e854e0","name":"function 1","func":"var message = msg.sensor_values;\nmessage = msg.sensor_values.replace(/\\./g, \"\\\\.\");\nmsg.sensor_values = message;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1540,"y":1840,"wires":[["3de2061006ed4f14"]]},{"id":"cf2310f2b0f381a8","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_growth_chamber_average_max_illuminance","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_growth_chamber_average_max_illuminance","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_growth_chamber_average_max_illuminance","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":910,"y":1400,"wires":[["6057264122077205"]]},{"id":"7122fd1877cce70f","type":"comment","z":"48c607f195e854e0","name":"Outside","info":"","x":770,"y":660,"wires":[]},{"id":"aa0f51068fc28f49","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_outside_average_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_outside_average_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_outside_average_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":870,"y":700,"wires":[["399220f5203c7980"]]},{"id":"d7faf1aad28a5a28","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led_panel_fan_140mm_average_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led_panel_fan_140mm_average_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led_panel_fan_140mm_average_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":910,"y":980,"wires":[["255793e369b1496b"]]},{"id":"255793e369b1496b","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led_panel_fan_80mm_average_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led_panel_fan_80mm_average_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led_panel_fan_80mm_average_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":910,"y":1020,"wires":[["3496d20f98c41ee1"]]},{"id":"3496d20f98c41ee1","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led_panel_average_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led_panel_average_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led_panel_average_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":870,"y":1060,"wires":[["24c7e77758c470cc"]]},{"id":"24c7e77758c470cc","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led_panel_average_max_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led_panel_average_max_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led_panel_average_max_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":890,"y":1100,"wires":[["9646d923.432558"]]},{"id":"84e59437bcbfc08b","type":"comment","z":"48c607f195e854e0","name":"Electronics Chamber","info":"","x":810,"y":760,"wires":[]},{"id":"b56ee3cce268f94d","type":"comment","z":"48c607f195e854e0","name":"LED Panel","info":"","x":780,"y":940,"wires":[]},{"id":"399220f5203c7980","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_pwm_dallas_1_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_pwm_dallas_1_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pwm_dallas_1_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":860,"y":800,"wires":[["26b148d692a72133"]]},{"id":"26b148d692a72133","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_pwm_dallas_24_36v_case_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_pwm_dallas_24_36v_case_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pwm_dallas_24_36v_case_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":900,"y":840,"wires":[["5bf6b1d4e81ad3a8"]]},{"id":"5bf6b1d4e81ad3a8","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_kin_dallas_4_temperature","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_dallas_4_temperature","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_dallas_4_temperature","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":850,"y":880,"wires":[["d7faf1aad28a5a28"]]},{"id":"a0c7954da404e8c3","type":"comment","z":"48c607f195e854e0","name":"Growth Chamber","info":"","x":800,"y":1180,"wires":[]},{"id":"c471f0888cca8c0e","type":"comment","z":"48c607f195e854e0","name":"Sensor Data","info":"","x":790,"y":20,"wires":[]},{"id":"5c05af0a8a4570f0","type":"comment","z":"48c607f195e854e0","name":"Water Tank","info":"","x":790,"y":1480,"wires":[]},{"id":"6057264122077205","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_as_ec","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_as_ec","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_as_ec","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":790,"y":1520,"wires":[["975782d5a74649db"]]},{"id":"975782d5a74649db","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_as_rtd","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_as_rtd","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_as_rtd","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":790,"y":1560,"wires":[["05ff8c81ee0f47ac"]]},{"id":"05ff8c81ee0f47ac","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_as_ph","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_as_ph","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_as_ph","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":790,"y":1600,"wires":[["891006cd7ac7ba8f"]]},{"id":"018890c568724ccb","type":"switch","z":"48c607f195e854e0","name":"Choose pcs","property":"originalMessage.text","propertyType":"msg","rules":[{"t":"eq","v":"/sensor_pcs1","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":160,"wires":[["3ceae830466940eb"],["d191939ade03b663"]]},{"id":"d191939ade03b663","type":"function","z":"48c607f195e854e0","name":"help Message","func":"var message = \n`\n*You requested an unknown pcs*\n\nPlease use one of the following commands\\\\:\n\n/help\n/sensor\\\\_pcs1\n`;\n\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":1900,"wires":[[]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"43d37a1d62b4af3b","type":"comment","z":"48c607f195e854e0","name":"Kinematics","info":"","x":780,"y":1660,"wires":[]},{"id":"891006cd7ac7ba8f","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_kin_stepper_angle","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_stepper_angle","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_angle","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":830,"y":1700,"wires":[["b40e4fc8f3b12f56"]]},{"id":"b40e4fc8f3b12f56","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_kin_stepper_plant_gear_rotation_angle","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_stepper_plant_gear_rotation_angle","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_plant_gear_rotation_angle","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":900,"y":1760,"wires":[["b50b677a321f8d6d"]]},{"id":"b50b677a321f8d6d","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_kin_stepper_number_of_cycles","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_stepper_number_of_cycles","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_number_of_cycles","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":870,"y":1820,"wires":[["67634f6c.20eb7"]]},{"id":"9b0a8bb86f86125b","type":"comment","z":"48c607f195e854e0","name":"Power Consumption","info":"","x":810,"y":60,"wires":[]},{"id":"3ceae830466940eb","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_main_energy","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_main_energy","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_main_energy","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":810,"y":100,"wires":[["fdca3086bda2f08a"]]},{"id":"fdca3086bda2f08a","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_main_power","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_main_power","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_main_power","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":810,"y":140,"wires":[["e4fea31dda5643c3"]]},{"id":"e4fea31dda5643c3","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_kin_current","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_current","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_current","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":810,"y":200,"wires":[["b5b40872f9c4ce09"]]},{"id":"b5b40872f9c4ce09","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led1_hall_a_current","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led1_hall_a_current","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_hall_a_current","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":840,"y":240,"wires":[["68550ecd816985ae"]]},{"id":"68550ecd816985ae","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led1_hall_b_current","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led1_hall_b_current","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_hall_b_current","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":840,"y":280,"wires":[["525bdf6494cf68fd"]]},{"id":"525bdf6494cf68fd","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led2_hall_a_current","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led2_hall_a_current","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_hall_a_current","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":840,"y":320,"wires":[["01169e331fa405f6"]]},{"id":"01169e331fa405f6","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led2_hall_b_current","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led2_hall_b_current","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_hall_b_current","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":840,"y":360,"wires":[["454b25b6b299e89f"]]},{"id":"454b25b6b299e89f","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led3_hall_a_current","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led3_hall_a_current","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led3_hall_a_current","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":840,"y":400,"wires":[["389b969f6860a24a"]]},{"id":"389b969f6860a24a","type":"api-current-state","z":"48c607f195e854e0","name":"pcs1_led4_hall_a_current","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_led4_hall_a_current","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led4_hall_a_current","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":840,"y":440,"wires":[["aa0f51068fc28f49"]]},{"id":"72a8df5fb02f3ea0","type":"comment","z":"b23737722e71b01c","name":"System Status Configuration","info":"","x":220,"y":40,"wires":[]},{"id":"f8c87ef3aa821af7","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_as_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_as_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_as_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":940,"y":140,"wires":[["7afd7503bf8ca145"]]},{"id":"e5275f00efd0cfaf","type":"function","z":"b23737722e71b01c","name":"send message","func":"var message = msg.sensor_values;\nmsg.payload = msg.telegram_message;\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview: true,\n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2820,"y":1120,"wires":[[]]},{"id":"881a86438872492c","type":"template","z":"b23737722e71b01c","name":"format it","field":"sensor_values","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*__Plant Control System 1 \\- LED Controller status__*\n*PWM*\na\\_1\\_white\\: {{pcs1_pwm_cc_a_1_white}}\na\\_2\\_white\\: {{pcs1_pwm_cc_a_2_white}}\na\\_3\\_520nm\\: {{pcs1_pwm_cc_a_3_520nm}}\na\\_4\\_fan\\: {{pcs1_pwm_cc_a_4_fan}}\n\n*LED1*\na\\_1\\_730nm\\: {{pcs1_led1_cc_a_1_730nm}}\na\\_2\\_730nm\\: {{pcs1_led1_cc_a_2_730nm}}\na\\_3\\_730nm\\: {{pcs1_led1_cc_a_3_730nm}}\na\\_4\\_730nm\\: {{pcs1_led1_cc_a_4_730nm}}\nb\\_1\\_660nm\\: {{pcs1_led1_cc_b_1_660nm}}\nb\\_2\\_660nm\\: {{pcs1_led1_cc_b_2_660nm}}\nb\\_3\\_660nm\\: {{pcs1_led1_cc_b_3_660nm}}\nb\\_4\\_660nm\\: {{pcs1_led1_cc_b_4_660nm}}\n\n*LED2*\na\\_1\\_630nm\\: {{pcs1_led2_cc_a_1_630nm}}\na\\_2\\_630nm\\: {{pcs1_led2_cc_a_2_630nm}}\na\\_3\\_630nm\\: {{pcs1_led2_cc_a_3_630nm}}\na\\_4\\_630nm\\: {{pcs1_led2_cc_a_4_630nm}}\nb\\_1\\_630nm\\: {{pcs1_led2_cc_b_1_630nm}}\nb\\_2\\_630nm\\: {{pcs1_led2_cc_b_2_630nm}}\nb\\_3\\_630nm\\: {{pcs1_led2_cc_b_3_630nm}}\nb\\_4\\_630nm\\: {{pcs1_led2_cc_b_4_630nm}}\n\n*LED3*\na\\_1\\_butterfly\\: {{pcs1_led3_cc_a_1_butterfly}}\na\\_2\\_butterfly\\: {{pcs1_led3_cc_a_2_butterfly}}\na\\_3\\_butterfly\\: {{pcs1_led3_cc_a_3_butterfly}}\na\\_4\\_butterfly\\: {{pcs1_led3_cc_a_4_butterfly}}\n\n*LED4*\na\\_1\\_450nm:\\ {{pcs1_led4_cc_a_1_450nm}}\na\\_2\\_450nm:\\ {{pcs1_led4_cc_a_2_450nm}}\na\\_3\\_450nm:\\ {{pcs1_led4_cc_a_3_450nm}}\na\\_4\\_450nm:\\ {{pcs1_led4_cc_a_4_450nm}}","output":"str","x":2500,"y":820,"wires":[["152a4222d2bce967"]]},{"id":"152a4222d2bce967","type":"function","z":"b23737722e71b01c","name":"function 3","func":"var message = msg.sensor_values;\nmessage = msg.sensor_values.replace(/\\./g, \"\\\\.\");\nmsg.sensor_values = message;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2620,"y":1120,"wires":[["e5275f00efd0cfaf"]]},{"id":"b74175a2fa057431","type":"comment","z":"b23737722e71b01c","name":"ESP32 Controller Status","info":"","x":950,"y":40,"wires":[]},{"id":"7afd7503bf8ca145","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_cam1_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_cam1_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_cam1_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":180,"wires":[["e045093fefc93dca"]]},{"id":"e045093fefc93dca","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_cam2_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_cam2_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_cam2_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":240,"wires":[["7c01163c6a83e849"]]},{"id":"7c01163c6a83e849","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_cam3_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_cam3_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_cam3_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":300,"wires":[["a00ad433ee1ea283"]]},{"id":"a00ad433ee1ea283","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_cam4_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_cam4_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_cam4_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":360,"wires":[["0a5d0c5da909c688"]]},{"id":"0a5d0c5da909c688","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_cam5_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_cam5_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_cam5_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":420,"wires":[["c8702b07db1d3c3e"]]},{"id":"c8702b07db1d3c3e","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_cam6_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_cam6_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_cam6_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":480,"wires":[["2b36ea13537740e5"]]},{"id":"2b36ea13537740e5","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_cam7_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_cam7_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_cam7_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":540,"wires":[["b77f22f93f10cb1e"]]},{"id":"b77f22f93f10cb1e","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_kin_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_kin_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":940,"y":600,"wires":[["b22beb6f05c3a661"]]},{"id":"b22beb6f05c3a661","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_led1_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":660,"wires":[["44ddf8c700f40ee8"]]},{"id":"44ddf8c700f40ee8","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_led2_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":720,"wires":[["14aec7576e8539c0"]]},{"id":"14aec7576e8539c0","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led3_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_led3_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led3_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":780,"wires":[["9c230bbff29ce4ea"]]},{"id":"9c230bbff29ce4ea","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led4_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_led4_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led4_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":840,"wires":[["5d0afa210f0be3f0"]]},{"id":"5d0afa210f0be3f0","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_pwm_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_pwm_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pwm_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":900,"wires":[["4ef2e39e2cd33dc6"]]},{"id":"4ef2e39e2cd33dc6","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_pump_status","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_pump_status","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pump_status","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":950,"y":960,"wires":[["f02d8f9b8988ab78"]]},{"id":"153873dda9f64306","type":"comment","z":"b23737722e71b01c","name":"Kinematics","info":"","x":1180,"y":40,"wires":[]},{"id":"5811ea34ca5ee164","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_kin_stepper_enable_motor","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.pcs1_kin_stepper_enable_motor","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_enable_motor","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1260,"y":100,"wires":[["7c3ba36551a36228"]]},{"id":"7c3ba36551a36228","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_kin_stepper_active","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_kin_stepper_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_active","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1250,"y":160,"wires":[["f1998a10e4cdc169"]]},{"id":"f1998a10e4cdc169","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_kin_stepper_homing_is_valid","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.pcs1_kin_stepper_homing_is_valid","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_homing_is_valid","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1280,"y":240,"wires":[["52c4b87b77859cda"]]},{"id":"52c4b87b77859cda","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_kin_stepper_error_code","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_stepper_error_code","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_error_code","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1250,"y":320,"wires":[["0499d1bca1436586"]]},{"id":"0499d1bca1436586","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_kin_stepper_mode","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_stepper_mode","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_mode","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1230,"y":380,"wires":[["83561b399977f5a6"]]},{"id":"83561b399977f5a6","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_kin_stepper_automation_mode","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_stepper_automation_mode","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_kin_stepper_automation_mode","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1290,"y":440,"wires":[["c69a392ae851be7f"]]},{"id":"769f129cb07ace1f","type":"comment","z":"b23737722e71b01c","name":"Pump","info":"","x":1550,"y":40,"wires":[]},{"id":"50bc2749f483f63e","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_pump_enable","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.pcs1_pump_enable","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pump_enable","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1580,"y":100,"wires":[["b2fc09ef13bfd14e"]]},{"id":"b2fc09ef13bfd14e","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_pump_automation","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.pcs1_pump_automation","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pump_automation","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1590,"y":160,"wires":[["36aaaf2d060a1438"]]},{"id":"ab1ccc685c069072","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_pwm_cc_a_1_white","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_pwm_cc_a_1_white","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pwm_cc_a_1_white","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1870,"y":140,"wires":[["5a010915a6be5c46"]]},{"id":"a8c1d151c79ea68e","type":"comment","z":"b23737722e71b01c","name":"LED","info":"","x":1810,"y":40,"wires":[]},{"id":"5a010915a6be5c46","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_pwm_cc_a_2_white","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_pwm_cc_a_2_white","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pwm_cc_a_2_white","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1870,"y":200,"wires":[["6a3c27c258c14fab"]]},{"id":"6a3c27c258c14fab","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_pwm_cc_a_3_520nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_pwm_cc_a_3_520nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pwm_cc_a_3_520nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":260,"wires":[["29cad3a1d6e9a4b3"]]},{"id":"2f0af38a67194f50","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_pwm_cc_a_4_fan","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"fan.pcs1_pwm_cc_a_4_fan","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_pwm_cc_a_4_fan","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1870,"y":80,"wires":[["ab1ccc685c069072"]]},{"id":"29cad3a1d6e9a4b3","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_cc_a_1_730nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led1_cc_a_1_730nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_cc_a_1_730nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":340,"wires":[["d634c4df28bf5f75"]]},{"id":"d634c4df28bf5f75","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_cc_a_2_730nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led1_cc_a_2_730nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_cc_a_2_730nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":400,"wires":[["6b2f6fde979c017c"]]},{"id":"6b2f6fde979c017c","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_cc_a_3_730nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led1_cc_a_3_730nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_cc_a_3_730nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":460,"wires":[["a76abff7869e15e8"]]},{"id":"a76abff7869e15e8","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_cc_a_4_730nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led1_cc_a_4_730nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_cc_a_4_730nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":520,"wires":[["37d1583516db21b9"]]},{"id":"37d1583516db21b9","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_cc_b_1_660nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led1_cc_b_1_660nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_cc_b_1_660nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":580,"wires":[["80afbb36b25b1015"]]},{"id":"80afbb36b25b1015","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_cc_b_2_660nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led1_cc_b_2_660nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_cc_b_2_660nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":640,"wires":[["7a1595c531c6e47b"]]},{"id":"7a1595c531c6e47b","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_cc_b_3_660nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led1_cc_b_3_660nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_cc_b_3_660nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":700,"wires":[["2e297c6f5a5d9691"]]},{"id":"2e297c6f5a5d9691","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led1_cc_b_4_660nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led1_cc_b_4_660nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led1_cc_b_4_660nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1880,"y":760,"wires":[["ca13e84c7c7e6acb"]]},{"id":"15c51c2042b7ed22","type":"switch","z":"b23737722e71b01c","name":"Choose Info","property":"originalMessage.text","propertyType":"msg","rules":[{"t":"eq","v":"/status_pcs1_controller","vt":"str"},{"t":"eq","v":"/status_pcs1_kinematics","vt":"str"},{"t":"eq","v":"/status_pcs1_pump","vt":"str"},{"t":"eq","v":"/status_pcs1_led","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":5,"x":370,"y":100,"wires":[["8c04d4bd8e0a32f6"],["5811ea34ca5ee164"],["50bc2749f483f63e"],["2f0af38a67194f50"],["875d78b4cd8d2901"]]},{"id":"f02d8f9b8988ab78","type":"template","z":"b23737722e71b01c","name":"format it","field":"sensor_values","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*__Plant Control System 1 \\- Device Information__*\n\nMain Power Supply\\: {{pcs1_main}}\nAtlas Scientific\\: {{pcs1_as_status}}\nCam 1\\: {{pcs1_cam1_status}}\nCam 2\\: {{pcs1_cam2_status}}\nCam 3\\: {{pcs1_cam3_status}}\nCam 4\\: {{pcs1_cam4_status}}\nCam 5\\: {{pcs1_cam5_status}}\nCam 6\\: {{pcs1_cam6_status}}\nCam 7\\: {{pcs1_cam7_status}}\nKinematics\\: {{pcs1_kin_status}}\nLED 1\\: {{pcs1_led1_status}}\nLED 2\\: {{pcs1_led2_status}}\nLED 3\\: {{pcs1_led3_status}}\nLED 4\\: {{pcs1_led4_status}}\nPWM\\: {{pcs1_pwm_status}}\nPump\\: {{pcs1_pump_status}}","output":"str","x":920,"y":1040,"wires":[["152a4222d2bce967"]]},{"id":"875d78b4cd8d2901","type":"function","z":"b23737722e71b01c","name":"help Message","func":"var message = \n`\n*Choose one of the following options\\\\:*\n\n/help\n/status\\\\_pcs1\\\\_controller\n/status\\\\_pcs1\\\\_kinematics\n/status\\\\_pcs1\\\\_pump\n/status\\\\_pcs1\\\\_led\n`;\n\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":900,"y":1240,"wires":[["ebcd808e34d04051"]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"c69a392ae851be7f","type":"template","z":"b23737722e71b01c","name":"format it","field":"sensor_values","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*__Plant Control System 1 \\- Kinematics status__*\n\nMotor enabled\\: {{pcs1_kin_stepper_enable_motor}}\nMotor active\\: {{pcs1_kin_stepper_active}}\nHoming is valied\\: {{pcs1_kin_stepper_homing_is_valid}}\nError code\\: {{pcs1_kin_stepper_error_code}}\nMode\\: {{pcs1_kin_stepper_mode}}\nAutomation mode\\: {{pcs1_kin_stepper_automation_mode}}\n","output":"str","x":1220,"y":920,"wires":[["152a4222d2bce967"]]},{"id":"36aaaf2d060a1438","type":"template","z":"b23737722e71b01c","name":"format it","field":"sensor_values","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*__Plant Control System 1 \\- Pump status__*\n\nPump enabled\\: {{pcs1_pump_enable}}\nPump Automation active\\: {{pcs1_pump_automation}}","output":"str","x":1540,"y":760,"wires":[["152a4222d2bce967"]]},{"id":"ca13e84c7c7e6acb","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_cc_a_1_630nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led2_cc_a_1_630nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_cc_a_1_630nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":80,"wires":[["ebae3f762fce07e9"]]},{"id":"ebae3f762fce07e9","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_cc_a_2_630nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led2_cc_a_2_630nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_cc_a_2_630nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":140,"wires":[["70018be6955d4a0d"]]},{"id":"70018be6955d4a0d","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_cc_a_3_630nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led2_cc_a_3_630nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_cc_a_3_630nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":200,"wires":[["12d548e1fa0a35eb"]]},{"id":"12d548e1fa0a35eb","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_cc_a_4_630nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led2_cc_a_4_630nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_cc_a_4_630nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":260,"wires":[["6e570d116e1fe2ba"]]},{"id":"6e570d116e1fe2ba","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_cc_b_1_630nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led2_cc_b_1_630nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_cc_b_1_630nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":320,"wires":[["100b329fc481e9d4"]]},{"id":"100b329fc481e9d4","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_cc_b_2_630nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led2_cc_b_2_630nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_cc_b_2_630nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":380,"wires":[["d195ab37cf907380"]]},{"id":"d195ab37cf907380","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_cc_b_3_630nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led2_cc_b_3_630nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_cc_b_3_630nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":440,"wires":[["2e5001988676f900"]]},{"id":"2e5001988676f900","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led2_cc_b_4_630nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led2_cc_b_4_630nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led2_cc_b_4_630nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":500,"wires":[["c3b001e391db2fec"]]},{"id":"c3b001e391db2fec","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led3_cc_a_1_butterfly","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led3_cc_a_1_butterfly","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led3_cc_a_1_butterfly","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":580,"wires":[["42db4b1bdc50b07d"]]},{"id":"42db4b1bdc50b07d","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led3_cc_a_2_butterfly","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led3_cc_a_2_butterfly","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led3_cc_a_2_butterfly","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":640,"wires":[["5f9bfb665d7d17a7"]]},{"id":"5f9bfb665d7d17a7","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led3_cc_a_3_butterfly","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led3_cc_a_3_butterfly","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led3_cc_a_3_butterfly","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":700,"wires":[["ad5419a574c412bf"]]},{"id":"ad5419a574c412bf","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led3_cc_a_4_butterfly","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led3_cc_a_4_butterfly","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led3_cc_a_4_butterfly","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2180,"y":760,"wires":[["02a6f6b02c2698ac"]]},{"id":"02a6f6b02c2698ac","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led4_cc_a_1_450nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led4_cc_a_1_450nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led4_cc_a_1_450nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2500,"y":80,"wires":[["c7c24817f954fae3"]]},{"id":"c7c24817f954fae3","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led4_cc_a_2_450nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led4_cc_a_2_450nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led4_cc_a_2_450nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2500,"y":140,"wires":[["4f057f6525ecfb1a"]]},{"id":"4f057f6525ecfb1a","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led4_cc_a_3_450nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led4_cc_a_3_450nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led4_cc_a_3_450nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2500,"y":200,"wires":[["f45306ad8cb4f88b"]]},{"id":"f45306ad8cb4f88b","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_led4_cc_a_4_450nm","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"light.pcs1_led4_cc_a_4_450nm","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_led4_cc_a_4_450nm","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":2500,"y":260,"wires":[["881a86438872492c"]]},{"id":"6d684a72239c0dab","type":"template","z":"b23737722e71b01c","name":"format it","field":"sensor_values","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*__Plant Control System 1 \\- Node status__*\n\nMain Power Controller\\: {{pcs1_main}}\nAtlas Scientific\\: {{pcs1_as_status}}\nCam 1\\: {{pcs1_cam1_status}}\nCam 2\\: {{pcs1_cam2_status}}\nCam 3\\: {{pcs1_cam3_status}}\nCam 4\\: {{pcs1_cam4_status}}\nCam 5\\: {{pcs1_cam5_status}}\nCam 6\\: {{pcs1_cam6_status}}\nCam 7\\: {{pcs1_cam7_status}}\nKinematics\\: {{pcs1_kin_status}}\nLED 1\\: {{pcs1_led1_status}}\nLED 2\\: {{pcs1_led2_status}}\nLED 3\\: {{pcs1_led3_status}}\nLED 4\\: {{pcs1_led4_status}}\nPWM\\: {{pcs1_pwm_status}}\nPump\\: {{pcs1_pump_status}}","output":"str","x":920,"y":1140,"wires":[["152a4222d2bce967"]]},{"id":"8c04d4bd8e0a32f6","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_main","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.pcs1_main","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_main","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":930,"y":80,"wires":[["f8c87ef3aa821af7"]]},{"id":"ebcd808e34d04051","type":"api-current-state","z":"b23737722e71b01c","name":"pcs1_main","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.pcs1_main","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_main","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":1110,"y":1240,"wires":[["aaaddc516de66bf6"]]},{"id":"aaaddc516de66bf6","type":"template","z":"b23737722e71b01c","name":"format it","field":"sensor_values","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*__Plant Control System status__*\nHome Assistant\\: running\nMain Power Supply PCS1\\: {{pcs1_main}} \n\n*more status information\\:*\n/help\n/status\\_pcs1\\_controller\n/status\\_pcs1\\_kinematics\n/status\\_pcs1\\_pump\n/status\\_pcs1\\_led\n\n","output":"str","x":1280,"y":1240,"wires":[["ec849a4fdf9ebba6"]]},{"id":"ec849a4fdf9ebba6","type":"function","z":"b23737722e71b01c","name":"escapes","func":"var message = msg.sensor_values;\nmessage = msg.sensor_values.replace(/\\./g, \"\\\\.\");\nmsg.sensor_values = message;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1460,"y":1240,"wires":[["5ce807b09bcd0106"]]},{"id":"5ce807b09bcd0106","type":"function","z":"b23737722e71b01c","name":"send message","func":"var message = msg.sensor_values;\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview: true,\n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1660,"y":1240,"wires":[[]]},{"id":"4611608905aa7003","type":"switch","z":"9e7ca1741a410453","name":"Choose Node","property":"originalMessage.text","propertyType":"msg","rules":[{"t":"eq","v":"/restart_pcs1_main","vt":"str"},{"t":"eq","v":"/restart_pcs1_as","vt":"str"},{"t":"eq","v":"/restart_pcs1_cam1","vt":"str"},{"t":"eq","v":"/restart_pcs1_cam2","vt":"str"},{"t":"eq","v":"/restart_pcs1_cam3","vt":"str"},{"t":"eq","v":"/restart_pcs1_cam4","vt":"str"},{"t":"eq","v":"/restart pcs1_cam5","vt":"str"},{"t":"eq","v":"/restart_pcs1_cam6","vt":"str"},{"t":"eq","v":"/restart_pcs1_cam7","vt":"str"},{"t":"eq","v":"/restart_pcs1_kin","vt":"str"},{"t":"eq","v":"/restart_pcs1_led1","vt":"str"},{"t":"eq","v":"/restart_pcs1_led2","vt":"str"},{"t":"eq","v":"/restart_pcs1_led3","vt":"str"},{"t":"eq","v":"/restart_pcs1_led4","vt":"str"},{"t":"eq","v":"/restart_pcs1_pwm","vt":"str"},{"t":"eq","v":"/restart_pcs1_pump","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":17,"x":260,"y":200,"wires":[["2fcaf9799534b1d7"],["63198af7d6e9f922"],["5d1428569352a6a2"],["8cedf61717a61053"],["ceb33822dab89e99"],["d839b769a5aed58b"],["46032d37bce9325e"],["2d5f7be417f45550"],["66564d475fa51178"],["d69ee6732612dba9"],["83f4f5769bdda618"],["8a7fdda2df849baf"],["be0ec3d81bd6fd5c"],["5ed0d6831505bf67"],["41423d8bd0a419e7"],["eb6c6024d3ae47bc"],["a0b78b93d8cee4bb"]]},{"id":"fa077b5ba0aa76da","type":"comment","z":"9e7ca1741a410453","name":"Reboot","info":"","x":90,"y":40,"wires":[]},{"id":"5d1428569352a6a2","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_cam1_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_cam1_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":160,"wires":[["9870875b85e30781"]]},{"id":"8cedf61717a61053","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_cam2_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_cam2_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":220,"wires":[["9870875b85e30781"]]},{"id":"ceb33822dab89e99","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_cam3_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_cam3_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":280,"wires":[["9870875b85e30781"]]},{"id":"d839b769a5aed58b","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_cam4_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_cam4_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":340,"wires":[["9870875b85e30781"]]},{"id":"46032d37bce9325e","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_cam5_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_cam5_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":400,"wires":[["9870875b85e30781"]]},{"id":"2d5f7be417f45550","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_cam6_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_cam6_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":460,"wires":[["9870875b85e30781"]]},{"id":"66564d475fa51178","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_cam7_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_cam7_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":520,"wires":[["9870875b85e30781"]]},{"id":"a0b78b93d8cee4bb","type":"function","z":"9e7ca1741a410453","name":"help Message","func":"var message = \n`\n*You requested an unknown pcs*\n\nPlease use one of the following commands\\\\:\n\n/help\n/restart\\\\_pcs1\\\\_main\n/restart\\\\_pcs1\\\\_as\n/restart\\\\_pcs1\\\\_cam1\n/restart\\\\_pcs1\\\\_cam2\n/restart\\\\_pcs1\\\\_cam3\n/restart\\\\_pcs1\\\\_cam4\n/restart\\\\_pcs1\\\\_cam5\n/restart\\\\_pcs1\\\\_cam6\n/restart\\\\_pcs1\\\\_cam7\n/restart\\\\_pcs1\\\\_kin\n/restart\\\\_pcs1\\\\_led1\n/restart\\\\_pcs1\\\\_led2\n/restart\\\\_pcs1\\\\_led3\n/restart\\\\_pcs1\\\\_led4\n/restart\\\\_pcs1\\\\_pwm\n/restart\\\\_pcs1\\\\_pump\n`;\n\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":1060,"wires":[[]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"63198af7d6e9f922","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_as_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_as_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":100,"wires":[["9870875b85e30781"]]},{"id":"d69ee6732612dba9","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_kin_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_kin_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":580,"wires":[["9870875b85e30781"]]},{"id":"83f4f5769bdda618","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_led1_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_led1_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":640,"wires":[["9870875b85e30781"]]},{"id":"8a7fdda2df849baf","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_led2_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_led2_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":700,"wires":[["9870875b85e30781"]]},{"id":"be0ec3d81bd6fd5c","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_led3_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_led3_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":760,"wires":[["9870875b85e30781"]]},{"id":"5ed0d6831505bf67","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_led4_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_led4_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":820,"wires":[["9870875b85e30781"]]},{"id":"eb6c6024d3ae47bc","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_pump_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_pump_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":940,"wires":[["9870875b85e30781"]]},{"id":"41423d8bd0a419e7","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_pwm_restart","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_pwm_restart","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":880,"wires":[["9870875b85e30781"]]},{"id":"9870875b85e30781","type":"function","z":"9e7ca1741a410453","name":"restarting message","func":"var message = \n`\nRestarting node\n`;\n\nmsg.payload = msg.telegram_message;\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1080,"y":160,"wires":[[]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"2fcaf9799534b1d7","type":"api-call-service","z":"9e7ca1741a410453","name":"pcs1_main","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.pcs1_main_reboot","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":670,"y":40,"wires":[["9870875b85e30781"]]},{"id":"922a8d6a1d97d0ef","type":"switch","z":"ca65c1dbac21ab41","name":"Choose Node","property":"originalMessage.text","propertyType":"msg","rules":[{"t":"eq","v":"/power_pcs1_on","vt":"str"},{"t":"eq","v":"/power_pcs1_off","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":240,"y":200,"wires":[["2c7e4612f0474c19"],["5f424f059ad6c9f6"],["78872f6d664a1dc4"]]},{"id":"78872f6d664a1dc4","type":"function","z":"ca65c1dbac21ab41","name":"help Message","func":"var message = \n`\n*You requested an unknown command*\n\nPlease use one of the following commands\\\\:\n\n/power\\\\_pcs1\\\\_on\n/power\\\\_pcs1\\\\_off\n/help\n`;\n\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":280,"wires":[[]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"2c7e4612f0474c19","type":"api-call-service","z":"ca65c1dbac21ab41","name":"PCS1 On","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"switch","service":"turn_on","entityId":"switch.pcs1_main","data":"on","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":440,"y":140,"wires":[["995a79c0d062cc28"]]},{"id":"5f424f059ad6c9f6","type":"api-call-service","z":"ca65c1dbac21ab41","name":"PCS1 Off","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"switch","service":"turn_off","entityId":"switch.pcs1_main","data":"off","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":440,"y":180,"wires":[["117dd8d8bf3522f8"]]},{"id":"995a79c0d062cc28","type":"function","z":"ca65c1dbac21ab41","name":"","func":"var message = \n`\nTurning on PCS1\n`;\n\nmsg.payload = msg.telegram_message;\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":120,"wires":[[]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"117dd8d8bf3522f8","type":"function","z":"ca65c1dbac21ab41","name":"","func":"var message = \n`\nTurning off PCS1\n`;\n\nmsg.payload = msg.telegram_message;\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":180,"wires":[[]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"84751c5bb01f818c","type":"api-current-state","z":"6c80f1ca0dd2938f","name":"plant","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_stepper_{{cam}}_plant","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant","propertyType":"msg","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":210,"y":160,"wires":[["7983922acada6878"]]},{"id":"7983922acada6878","type":"function","z":"6c80f1ca0dd2938f","name":"function 13","func":"var plant = parseInt(msg.plant, 10);\nvar plant_string = \"plant\" + plant.toString();\nmsg.plant = plant_string;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":160,"wires":[[]]},{"id":"fce9674ba66a1bd7","type":"function","z":"d2fb9f710e7a6826","name":"function 20","func":"var angle = parseFloat(msg.global_angle);\nvar result = 0;\n\nif (angle >= 0.0 &&\n          angle < 30.0)\n{\n    result = 0;\n}else if (angle >= 30.0 &&\n          angle < 90.0) \n{\n    result = 200;\n}else if (angle >= 90.0 &&\n          angle < 150.0) \n{\n    result = 40;\n}else if (angle >= 150.0 &&\n          angle < 210.0) \n{\n    result = 240;\n}else if (angle >= 210.0 &&\n          angle < 270.0) \n{\n    result = 80;\n}else if (angle >= 270.0 &&\n           angle < 330.0) \n{\n    result = 280;\n}else if (angle >= 330.0 &&\n          angle < 390.0) \n{\n    result = 120;\n}else if (angle >= 390.0 &&\n          angle < 450.0) \n{\n    result = 320;\n}else if (angle >= 450.0 &&\n          angle < 510.0) \n{\n    result = 160;\n} else if (angle >= 510.0 &&\n           angle < 570.0) \n{\n    result = 0;\n}\nelse if (angle >= 570.0 &&\n    angle < 630.0) {\n    result = 200;\n} else if (angle >= 630.0 &&\n    angle < 690.0) {\n    result = 40;\n} else if (angle >= 690.0 &&\n    angle < 750.0) {\n    result = 240;\n} else if (angle >= 750.0 &&\n    angle < 810.0) {\n    result = 80;\n} else if (angle >= 810.0 &&\n    angle < 870.0) {\n    result = 280;\n} else if (angle >= 870.0 &&\n    angle < 930.0) {\n    result = 120;\n} else if (angle >= 930.0 &&\n    angle < 990.0) {\n    result = 320;\n} else if (angle >= 990.0 &&\n    angle < 1050.0) {\n    result = 160;\n} else if (angle >= 1050.0 &&\n    angle < 1080.0) {\n    result = 0;\n}\n\nvar result_string = \"angle\" + result.toString();\n\nmsg.angle = result_string;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":810,"y":40,"wires":[["3070e3c89ed7402b"]]},{"id":"5237d65b65725854","type":"api-current-state","z":"d2fb9f710e7a6826","name":"global_angle","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_stepper_angle","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"global_angle","propertyType":"msg","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":40,"wires":[["ee1d13637150e409"]]},{"id":"3070e3c89ed7402b","type":"function","z":"d2fb9f710e7a6826","name":"function 21","func":"var global_angle = parseInt(msg.global_angle, 10);\nvar global_angle_string = \"globalAngle\" + global_angle.toString();\nmsg.global_angle = global_angle_string;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":40,"wires":[[]]},{"id":"ee1d13637150e409","type":"api-current-state","z":"d2fb9f710e7a6826","name":"plant_gear_angle","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.pcs1_kin_stepper_plant_gear_rotation_angle","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_gear_angle","propertyType":"msg","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":610,"y":40,"wires":[["fce9674ba66a1bd7"]]},{"id":"886628d2be68f0a7","type":"change","z":"4e99185239cf91b2","name":"path","rules":[{"t":"set","p":"path","pt":"msg","to":"/config/www/photos/","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":140,"wires":[[]]},{"id":"73568eaefee8249e","type":"api-current-state","z":"3ce6ca2f6197961a","name":"homing_valid?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.{{pcs}}_kin_stepper_homing_is_valid","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":240,"y":160,"wires":[["fdb455407f39d736"]]},{"id":"fdb455407f39d736","type":"switch","z":"3ce6ca2f6197961a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":160,"wires":[[],[]]},{"id":"19c37ec56a0b6d94","type":"switch","z":"d8b948f39935830f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":510,"y":60,"wires":[[],[]]},{"id":"c26543d53a9d3aaf","type":"api-current-state","z":"d8b948f39935830f","name":"motor_enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.{{pcs}}_kin_stepper_enable_motor","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":310,"y":60,"wires":[["19c37ec56a0b6d94"]]},{"id":"781da8795bb615f9","type":"api-current-state","z":"fd625c48e8c8ae90","name":"automation_main_active?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_main_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":230,"y":120,"wires":[["e91504ef7f6314bd"]]},{"id":"e91504ef7f6314bd","type":"switch","z":"fd625c48e8c8ae90","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":120,"wires":[[],[]]},{"id":"882565c3c6febbca","type":"api-current-state","z":"53bd181b0b773e57","name":"","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_stepper_mode","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"stepper_mode","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":360,"y":260,"wires":[["a932fbf80bfd95fe","88807011f51d9ec0"]]},{"id":"88807011f51d9ec0","type":"switch","z":"53bd181b0b773e57","name":"","property":"stepper_mode","propertyType":"msg","rules":[{"t":"eq","v":"0.0","vt":"str"},{"t":"eq","v":"1.0","vt":"str"},{"t":"eq","v":"2.0","vt":"str"},{"t":"eq","v":"3.0","vt":"str"},{"t":"eq","v":"10.0","vt":"str"},{"t":"eq","v":"11.0","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":870,"y":260,"wires":[[],[],[],[],[],[],[]]},{"id":"a932fbf80bfd95fe","type":"function","z":"53bd181b0b773e57","d":true,"name":"function 24","func":"var stepper_mode = parseInt(msg.stepper_mode, 10);\nmsg.stepper_mode = stepper_mode;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":690,"y":340,"wires":[["88807011f51d9ec0"]]},{"id":"88b036a8fe3db20f","type":"switch","z":"2d3973ed11ae3dc8","name":"pcs_number","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"pcs1","vt":"str"},{"t":"cont","v":"pcs2","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":330,"y":100,"wires":[["e14c14ab4bdfd14d"],["ee57bbb2778ce146"]]},{"id":"e14c14ab4bdfd14d","type":"change","z":"2d3973ed11ae3dc8","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":60,"wires":[[]]},{"id":"ee57bbb2778ce146","type":"change","z":"2d3973ed11ae3dc8","name":"pcs2","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":140,"wires":[[]]},{"id":"4188f9afebc687af","type":"api-current-state","z":"60792d08bd7f197a","name":"automation_kinematics_active","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_kinematics_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":390,"y":120,"wires":[["e6f58aca0f6eda21"]]},{"id":"e6f58aca0f6eda21","type":"switch","z":"60792d08bd7f197a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"eq","v":"off","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":140,"wires":[[],[]]},{"id":"317f2e2d7f56552a","type":"api-current-state","z":"214e5ec186f9b89b","name":"","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_stepper_mode","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":200,"wires":[["4aa83709dad5694c"]]},{"id":"4aa83709dad5694c","type":"switch","z":"214e5ec186f9b89b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"2","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":710,"y":200,"wires":[[],[]]},{"id":"e5f8e1f5b3813e67","type":"switch","z":"564c0776b24ee8cb","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":390,"y":120,"wires":[[],[]]},{"id":"2aa62311bc7126dc","type":"api-current-state","z":"564c0776b24ee8cb","name":"maintenance_mode?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":220,"y":120,"wires":[["e5f8e1f5b3813e67"]]},{"id":"627d1a455e5f15fa","type":"api-current-state","z":"502d9caae1f74190","name":"kin_stepper_start_automation","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.{{pcs}}_kin_stepper_start_automation","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":410,"y":140,"wires":[["7d7f607e55f62188"]]},{"id":"7d7f607e55f62188","type":"switch","z":"502d9caae1f74190","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":650,"y":140,"wires":[[],[]]},{"id":"1d3cb6856191dcb7","type":"api-current-state","z":"01e96d9e32906378","name":"global_angle","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_stepper_angle","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"global_angle","propertyType":"msg","value":"","valueType":"entityState"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":270,"y":140,"wires":[["0ceae42ef2210660"]]},{"id":"0ceae42ef2210660","type":"function","z":"01e96d9e32906378","name":"camera_position","func":"var angle = parseFloat(msg.global_angle);\nvar result = false;\n\nif (angle >= 59.0 &&\n    angle < 61.0) {\n    result = true;\n} else if (angle >= 119.0 &&\n    angle <= 121.0) {\n    result = true;\n} else if (angle >= 179.0 &&\n    angle <= 181.0) {\n    result = true;\n} else if (angle >= 239.0 &&\n    angle <= 241.0) {\n    result = true;\n} else if (angle >= 299.0 &&\n    angle <= 301.0) {\n    result = true;\n} else if (angle >= 359.0 &&\n    angle <= 361.0) {\n    result = true;\n} else if (angle >= 419.0 &&\n    angle <= 421.0) {\n    result = true;\n} else if (angle >= 479.0 &&\n    angle <= 481.0) {\n    result = true;\n} else if (angle >= 539.0 &&\n    angle <= 541.0) {\n    result = true;\n} else if (angle >= 599.0 &&\n    angle <= 601) {\n    result = 0;\n}\nelse if (angle >= 659.0 &&\n    angle <= 661.0) {\n    result = true;\n} else if (angle >= 719.0 &&\n    angle <= 721.0) {\n    result = true;\n} else if (angle >= 779.0 &&\n    angle <= 781.0) {\n    result = true;\n} else if (angle >= 839.0 &&\n    angle <= 841.0) {\n    result = true;\n} else if (angle >= 899.0 &&\n    angle <= 901.0) {\n    result = true;\n} else if (angle >= 959.0 &&\n    angle <= 961.0) {\n    result = true;\n} else if (angle >= 1019.0 &&\n    angle <= 1021.0) {\n    result = true;\n} else if (angle >= 1079.0 &&\n    angle <= 1080.0) {\n    result = true;\n} else if (angle >= 0.0 &&\n    angle <= 1.0) {\n    result = true;\n} else\n{\n    result = false;\n}\n\nmsg.camera_position = result;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":140,"wires":[["496782f254f96c97"]]},{"id":"496782f254f96c97","type":"function","z":"01e96d9e32906378","name":"number_of_turns","func":"var angle = parseFloat(msg.global_angle);\nvar result = false;\n\nif (angle >= 0.0 &&\n    angle < 360) {\n    result = 1;\n} else if (angle >= 360.0 &&\n    angle < 720.0) {\n    result = 2;\n} else if (angle >= 720.0 &&\n    angle <= 1080.0) {\n    result = 3;\n} else{\n    result = 0;\n}\nmsg.number_of_turns = result;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":140,"wires":[["b35a0db0090b2484"]]},{"id":"b35a0db0090b2484","type":"function","z":"01e96d9e32906378","name":"local_homing_position","func":"var angle = parseFloat(msg.global_angle);\nvar result = false;\nvar global_position = false;\n\nif (angle >= 359.0 &&\n    angle <= 361.0) {\n    result = true;\n} else if (angle >= 719.0 &&\n    angle <= 721.0) {\n    result = true;\n} else if (angle >= 1079.0 &&\n    angle <= 1080.0) {\n    result = true;\n    global_position = true;\n} else if (angle >= 0.0 &&\n    angle <= 1.0)\n{\n    result = true;\n    global_position = true;\n} else{\n    result = false;\n}\nmsg.local_homing_position = result;\nmsg.global_homing_position = global_position;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":140,"wires":[[]]},{"id":"11eab4e996d21a25","type":"subflow:6c80f1ca0dd2938f","z":"69b5998777ae11cf","name":"","x":420,"y":200,"wires":[["cfe2f9d0dfe3b6c9"]]},{"id":"cfe2f9d0dfe3b6c9","type":"subflow:d2fb9f710e7a6826","z":"69b5998777ae11cf","name":"","x":590,"y":200,"wires":[["2ffbcecb6e53fb32"]]},{"id":"2ffbcecb6e53fb32","type":"api-call-service","z":"69b5998777ae11cf","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":800,"y":200,"wires":[[]]},{"id":"b3dae0b521d9265c","type":"switch","z":"6b9686a43efc2793","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":220,"wires":[[],[]]},{"id":"e6f520ae7555c911","type":"api-current-state","z":"6b9686a43efc2793","name":"pictures_taken","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_pictures_taken","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":350,"y":220,"wires":[["b3dae0b521d9265c"]]},{"id":"ca0aca31e811167c","type":"change","z":"54b6f9cfdd13e029","name":"cam1","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":140,"wires":[["e73fda957c8d6cdd"]]},{"id":"54cf516bac3340ad","type":"change","z":"54b6f9cfdd13e029","name":"cam2","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":200,"wires":[["3c0e06f4ca35403b"]]},{"id":"19ccb2b7b12ae491","type":"change","z":"54b6f9cfdd13e029","name":"cam3","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":260,"wires":[["0917aa8390cc825a"]]},{"id":"e9b92f978b4be118","type":"change","z":"54b6f9cfdd13e029","name":"cam4","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":320,"wires":[["2bf6948021ba1ac5"]]},{"id":"10bbf718f15a5882","type":"change","z":"54b6f9cfdd13e029","name":"cam5","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":380,"wires":[["ace03f7e8794d349"]]},{"id":"de31565992241e45","type":"change","z":"54b6f9cfdd13e029","name":"cam6","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":440,"wires":[["4f8eff31150842a8"]]},{"id":"81e79b44ae3ece1e","type":"change","z":"54b6f9cfdd13e029","name":"cam7","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":500,"wires":[["a8f1d9421a50effb"]]},{"id":"cf33043123a63790","type":"subflow:d2fb9f710e7a6826","z":"54b6f9cfdd13e029","name":"","x":1150,"y":500,"wires":[["a923fc5169e1a311"]]},{"id":"5cafc15835fbbbaa","type":"subflow:6c80f1ca0dd2938f","z":"54b6f9cfdd13e029","name":"","x":1140,"y":140,"wires":[["790ec955e815cf6f"]]},{"id":"e8bda6a7d51eae67","type":"subflow:d2fb9f710e7a6826","z":"54b6f9cfdd13e029","name":"","x":1690,"y":140,"wires":[["df0741d411e3a66d"]]},{"id":"e1db1ba6b67710c2","type":"api-call-service","z":"54b6f9cfdd13e029","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2100,"y":140,"wires":[[]]},{"id":"8076a63f53f4ee18","type":"subflow:6c80f1ca0dd2938f","z":"54b6f9cfdd13e029","name":"","x":1140,"y":200,"wires":[["b2b98659787a23d9"]]},{"id":"943182528d37a4a3","type":"subflow:d2fb9f710e7a6826","z":"54b6f9cfdd13e029","name":"","x":1690,"y":200,"wires":[["341922c128ad01e2"]]},{"id":"ed9c29ad9c84bba9","type":"api-call-service","z":"54b6f9cfdd13e029","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2100,"y":200,"wires":[[]]},{"id":"61d0ff775cab7e7b","type":"subflow:6c80f1ca0dd2938f","z":"54b6f9cfdd13e029","name":"","x":1140,"y":260,"wires":[["be514668fb2b0595"]]},{"id":"946660acdfdcabd9","type":"subflow:d2fb9f710e7a6826","z":"54b6f9cfdd13e029","name":"","x":1690,"y":260,"wires":[["4cd280eaaaa9eb95"]]},{"id":"f24cbeba425a3566","type":"api-call-service","z":"54b6f9cfdd13e029","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2100,"y":260,"wires":[[]]},{"id":"72e4b2cb23f50518","type":"subflow:6c80f1ca0dd2938f","z":"54b6f9cfdd13e029","name":"","x":1140,"y":320,"wires":[["1fda0e8c6f8c5261"]]},{"id":"413dd2ad29ce25f7","type":"subflow:d2fb9f710e7a6826","z":"54b6f9cfdd13e029","name":"","x":1690,"y":320,"wires":[["4a9b33c797b119cd"]]},{"id":"bfc7c2e0207a8020","type":"api-call-service","z":"54b6f9cfdd13e029","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2100,"y":320,"wires":[[]]},{"id":"31a1d832f73d30b8","type":"subflow:6c80f1ca0dd2938f","z":"54b6f9cfdd13e029","name":"","x":1140,"y":380,"wires":[["f2068a2fb117ae0e"]]},{"id":"e158394ab41423b1","type":"subflow:d2fb9f710e7a6826","z":"54b6f9cfdd13e029","name":"","x":1690,"y":380,"wires":[["690f571dbc1ab453"]]},{"id":"bd4526ae7d95f053","type":"api-call-service","z":"54b6f9cfdd13e029","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2100,"y":380,"wires":[[]]},{"id":"046419adf8415427","type":"subflow:6c80f1ca0dd2938f","z":"54b6f9cfdd13e029","name":"","x":1140,"y":440,"wires":[["8d92ae606e92bc8a"]]},{"id":"2f7c47b58fde4bf9","type":"subflow:d2fb9f710e7a6826","z":"54b6f9cfdd13e029","name":"","x":1690,"y":440,"wires":[["69622816018e3860"]]},{"id":"f1ed0dcfeb8f8149","type":"api-call-service","z":"54b6f9cfdd13e029","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":true,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2100,"y":440,"wires":[[]]},{"id":"a923fc5169e1a311","type":"api-call-service","z":"54b6f9cfdd13e029","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & global_angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2100,"y":500,"wires":[[]]},{"id":"72d4e7f32a5712b1","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"cameras_enabled","propertyType":"msg","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":390,"y":280,"wires":[["ca0aca31e811167c","54cf516bac3340ad","19ccb2b7b12ae491","e9b92f978b4be118","10bbf718f15a5882","de31565992241e45","81e79b44ae3ece1e"],["24cbb38264c025b7"]]},{"id":"24cbb38264c025b7","type":"api-call-service","z":"54b6f9cfdd13e029","name":"Notification","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"persistent_notification","service":"create","entityId":"","data":"{\"title\":\"Info\",\"message\":\"The Cameras are disabled.\"}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":750,"y":560,"wires":[[]]},{"id":"e73fda957c8d6cdd","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":140,"wires":[["7d4c525b8fbdb846"]]},{"id":"7d4c525b8fbdb846","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":140,"wires":[["5cafc15835fbbbaa"]]},{"id":"3c0e06f4ca35403b","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":200,"wires":[["725e7a9ace45f2ae"]]},{"id":"725e7a9ace45f2ae","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":200,"wires":[["8076a63f53f4ee18"]]},{"id":"0917aa8390cc825a","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":260,"wires":[["51a3a1f6c7e423dc"]]},{"id":"51a3a1f6c7e423dc","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":260,"wires":[["61d0ff775cab7e7b"]]},{"id":"2bf6948021ba1ac5","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":320,"wires":[["c47a25be904d7f8d"]]},{"id":"c47a25be904d7f8d","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":320,"wires":[["72e4b2cb23f50518"]]},{"id":"ace03f7e8794d349","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":380,"wires":[["0bef25e3809b472d"]]},{"id":"0bef25e3809b472d","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":380,"wires":[["31a1d832f73d30b8"]]},{"id":"4f8eff31150842a8","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":440,"wires":[["a137ba30f935ef25"]]},{"id":"a137ba30f935ef25","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":440,"wires":[["046419adf8415427"]]},{"id":"a8f1d9421a50effb","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":860,"y":500,"wires":[["93314ebcac89aab6"]]},{"id":"93314ebcac89aab6","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":500,"wires":[["cf33043123a63790"]]},{"id":"790ec955e815cf6f","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1300,"y":140,"wires":[["dd1f155c369b81c1"]]},{"id":"dd1f155c369b81c1","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1490,"y":140,"wires":[["e8bda6a7d51eae67"]]},{"id":"b2b98659787a23d9","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1300,"y":200,"wires":[["02b341c17f6468ba"]]},{"id":"02b341c17f6468ba","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1490,"y":200,"wires":[["943182528d37a4a3"]]},{"id":"be514668fb2b0595","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1300,"y":260,"wires":[["830bf08f2a228741"]]},{"id":"830bf08f2a228741","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1490,"y":260,"wires":[["946660acdfdcabd9"]]},{"id":"1fda0e8c6f8c5261","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1300,"y":320,"wires":[["6e7f2d896d3374f7"]]},{"id":"6e7f2d896d3374f7","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1490,"y":320,"wires":[["413dd2ad29ce25f7"]]},{"id":"f2068a2fb117ae0e","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1300,"y":380,"wires":[["2bdebb3c6b7eb1a2"]]},{"id":"2bdebb3c6b7eb1a2","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1490,"y":380,"wires":[["e158394ab41423b1"]]},{"id":"8d92ae606e92bc8a","type":"api-current-state","z":"54b6f9cfdd13e029","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1300,"y":440,"wires":[["c9855763c4f21b5d"]]},{"id":"c9855763c4f21b5d","type":"switch","z":"54b6f9cfdd13e029","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1490,"y":440,"wires":[["2f7c47b58fde4bf9"]]},{"id":"df0741d411e3a66d","type":"api-current-state","z":"54b6f9cfdd13e029","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1870,"y":140,"wires":[["e1db1ba6b67710c2"]]},{"id":"341922c128ad01e2","type":"api-current-state","z":"54b6f9cfdd13e029","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1870,"y":200,"wires":[["ed9c29ad9c84bba9"]]},{"id":"4cd280eaaaa9eb95","type":"api-current-state","z":"54b6f9cfdd13e029","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1870,"y":260,"wires":[["f24cbeba425a3566"]]},{"id":"4a9b33c797b119cd","type":"api-current-state","z":"54b6f9cfdd13e029","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1870,"y":320,"wires":[["bfc7c2e0207a8020"]]},{"id":"690f571dbc1ab453","type":"api-current-state","z":"54b6f9cfdd13e029","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1870,"y":380,"wires":[["bd4526ae7d95f053"]]},{"id":"69622816018e3860","type":"api-current-state","z":"54b6f9cfdd13e029","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1870,"y":440,"wires":[["f1ed0dcfeb8f8149"]]},{"id":"04a8cf8f8cf79072","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"Schalte Pumpe ein","info":"","x":2410,"y":360,"wires":[]},{"id":"c842e32bd9335f8b","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"lade aktuellen Versuchspfad /  fügr text aus Dashboar din pfad ein","info":"","x":2870,"y":560,"wires":[]},{"id":"8dfa1d6c21941144","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"admin mode","info":"","x":3430,"y":500,"wires":[]},{"id":"ff45781464598a95","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"telegram bot","info":"","x":3430,"y":460,"wires":[]},{"id":"16d314750215e554","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"Watchdog","info":"","x":3020,"y":260,"wires":[]},{"id":"a03d265efa3a0ed4","type":"smxstate","z":"4d69908ddcfaac9c","g":"5238f08ee293f6d0","name":"statemachine_pcs1","xstateDefinition":"// @ts-nocheck\n// Available variables/objects/functions:\n// xstate\n// - .Machine\n// - .interpret\n// - .assign\n// - .send\n// - .sendParent\n// - .spawn\n// - .raise\n// - .actions\n//\n// Common\n// - setInterval, setTimeout, clearInterval, clearTimeout\n// - node.send, node.warn, node.log, node.error\n// - context.get, context.set\n// - flow.get, flow.set\n// - env.get\n// - util\n\nconst pcs = \"pcs1\";\nconst { assign } = xstate;\nconst {Maschine} = pcs;\n\n\n/***************************\n * Main machine definition * \n ***************************/\nreturn {\n    machine: {\n        id: pcs,\n        context: {\n            power: false,\n            maintenance: true,\n            automation: false,\n            automation_camera: false,\n            automation_kinematics: false,\n            automation_led: false,\n            automation_pump: false,\n            automation_daynight: false,\n            automation_daylight: false,\n            automation_daystartend: false,\n            kinematics_motor_enabled: false,\n            kinematics_homing_valid: false,\n            kinematics_stepper_mode: 0,\n            kinematics_homing_started: false,\n            kinematics_homing_timeout_counter: 0,\n            kinematics_stepper_automation: true,\n            kinematics_stepper_automation_timeout_counter: 0,\n            camera_sequence_timeout_counter: 0,\n            request_timeout_counter: 0,\n            request_timeout_retries: 10,\n            kinematics_pinionwheel_increased_counter: 0,\n            kinematics_pinionwheel_decreased_counter: 0,\n            kinematics_pinionwheel_max_missed_counts: 180,\n            kinematics_stepper_automation_delay_night_state: -1,\n            kinematics_stepper_automation_delay_day_state: '-1',\n\n            led_camera_mode: false,\n            led_test_mode: false,\n        },\n        initial: 'main',\n        states: {\n            main: {\n                type: 'parallel',\n                on: {\n                    POWER_ON: {\n                        actions: [assign({ power: true })],\n                    },\n                    POWER_OFF: {\n                        actions: [assign({ power: false })],\n                    },\n                    MAINTENANCE_ON: {\n                        actions: [assign({ maintenance: true })],\n                    },\n                    MAINTENANCE_OFF: {\n                        actions: [assign({ maintenance: false })],\n                    },\n                    AUTOMATION_ON: {\n                        actions: [assign({ automation: true })],\n                    },\n                    AUTOMATION_OFF: {\n                        actions: [assign({ automation: false })],\n                    },\n                },\n                states: {\n                    kinematics: {\n                        initial: 'init',\n                        on: {\n                            KINEMATICS_ON: {\n                                actions: [assign({ automation_kinematics: true })],\n                            },\n                            KINEMATICS_OFF: {\n                                actions: [assign({ automation_kinematics: false })],\n                            },\n                            KINEMATICS_MOTOR_ENABLED_ON: {\n                                actions: [assign({ kinematics_motor_enabled: true })],\n                            },\n                            KINEMATICS_MOTOR_ENABLED_OFF: {\n                                actions: [assign({ kinematics_motor_enabled: false })],\n                            },\n                            CAMERA_ON: {\n                                actions: [assign({ automation_camera: true })],\n                            },\n                            CAMERA_OFF: {\n                                actions: [assign({ automation_camera: false })],\n                            },\n                        },\n                        states: {\n                            init: {\n                                after: {\n                                    1500: { target: 'check_states' }\n                                },\n                            },\n\n                            check_states: {\n                                entry: [\n                                    'getMaintenanceState', \n                                    'getAutomationState', \n                                    'getKinematicsState', \n                                    'getKinematicsMotorState', \n                                    'getPowerState'],\n                                after: {\n                                    1000: { target: 'check_states' }\n                                },\n                                always: [\n                                    { target: 'running', cond: (context, event) => (\n                                            !context.maintenance && \n                                            context.automation && \n                                            context.automation_kinematics && \n                                            context.kinematics_motor_enabled && \n                                            context.power) == true },\n                                ],\n                            },\n\n                            running: {\n                                initial: 'init',\n                                on: {\n                                    POWER_OFF: {\n                                        actions: [assign({ power: false })],\n                                        target: 'check_states'\n                                    },\n                                    MAINTENANCE_ON: {\n                                        actions: [\n                                            assign({ maintenance: true }), \n                                            'callKinematicsStopMotor'\n                                            ],\n                                        target: 'check_states'\n                                    },\n                                    AUTOMATION_OFF: {\n                                        actions: [\n                                            assign({ automation: false }), \n                                            'callKinematicsStopMotor'\n                                            ],\n                                        target: 'check_states'\n                                    },\n                                    KINEMATICS_OFF: {\n                                        actions: [\n                                            assign({ automation_kinematics: false }), \n                                            'callKinematicsStopMotor'\n                                            ],\n                                        target: 'check_states'\n                                    },\n                                    KINEMATICS_MOTOR_ENABLED_OFF: {\n                                        actions: [\n                                            assign({ kinematics_motor_enabled: false }),\n                                            'callKinematicsStopMotor'\n                                            ],\n                                        target: 'check_states'\n                                    },\n                                },\n                                states: {\n                                    init: {\n                                        always: [\n                                            { target: 'check_homing_valid'},\n                                        ],\n                                        onExit: ['callKinematicsStopMotor'], \n                                    },\n\n                                    check_homing_valid: {\n                                        entry: ['getKinematicsHomingValidState'],\n                                        after: {\n                                            1000: { target: 'check_homing_valid' }\n                                        },\n                                        on: {\n                                            KINEMATICS_HOMING_VALID_ON: {\n                                                actions: [assign({ kinematics_homing_valid: true })],\n                                                target: 'init_automation'\n                                            },\n                                            KINEMATICS_HOMING_VALID_OFF: {\n                                                actions: [assign({ kinematics_homing_valid: false })],\n                                                target: 'init_global_homing'\n                                            },\n                                        },\n                                    },\n\n                                    init_global_homing: {\n                                        entry: [\n                                            'callKinematicsGlobalHoming', \n                                            assign({ kinematics_homing_timeout_counter: 0 })\n                                            ],\n                                        always: [\n                                            { target: 'check_global_homing_finished' },\n                                        ],\n                                    },\n\n                                    check_global_homing_finished: {\n                                        entry: ['getKinematicsHomingValidState'],\n                                        after: {\n                                            1000: { target: 'check_global_homing_finished' }\n                                        },\n                                        on: {\n                                            KINEMATICS_HOMING_VALID_ON: {\n                                                actions: [assign({ kinematics_homing_valid: true })],\n                                                target: 'init_automation'\n                                            },\n                                        },\n                                        always: [\n                                            { target: 'init', \n                                              cond: (context, event) => (context.kinematics_homing_timeout_counter > 7200), \n                                              actions: ['sendErrorHoming']\n                                            }\n                                        ],\n                                        onExit: {action: [ assign({ kinematics_homing_timeout_counter: (context, event) => context.kinematics_homing_timeout_counter + 1 })]}\n                                    },\n\n                                    init_automation: {\n                                        entry: [assign({ kinematics_stepper_automation_timeout_counter: 0 })],\n                                        after: {\n                                            200: { target: 'check_automation_running' }\n                                        },\n                                        onExit: [assign({ kinematics_stepper_automation_delay_state: 0 })],\n                                    },\n\n                        \n                                    check_automation_running: {\n                                        entry: ['getKinematicsStepperAutomationState'],\n                                        after: {\n                                            1000: { target: 'check_automation_running' }\n                                        },\n                                        on: {\n                                            KINEMATICS_STEPPER_AUTOMATION_OFF: {\n                                                actions: [\n                                                    assign({ kinematics_stepper_automation: false }),\n                                                    assign({ request_timeout_counter: 0 })\n                                                ],\n                                                target: 'check_daytime'\n                                            },\n                                        },\n                                        always: [\n                                           {\n                                               target: 'init',\n                                               cond: (context, event) => (context.kinematics_stepper_automation_timeout_counter > 1500),\n                                               actions: ['sendErrorAutomation']\n                                           },\n                                        ],\n                                        onExit: { action: [assign({ kinematics_stepper_automation_timeout_counter: (context, event) => context.kinematics_stepper_automation_timeout_counter + 1 })] }\n                                    },\n                                    \n                                    check_daytime: {\n                                        entry: ['getDaytimeDayState'],\n                                        after: {\n                                            1000: { target: 'check_daytime' }\n                                        },\n                                        on: {\n                                            DAYTIME_DAY_ON: {\n                                                target: 'init_camera'\n                                            },\n                                            DAYTIME_DAY_OFF: {\n                                                target: 'init_local_homing'\n                                            },\n                                        },\n                                        onExit: {\n                                            action: [assign({ kinematics_stepper_automation_delay_night_state: (context, event) => -1 }),\n                                            assign({ kinematics_stepper_automation_delay_day_state: (context, event) => '-1' })]\n                                        }\n                                    },\n\n                                    //automation_delay_night: {\n                                    //    entry: ['getKinematicsAutomationDelayNightState'],\n                                    //    on: {\n                                    //        KINEMATICS_AUTOMATION_DELAY_NIGHT_0: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_night_state: 0 })],\n                                    //        },\n                                    //        KINEMATICS_AUTOMATION_DELAY_NIGHT_1: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_night_state: 1 })],\n                                    //        },\n                                    //        KINEMATICS_AUTOMATION_DELAY_NIGHT_5: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_night_state: 5 })],\n                                    //        },\n                                    //        KINEMATICS_AUTOMATION_DELAY_NIGHT_10: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_night_state: 10 })],\n                                    //        },\n                                    //        KINEMATICS_AUTOMATION_DELAY_NIGHT_20: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_night_state: 20 })],\n                                    //        },\n//\n                                    //    },\n                                    //    after: {\n                                    //        1000: [\n                                    //            {\n                                    //                target: 'automation_delay_night',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_night_state < 0)\n                                    //            },\n                                    //        ],\n                                    //        // 1 min Delay\n                                    //        500: [\n                                    //            {\n                                    //                target: 'init_local_homing',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_night_state == 0)\n                                    //            },\n                                    //        ],\n                                    //        // 1 min Delay\n                                    //        60000: [\n                                    //            {\n                                    //                target: 'init_local_homing',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_night_state == 1)\n                                    //            },\n                                    //        ],\n                                    //        // 5 min Delay\n                                    //        300000: [\n                                    //            {\n                                    //                target: 'init_local_homing',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_night_state == 5)\n                                    //            },\n                                    //        ],\n                                    //        // 10 min Delay\n                                    //        600000: [\n                                    //            {\n                                    //                target: 'init_local_homing',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_night_state == 10)\n                                    //            },\n                                    //        ],\n                                    //        // 20 min Delay\n                                    //        1200000: [\n                                    //            {\n                                    //                target: 'init_local_homing',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_night_state == 20)\n                                    //            },\n                                    //        ],\n                                    //    }\n                                    //},\n//\n                                    //automation_delay_day: {\n                                    //    entry: ['getKinematicsAutomationDelayDayState'],\n                                    //    on: {\n                                    //        KINEMATICS_AUTOMATION_DELAY_DAY_0: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_day_state: '0' })],\n                                    //        },\n                                    //        KINEMATICS_AUTOMATION_DELAY_DAY_1: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_day_state: '1' })],\n                                    //        },\n                                    //        KINEMATICS_AUTOMATION_DELAY_DAY_5: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_day_state: '5' })],\n                                    //        },\n                                    //        KINEMATICS_AUTOMATION_DELAY_DAY_10: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_day_state: '10' })],\n                                    //        },\n                                    //        KINEMATICS_AUTOMATION_DELAY_DAY_20: {\n                                    //            actions: [assign({ kinematics_stepper_automation_delay_day_state: '20' })],\n                                    //        },\n//\n                                    //    },\n                                    //    after: {\n                                    //        2000: [\n                                    //            {\n                                    //                target: 'automation_delay_day',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_day_state == '-1')\n                                    //            },\n                                    //        ],\n                                    //        // 0 min Delay\n                                    //        500: [\n                                    //            {\n                                    //                target: 'init_camera',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_day_state == '0')\n                                    //            },\n                                    //        ],\n                                    //        // 1 min Delay\n                                    //        60000: [\n                                    //            {\n                                    //                target: 'init_camera',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_day_state == '1')\n                                    //            },\n                                    //        ],\n                                    //        // 5 min Delay\n                                    //        300000: [\n                                    //            {\n                                    //                target: 'init_camera',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_day_state == '5')\n                                    //            },\n                                    //        ],\n                                    //        // 10 min Delay\n                                    //        600000: [\n                                    //            {\n                                    //                target: 'init_camera',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_day_state == '10')\n                                    //            },\n                                    //        ],\n                                    //        // 20 min Delay\n                                    //        1200000: [\n                                    //            {\n                                    //                target: 'init_camera',\n                                    //                cond: (context, event) => (context.kinematics_stepper_automation_delay_day_state == '20')\n                                    //            },\n                                    //        ],\n                                    //        // 21 min Delay\n                                    //        1206000: [\n                                    //            {\n                                    //                target: 'init_camera'\n                                    //            },\n                                    //        ],\n                                    //    }\n                                    //},\n\n                                    init_camera: {\n                                        always: {\n                                            target: 'check_camera_automation_active'\n                                        }\n                                    },\n\n                                    check_camera_automation_active: {\n                                        entry: ['getCameraState'],\n                                        after: {\n                                            1000: { target: 'check_camera_automation_active' }\n                                        },\n                                        on: {\n                                            CAMERA_ON: {\n                                                target: 'check_camera_position'\n                                            },\n                                            CAMERA_OFF: {\n                                                target: 'init_local_homing'\n                                            },\n                                        },\n                                    },\n\n                                    check_camera_position: {\n                                        entry: ['getKinematicsPositionState'],\n                                        after: {\n                                            1000: { target: 'check_camera_position' }\n                                        },\n                                        on: {\n                                            KINEMATICS_CAMERA_POSITION_ON: {\n                                                target: 'init_camera_sequence'\n                                            },\n                                            KINEMATICS_CAMERA_POSITION_OFF: {\n                                                target: 'init_local_homing'\n                                            },\n                                        },\n                                        always: [\n                                            {\n                                                target: 'init',\n                                                cond: (context, event) => (context.request_timeout_counter > context.request_timeout_retries),\n                                                actions: ['sendErrorTimeout']\n                                            },\n                                        ],\n                                        onExit: { action: [assign({ request_timeout_counter: (context, event) => context.request_timeout_counter + 1 })] }\n                                    },\n\n                                    init_camera_sequence: {\n                                        entry: [\n                                            assign({ camera_sequence_timeout_counter: 0 }),\n                                            ],\n                                        always: {\n                                            target: 'camera_sequence_delay'\n                                        },\n                                        onExit: ['callCameraSequence']\n                                    },\n\n                                    camera_sequence_delay: {\n                                        after: {\n                                            5000: { target: 'camera_sequence' }\n                                        },\n                                    },\n\n                                    camera_sequence: {\n                                        entry: ['getCameraSequenceState'],\n                                        on: {\n                                            CAMERA_SEQUENCE_OFF: {\n                                                target: 'init_local_homing'\n                                            }\n                                        },\n                                        after: {\n                                            1000: { target: 'camera_sequence' }\n                                        },\n                                        always: [\n                                            {\n                                                target: 'init_local_homing',\n                                                cond: (context, event) => (context.camera_sequence_timeout_counter > 40)\n                                            },\n                                        ],\n                                        onExit: { action: [assign({ camera_sequence_timeout_counter: (context, event) => context.camera_sequence_timeout_counter + 1 })] }\n                                    },\n\n                                    init_local_homing: {\n                                        after: {\n                                            1000: { target: 'check_local_homing_position' }\n                                        },\n                                    },\n                                    \n                                    check_local_homing_position: {\n                                        entry: ['getKinematicsLocalHomingPositionState'],\n                                        after: {\n                                            1000: { target: 'check_local_homing_position' }\n                                        },\n                                        on: {\n                                            KINEMATICS_LOCAL_HOMING_POSITION_ON: {\n                                                target: 'drive_backward'\n                                            },\n                                            KINEMATICS_LOCAL_HOMING_POSITION_OFF: {\n                                                target: 'start_automation'\n                                            },\n                                        },\n                                    },\n\n                                   drive_backward: {\n                                       entry: [\n                                           'callKinematicsDriveBackward'\n                                       ],\n                                       after: {\n                                           30000: { target: 'start_local_homing' }\n                                       },\n                                   },\n\n                                    start_local_homing: {\n                                        entry: [\n                                            'callKinematicsLocalHoming',\n                                            assign({ kinematics_homing_timeout_counter: 0 })\n                                        ],\n                                        after: {\n                                            1000: { target: 'check_local_homing_finished' }\n                                        },\n                                    },\n\n                                    check_local_homing_finished: {\n                                        entry: ['getKinematicsStepperModeState'],\n                                        after: {\n                                            1000: { target: 'check_local_homing_finished' }\n                                        },\n                                        on: {\n                                            KINEMATICS_STEPPER_MODE_1: {\n                                                target: 'delay_before_automation',\n                                                actions: ['callKinematicsStopMotor']\n                                            },\n                                        },\n                                        always: [\n                                            {\n                                                target: 'init',\n                                                cond: (context, event) => (context.kinematics_homing_timeout_counter > 600),\n                                                actions: ['sendErrorHoming']\n                                            }\n                                        ],\n                                        onExit: { action: [assign({ kinematics_homing_timeout_counter: (context, event) => context.kinematics_homing_timeout_counter + 1 })] }\n                                    },\n\n                                    delay_before_automation: {\n                                        after: {\n                                            1000: { target: 'start_automation' }\n                                        },\n                                    },\n\n                                    start_automation: {\n                                        entry: [\n                                            'callKinematicsStartAutomation', \n                                            'getKinematicsStepperAutomationState'\n                                            ],\n                                        after: {\n                                            5000: { target: 'init_automation' }\n                                        },\n                                    },\n\n\n                                }\n                            },\n                        }\n                    },\n                    \n\n                    //led: {\n                    //    on: {\n                    //        LED_ON: {\n                    //            actions: [assign({ automation_led: true })],\n                    //        },\n                    //        LED_OFF: {\n                    //            actions: [assign({ automation_led: false })],\n                    //            target: '.check_states'\n                    //        },\n                    //        LED_CAMERA_MODE_ON: {\n                    //            actions: [\n                    //                assign({ led_camera_mode: true })\n                    //            ],\n                    //            target: '.camera_mode'\n                    //        },\n                    //        LED_CAMERA_MODE_OFF: {\n                    //            actions: [\n                    //                assign({ led_camera_mode: false })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //        MAINTENANCE_ON: {\n                    //            actions: [\n                    //                assign({ maintenance: true })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //        AUTOMATION_OFF: {\n                    //            actions: [\n                    //                assign({ automation: false })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //    },\n                    //    initial: 'init',\n                    //    states: {\n                    //        init: {\n                    //            after: {\n                    //                1500: { target: 'check_states' }\n                    //            },\n                    //        },\n//\n                    //        check_states: {\n                    //            entry: [\n                    //                'getMaintenanceState',\n                    //                'getAutomationState',\n                    //                'getPowerState',\n                    //                'getLedState'],\n                    //            after: {\n                    //                1000: { target: 'check_states' }\n                    //            },\n                    //            always: [\n                    //                {\n                    //                    target: 'running', \n                    //                    cond: (context, event) => (\n                    //                        !context.maintenance &&\n                    //                        context.automation &&\n                    //                        context.power &&\n                    //                        context.automation_led\n                    //                       == true) \n                    //                },\n                    //            ],\n                    //        },\n//\n                    //        camera_mode: {\n                    //            entry: [\n                    //                'callLedCameraMode'\n                    //            ],\n                    //            on: {\n                    //                LED_CAMERA_MODE_OFF: {\n                    //                    target: 'check_states'\n                    //                },\n                    //            },\n                    //            after: {\n                    //                30000: { target: 'check_states' }\n                    //            },\n                    //            onExit: [\n                    //                'callLedCurrentState'\n                    //            ],\n                    //        },\n//\n                    //        running: {\n                    //            entry: [\n                    //                'getDaytimeDayState'\n                    //            ],\n//\n                    //            on: {\n                    //                DAYTIME_DAY_ON: {\n                    //                    actions: ['callLedCurrentState'],\n                    //                },\n                    //                DAYTIME_DAY_OFF: {\n                    //                    actions: ['callLedAllOff'],\n                    //                },\n                    //            },\n//\n                    //            after: {\n                    //                2000: { target: 'running' }\n                    //            },\n                    //        },\n                    //    }\n                    //},\n                    \n                    //day_night_automation: {\n                    //    on: {\n                    //        DAYNIGHT_ON: {\n                    //            actions: [assign({ automation_daynight: true })],\n                    //        },\n                    //        DAYNIGHT_OFF: {\n                    //            actions: [assign({ automation_daynight: false })],\n                    //            target: '.check_states'\n                    //        },\n                    //        MAINTENANCE_ON: {\n                    //            actions: [\n                    //                assign({ maintenance: true })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //        AUTOMATION_OFF: {\n                    //            actions: [\n                    //                assign({ automation: false })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //    },\n                    //    initial: 'init',\n                    //    states: {\n                    //        init: {\n                    //            after: {\n                    //                1500: { target: 'check_states' }\n                    //            },\n                    //        },\n//\n                    //        check_states: {\n                    //            entry: ['getDaynightState',\n                    //                    'getMaintenanceState',\n                    //                    'getAutomationState',\n                    //                     ],\n                    //            after: {\n                    //                1000: { target: 'check_states' }\n                    //            },\n                    //            always: [\n                    //                {\n                    //                    target: 'running',\n                    //                    cond: (context, event) => (\n                    //                        context.automation_daynight &&\n                    //                        !context.maintenance &&\n                    //                        context.automation\n                    //                        == true)\n                    //                },\n                    //            ],\n                    //        },\n//\n                    //        running: {\n                    //            entry: [\n                    //                'callDaynightSetState'\n                    //            ],\n                    //            on: {\n                    //                DAYNIGHT_OFF: {\n                    //                    target: ['check_states'],\n                    //                },\n                    //            },\n//\n                    //            after: {\n                    //                10000: { target: 'running' }\n                    //            },\n                    //        },\n//\n                    //    }\n                    //},\n\n                    //day_light_automation: {\n                    //    on: {\n                    //        LED_ON: {\n                    //            actions: [assign({ automation_led: true })],\n                    //        },\n                    //        LED_OFF: {\n                    //            actions: [assign({ automation_led: false })],\n                    //            target: '.check_states'\n                    //        },\n                    //        DAYLIGHT_ON: {\n                    //            actions: [assign({ automation_daylight: true })],\n                    //        },\n                    //        DAYLIGHT_OFF: {\n                    //            actions: [assign({ automation_daylight: false })],\n                    //            target: '.check_states'\n                    //        },\n                    //        MAINTENANCE_ON: {\n                    //            actions: [\n                    //                assign({ maintenance: true })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //        AUTOMATION_OFF: {\n                    //            actions: [\n                    //                assign({ automation: false })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //    },\n                    //    initial: 'init',\n                    //    states: {\n                    //        init: {\n                    //            after: {\n                    //                1500: { target: 'check_states' }\n                    //            },\n                    //        },\n//\n                    //        check_states: {\n                    //            entry: ['getDaylightState',\n                    //                    'getMaintenanceState',\n                    //                    'getAutomationState',\n                    //                    'getLedState'],\n                    //            after: {\n                    //                1000: { target: 'check_states' }\n                    //            },\n                    //            always: [\n                    //                {\n                    //                    target: 'running',\n                    //                    cond: (context, event) => (\n                    //                        context.automation_daylight &&\n                    //                        !context.maintenance &&\n                    //                        context.automation &&\n                    //                        context.automation_led\n                    //                        == true)\n                    //                },\n                    //            ],\n                    //        },\n//\n                    //        running: {\n                    //            entry: [\n                    //                'callDaylightSetState'\n                    //            ],\n                    //            on: {\n                    //                DAYLIGHT_OFF: {\n                    //                    target: ['check_states'],\n                    //                },\n                    //            },\n//\n                    //            after: {\n                    //                2000: { target: 'running' }\n                    //            },\n                    //        },\n//\n                    //    }\n                    //},\n\n\n                    //daystartend_automation: {\n                    //    on: {\n                    //        DAYSTARTEND_ON: {\n                    //            actions: [assign({ automation_daystartend: true })],\n                    //        },\n                    //        DAYSTARTEND_OFF: {\n                    //            actions: [assign({ automation_daystartend: false })],\n                    //            target: '.check_states'\n                    //        },\n                    //        MAINTENANCE_ON: {\n                    //            actions: [\n                    //                assign({ maintenance: true })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //        AUTOMATION_OFF: {\n                    //            actions: [\n                    //                assign({ automation: false })\n                    //            ],\n                    //            target: '.check_states'\n                    //        },\n                    //    },\n                    //    initial: 'init',\n                    //    states: {\n                    //        init: {\n                    //            after: {\n                    //                1500: { target: 'check_states' }\n                    //            },\n                    //        },\n//\n                    //        check_states: {\n                    //            entry: [\n                    //                'getMaintenanceState',\n                    //                'getAutomationState',\n                    //                'getDaystartendState'],\n                    //            after: {\n                    //                1000: { target: 'check_states' }\n                    //            },\n                    //            always: [\n                    //                {\n                    //                    target: 'running',\n                    //                    cond: (context, event) => (\n                    //                        context.automation_daystartend &&\n                    //                        !context.maintenance &&\n                    //                        context.automation\n                    //                        == true)\n                    //                },\n                    //            ],\n                    //        },\n//\n                    //        running: {\n                    //            entry: [\n                    //                'callDaystartendSetState'\n                    //            ],\n                    //            on: {\n                    //                DAYSTARTEND_OFF: {\n                    //                    target: ['check_states'],\n                    //                },\n                    //            },\n//\n                    //            after: {\n                    //                2000: { target: 'running' }\n                    //            },\n                    //        },\n//\n                    //    }\n                    //},\n\n                    //pump: {\n                    //    on: {\n                    //        PUMP_ON: {\n                    //            actions: [assign({ automation_kinematics: true })],\n                    //            target: 'pump'\n                    //        },\n                    //        PUMP_OFF: {\n                    //            actions: [assign({ automation_kinematics: false })],\n                    //            target: 'pump'\n                    //        },\n                    //    },\n                    //    initial: 'init',\n                    //    states: {\n                    //        init: {\n                    //        },\n                    //\n                    //        running: {\n                    //\n                    //        },\n                    //\n                    //        stopped: {\n                    //\n                    //        }\n                    //    }\n                    //}\n                }\n\n            }\n        },\n    },\n    config: \n    {\n        guards: {\n           //check_states: (context, event) => {\n           //    return context.canSearch && event.query && event.query.length > 0\n           //    }\n        },\n\n        actions: {\n            getPowerState: (context, event) => {\n                node.send({ command: 'get_power_state', pcs: pcs });\n            }, \n            getAutomationState: (context, event) => {\n                node.send({ command: 'get_automation_state', pcs: pcs});\n            },\n            getMaintenanceState: (context, event) => {\n                node.send({ command: 'get_maintenance_state', pcs: pcs });\n            },\n            getKinematicsState: (context, event) => {\n                node.send({ command: 'get_kinematics_state', pcs: pcs });\n            },\n            getCameraState: (context, event) => {\n                node.send({ command: 'get_camera_state', pcs: pcs });\n            },\n            getLedState: (context, event) => {\n                node.send({ command: 'get_led_state', pcs: pcs });\n            },\n\n\n            \n            \n            getKinematicsMotorState: (context, event) => {\n                node.send({ command: 'get_kinematics_motor_state', pcs: pcs});\n            },\n            getKinematicsHomingValidState: (context, event) => {\n                node.send({ command: 'get_kinematics_homing_valid_state', pcs: pcs });\n            },\n            getKinematicsStepperModeState: (context, event) => {\n                node.send({ command: 'get_kinematics_stepper_mode_state', pcs: pcs });\n            },\n            getKinematicsStepperAutomationState: (context, event) => {\n                node.send({ command: 'get_kinematics_stepper_automation_state', pcs: pcs });\n            },\n            getKinematicsPositionState: (context, event) => {\n                node.send({ command: 'get_kinematics_position_state', pcs: pcs });\n            },\n            getKinematicsLocalHomingPositionState: (context, event) => {\n                node.send({ command: 'get_kinematics_local_homing_position_state', pcs: pcs });\n            },\n            getKinematicsGlobalHomingPositionState: (context, event) => {\n                node.send({ command: 'get_kinematics_global_homing_position_state', pcs: pcs });\n            },\n            getKinematicsPinionwheelIncreasedState: (context, event) => {\n                node.send({ command: 'get_kinematics_pinionwheel_increased_state', pcs: pcs });\n            },\n            getKinematicsPinionwheelDecreasedState: (context, event) => {\n                node.send({ command: 'get_kinematics_pinionwheel_decreased_state', pcs: pcs });\n            },\n            getKinematicsAutomationDelayNightState: (context, event) => {\n                node.send({ command: 'get_kinematics_automation_delay_night_state', pcs: pcs });\n            },\n            getKinematicsAutomationDelayDayState: (context, event) => {\n                node.send({ command: 'get_kinematics_automation_delay_day_state', pcs: pcs });\n            },\n            getKinematicsPinionwheelDifferenceState: (context, event) => {\n                node.send({ command: 'get_kinematics_pinionwheel_count_difference_state', pcs: pcs });\n            },\n\n            \n            \n            \n            getCameraSequenceActiveState: (context, event) => {\n                node.send({ command: 'get_camera_sequence_active_state', pcs: pcs });\n            },\n\n            getDaytimeDayState: (context, event) => {\n                node.send({ command: 'get_daytime_day_state', pcs: pcs });\n            },\n            \n            getDaynightState: (context, event) => {\n                node.send({ command: 'get_daynight_state', pcs: pcs });\n            },\n\n            getDaylightState: (context, event) => {\n                node.send({ command: 'get_daylight_state', pcs: pcs });\n            },\n\n            getDaystartendState: (context, event) => {\n                node.send({ command: 'get_daystartend_state', pcs: pcs });\n            },\n            \n            getCameraSequenceState: (context, event) => {\n                node.send({ command: 'get_camera_sequence_state', pcs: pcs });\n            },\n\n\n            \n            \n            \n\n            getLedTestModeState: (context, event) => {\n                node.send({ command: 'get_led_test_mode_state', pcs: pcs });\n            },\n\n                \n\n\n            sendErrorHoming: (context, event) => {\n                node.send({ command: 'error: Homing', pcs: pcs });\n            },\n            sendErrorAutomation: (context, event) => {\n                node.send({ command: 'error: Automation', pcs: pcs });\n            },\n            sendErrorTimeout: (context, event) => {\n                node.send({ command: 'error: Communication Timeout', pcs: pcs });\n            },\n            sendErrorCameraSequence: (context, event) => {\n                node.send({ command: 'error: Camera Sequence', pcs: pcs });\n            },\n            sendErrorPinionwheel: (context, event) => {\n                node.send({ command: 'error: Error in Kinematics', pcs: pcs });\n            },\n            \n            \n            callKinematicsStopMotor: (context, event) => {\n                node.send({ command: 'call_kinematics_stop_motor', pcs: pcs });\n            },\n            callKinematicsGlobalHoming: (context, event) => {\n                node.send({ command: 'call_kinematics_global_homing', pcs: pcs });\n            },\n            callKinematicsLocalHoming: (context, event) => {\n                node.send({ command: 'call_kinematics_local_homing', pcs: pcs });\n            },\n            callKinematicsStartAutomation: (context, event) => {\n                node.send({ command: 'call_kinematics_start_automation', pcs: pcs });\n            },\n            callKinematicsDriveBackward: (context, event) => {\n                node.send({ command: 'call_kinematics_drive_backward', pcs: pcs });\n            },\n            callKinematicsAutomationShutdown: (context, event) => {\n                node.send({ command: 'call_kinematics_automation_shutdown', pcs: pcs });\n            },\n            \n\n            callCameraSequence: (context, event) => {\n                node.send({ command: 'call_camera_sequence', pcs: pcs });\n            },\n\n            \n         }\n            \n    }\n}\n\n","noerr":0,"x":1380,"y":200,"wires":[["0ba6a41169713dd8"],["13bef2a428f8780a","06d2e7387e3d7de1"]]},{"id":"0ba6a41169713dd8","type":"debug","z":"4d69908ddcfaac9c","g":"5238f08ee293f6d0","name":"State","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1630,"y":200,"wires":[]},{"id":"b7924b4f3fa4598e","type":"switch","z":"4d69908ddcfaac9c","name":"get","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"get_power_state","vt":"str"},{"t":"eq","v":"get_maintenance_state","vt":"str"},{"t":"eq","v":"get_automation_state","vt":"str"},{"t":"eq","v":"get_camera_state","vt":"str"},{"t":"eq","v":"get_led_state","vt":"str"},{"t":"eq","v":"get_pump_state","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":210,"y":580,"wires":[["95fa044b82384055"],["9251d69a8ae4e47b"],["35d9c6f3bb695b64"],["21c7fd6b77622d76"],["3d5fb1ff5d08a5d9"],[],["bf7191acb616685c"]]},{"id":"13bef2a428f8780a","type":"debug","z":"4d69908ddcfaac9c","g":"5238f08ee293f6d0","name":"State","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1630,"y":280,"wires":[]},{"id":"1e16fd57834f4bab","type":"trigger-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"maintenance","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"input_boolean.pcs1_mode_maintenance_active","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":550,"y":320,"wires":[[],["b04e566f27b3aeb6"]]},{"id":"7c4eed599efc134f","type":"trigger-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"automation","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"input_boolean.pcs1_automation_main_active","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":540,"y":400,"wires":[[],["9003b4141428c86b"]]},{"id":"730f87b92e887b0c","type":"trigger-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"kinematics","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"input_boolean.pcs1_automation_kinematics_active","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":660,"y":700,"wires":[[],["9e7dd89e3a936dd1"]]},{"id":"e324602c5324b1d1","type":"delay","z":"4d69908ddcfaac9c","g":"5238f08ee293f6d0","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1680,"y":160,"wires":[["65272e1280335db8"]]},{"id":"8f698f16474d86ab","type":"trigger-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"motor_enabled","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"switch.pcs1_kin_stepper_enable_motor","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":680,"y":780,"wires":[[],["7ed788079f986fad"]]},{"id":"bf7191acb616685c","type":"switch","z":"4d69908ddcfaac9c","name":"get_kinematics","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"get_kinematics_state","vt":"str"},{"t":"eq","v":"get_kinematics_motor_state","vt":"str"},{"t":"eq","v":"get_kinematics_homing_valid_state","vt":"str"},{"t":"eq","v":"get_kinematics_stepper_mode_state","vt":"str"},{"t":"eq","v":"get_kinematics_stepper_automation_state","vt":"str"},{"t":"eq","v":"get_kinematics_position_state","vt":"str"},{"t":"eq","v":"get_kinematics_local_homing_position_state","vt":"str"},{"t":"eq","v":"get_kinematics_global_homing_position_state","vt":"str"},{"t":"eq","v":"get_kinematics_pinionwheel_increased_state","vt":"str"},{"t":"eq","v":"get_kinematics_pinionwheel_decreased_state","vt":"str"},{"t":"eq","v":"get_kinematics_automation_delay_day_state","vt":"str"},{"t":"eq","v":"get_kinematics_automation_delay_night_state","vt":"str"},{"t":"eq","v":"get_kinematics_pinionwheel_count_difference_state","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":14,"x":340,"y":980,"wires":[["c286660332418957"],["1be2a0ec5a68a4e3"],["bbf0c878a9512c09"],["3ab8e09267d1ecfc"],["86d16c7a0bb268b9"],["7269614e14c63246"],["598acc0a1796788f"],["7b572115d43fda8b"],["e265d5d504fc80db"],["d6669515c33841fa"],["259d4fd83bf318d5"],["84b0af335a9cb1c5"],["4e2350a9b0e65ec9"],["7c6477169fd4c6d9"]]},{"id":"39c2892f0b5d5ea7","type":"trigger-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"homing_valid","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"binary_sensor.pcs1_kin_stepper_homing_is_valid","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":670,"y":880,"wires":[[],["c1fb2e2aa1079f86"]]},{"id":"b83e4245209825a5","type":"api-call-service","z":"4d69908ddcfaac9c","g":"691fbdbe109ddb09","name":"stop_motor","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.{{pcs}}_kin_stepper_stop","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":2240,"wires":[[]]},{"id":"8844b49f3c76d85d","type":"switch","z":"4d69908ddcfaac9c","name":"call_kinematics","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"call_kinematics_stop_motor","vt":"str"},{"t":"eq","v":"call_kinematics_global_homing","vt":"str"},{"t":"eq","v":"call_kinematics_local_homing","vt":"str"},{"t":"eq","v":"call_kinematics_start_automation","vt":"str"},{"t":"eq","v":"call_kinematics_drive_backward","vt":"str"},{"t":"eq","v":"call_kinematics_automation_shutdown","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":7,"x":380,"y":2300,"wires":[["b83e4245209825a5"],["3feed79c668b2b8e"],["6e9cf8b26501c4f7"],["87d001285ef2f659"],["7b64a7795664f27e"],["dc13f86e411b2262","e0588b45e337dd3d"],[]]},{"id":"3feed79c668b2b8e","type":"api-call-service","z":"4d69908ddcfaac9c","g":"691fbdbe109ddb09","name":"GlobalHoming","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.{{pcs}}_kin_stepper_start_global_homing","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":2280,"wires":[[]]},{"id":"d845c102cc8834ac","type":"trigger-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"stepper_automation","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"switch.pcs1_kin_stepper_start_automation","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":690,"y":1080,"wires":[[],["d5da819c14d9d9b8"]]},{"id":"87d001285ef2f659","type":"api-call-service","z":"4d69908ddcfaac9c","g":"691fbdbe109ddb09","name":"stepper_start_automation","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"switch","service":"turn_on","entityId":"switch.{{pcs}}_kin_stepper_start_automation","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":730,"y":2400,"wires":[[]]},{"id":"06d2e7387e3d7de1","type":"change","z":"4d69908ddcfaac9c","g":"5238f08ee293f6d0","name":"","rules":[{"t":"delete","p":"data","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1670,"y":100,"wires":[["e324602c5324b1d1"]]},{"id":"b04e566f27b3aeb6","type":"function","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"MAINTENANCE","func":"const topic = 'MAINTENANCE'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":400,"wires":[["79ab147ab771e9fb"]]},{"id":"9003b4141428c86b","type":"function","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"AUTOMATION","func":"const topic = 'AUTOMATION'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":440,"wires":[["79ab147ab771e9fb"]]},{"id":"9e7dd89e3a936dd1","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS","func":"const topic = 'KINEMATICS'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":700,"wires":[["79ab147ab771e9fb"]]},{"id":"7ed788079f986fad","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_MOTOR_ENABLED","func":"const topic = 'KINEMATICS_MOTOR_ENABLED'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":780,"wires":[["79ab147ab771e9fb"]]},{"id":"c1fb2e2aa1079f86","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_HOMING_VALID","func":"const topic = 'KINEMATICS_HOMING_VALID'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1030,"y":900,"wires":[["defcaba4a825b973"]]},{"id":"d5da819c14d9d9b8","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_STEPPER_AUTOMATION","func":"const topic = 'KINEMATICS_STEPPER_AUTOMATION'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1060,"y":1100,"wires":[["defcaba4a825b973"]]},{"id":"3f82fb9177eb48a4","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_STEPPER_MODE","func":"const topic = 'KINEMATICS_STEPPER_MODE'\n\nif (msg.payload == '0.0'){\n    msg.topic = topic+'_0';\n} else if (msg.payload == '1.0'){\n    msg.topic = topic + '_1';\n} else if (msg.payload == '2.0') {\n    msg.topic = topic + '_2';\n} else if (msg.payload == '3.0') {\n    msg.topic = topic + '_3';\n} else if (msg.payload == '10.0') {\n    msg.topic = topic + '_10';\n} else if (msg.payload == '11.0') {\n    msg.topic = topic + '_11';\n}else{\n    msg.topic = topic + '_0';  \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1060,"y":980,"wires":[["defcaba4a825b973"]]},{"id":"3ab8e09267d1ecfc","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"stepper_mode","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_stepper_mode","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"stepper_mode","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":680,"y":1020,"wires":[["3f82fb9177eb48a4"]]},{"id":"86d16c7a0bb268b9","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"kin_stepper_start_automation","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.{{pcs}}_kin_stepper_start_automation","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":730,"y":1120,"wires":[["d5da819c14d9d9b8"]]},{"id":"bbf0c878a9512c09","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"homing_valid?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"binary_sensor.{{pcs}}_kin_stepper_homing_is_valid","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":680,"y":920,"wires":[["c1fb2e2aa1079f86"]]},{"id":"1be2a0ec5a68a4e3","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"motor_enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.{{pcs}}_kin_stepper_enable_motor","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":680,"y":820,"wires":[["7ed788079f986fad"]]},{"id":"c286660332418957","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"automation_kinematics_active","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_kinematics_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":730,"y":740,"wires":[["9e7dd89e3a936dd1"]]},{"id":"35d9c6f3bb695b64","type":"api-current-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"automation_main_active?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_main_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":590,"y":440,"wires":[["9003b4141428c86b"]]},{"id":"9251d69a8ae4e47b","type":"api-current-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"maintenance_mode?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":580,"y":360,"wires":[["b04e566f27b3aeb6"]]},{"id":"95fa044b82384055","type":"api-current-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"Main power","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.{{pcs}}_main","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":550,"y":280,"wires":[["9a9ee671f52e2d4a"]]},{"id":"5d5ef0673ac89375","type":"trigger-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"Main power","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"switch.pcs1_main","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":550,"y":240,"wires":[[],["9a9ee671f52e2d4a"]]},{"id":"9a9ee671f52e2d4a","type":"function","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"POWER","func":"const topic = 'POWER'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":320,"wires":[["79ab147ab771e9fb"]]},{"id":"7269614e14c63246","type":"subflow:01e96d9e32906378","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"","x":700,"y":1180,"wires":[["99f524f94889e68c"]]},{"id":"99f524f94889e68c","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_CAMERA_POSITION","func":"const topic = 'KINEMATICS_CAMERA_POSITION'\n\nif (msg.camera_position == true){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":1180,"wires":[["fc8beec6719e5c8c"]]},{"id":"9b61d88cbb490ef0","type":"trigger-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"automation_camera","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"input_boolean.pcs1_automation_camera_active","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":570,"y":480,"wires":[[],["b938625a6ce1385c"]]},{"id":"21c7fd6b77622d76","type":"api-current-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"automation_camera_state","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_camera_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":590,"y":520,"wires":[["b938625a6ce1385c"]]},{"id":"b938625a6ce1385c","type":"function","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"CAMERA","func":"const topic = 'CAMERA'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":500,"wires":[["79ab147ab771e9fb"]]},{"id":"15cd0c9a735d73dd","type":"change","z":"4d69908ddcfaac9c","g":"65a6d1c782131ce7","name":"LED_CAMERA_MODE_OFF","rules":[{"t":"set","p":"topic","pt":"msg","to":"LED_CAMERA_MODE_OFF","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":1980,"wires":[["5a1dd045f3f8a36a"]]},{"id":"598acc0a1796788f","type":"subflow:01e96d9e32906378","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"","x":700,"y":1240,"wires":[["7a4427c647084818"]]},{"id":"7a4427c647084818","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_LOCAL_HOMING_POSITION","func":"const topic = 'KINEMATICS_LOCAL_HOMING_POSITION'\n\nif (msg.global_homing_position == true){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1050,"y":1240,"wires":[["fc8beec6719e5c8c"]]},{"id":"6e9cf8b26501c4f7","type":"api-call-service","z":"4d69908ddcfaac9c","g":"691fbdbe109ddb09","name":"LocalHoming","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.{{pcs}}_kin_stepper_start_local_homing","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":2340,"wires":[[]]},{"id":"7b64a7795664f27e","type":"api-call-service","z":"4d69908ddcfaac9c","g":"691fbdbe109ddb09","name":"drive_backward","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"button","service":"press","entityId":"button.{{pcs}}_kin_stepper_drive_bw","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":2460,"wires":[[]]},{"id":"ead16b45ef921547","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_GLOBAL_HOMING_POSITION","func":"const topic = 'KINEMATICS_GLOBAL_HOMING_POSITION'\n\nif (msg.global_homing_position == true){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1050,"y":1300,"wires":[["fc8beec6719e5c8c"]]},{"id":"7b572115d43fda8b","type":"subflow:01e96d9e32906378","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"","x":700,"y":1300,"wires":[["ead16b45ef921547"]]},{"id":"e265d5d504fc80db","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"pinionwheel_count_increasing?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_proximity_switch_pinion_wheel_count","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":720,"y":1360,"wires":[["6ec4aef5b561d81e"]]},{"id":"6ec4aef5b561d81e","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"function 26","func":"// Check if the context variable has been set\nif (!context.get('previous_sensor_value')) {\n    // If the context variable has not been set, initialize it with a default value\n    context.set('previous_sensor_value', 0);\n}\n\n// Retrieve the previous sensor value from the context variable\nvar previous_sensor_value = context.get('previous_sensor_value');\n\n// Convert the current sensor value to an integer\nvar current_sensor_value = msg.payload;\n\n// Compare the current sensor value to the previous sensor value\nif (current_sensor_value > previous_sensor_value) {\n    // Sensor value has increased\n    msg.pinionwheel_increased = true;\n} else {\n    // Sensor value has not increased\n    msg.pinionwheel_increased = false;\n}\n\n// Store the current sensor value in the context variable for the next comparison\ncontext.set('previous_sensor_value', current_sensor_value);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":1360,"wires":[["eba7bf46452fea95"]]},{"id":"eba7bf46452fea95","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_PINIONWHEEL_INCRESED","func":"const topic = 'KINEMATICS_PINIONWHEEL_INCREASED'\n\nif (msg.pinionwheel_increased == true){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1280,"y":1360,"wires":[["667adf65ae47f2f2"]]},{"id":"c59852ea43b9fc66","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_PINIONWHEEL_DECREASED","func":"const topic = 'KINEMATICS_PINIONWHEEL_DECREASED'\n\nif (msg.pinionwheel_incresed == true){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1290,"y":1440,"wires":[["667adf65ae47f2f2"]]},{"id":"d6669515c33841fa","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"pinionwheel_count_decreasing?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_proximity_switch_pinion_wheel_count","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":720,"y":1420,"wires":[["6ed9c4531c7effd0"]]},{"id":"6ed9c4531c7effd0","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"function 27","func":"// Check if the context variable has been set\nif (!context.get('previous_sensor_value')) {\n    // If the context variable has not been set, initialize it with a default value\n    context.set('previous_sensor_value', 0);\n}\n\n// Retrieve the previous sensor value from the context variable\nvar previous_sensor_value = context.get('previous_sensor_value');\n\n// Convert the current sensor value to an integer\nvar current_sensor_value = msg.payload;\n\n// Compare the current sensor value to the previous sensor value\nif (current_sensor_value < previous_sensor_value) {\n    // Sensor value has increased\n    msg.pinionwheel_decreased = true;\n} else {\n    // Sensor value has not increased\n    msg.pinionwheel_decreased = false;\n}\n\n// Store the current sensor value in the context variable for the next comparison\ncontext.set('previous_sensor_value', current_sensor_value);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":1420,"wires":[["c59852ea43b9fc66"]]},{"id":"dc13f86e411b2262","type":"api-call-service","z":"4d69908ddcfaac9c","g":"691fbdbe109ddb09","name":"shutdown kinematics","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"switch","service":"turn_off","entityId":"switch.{{pcs}}_kin_stepper_enable_motor","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":720,"y":2560,"wires":[[]]},{"id":"3d5fb1ff5d08a5d9","type":"api-current-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"automation_led","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_led_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":560,"y":600,"wires":[["46bd24e166362245"]]},{"id":"faaaf98dea657c58","type":"trigger-state","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"automation_led","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"input_boolean.pcs1_automation_led_active","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":560,"y":560,"wires":[[],["46bd24e166362245"]]},{"id":"46bd24e166362245","type":"function","z":"4d69908ddcfaac9c","g":"7726591f7ae49953","name":"LED","func":"const topic = 'LED'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":580,"wires":[["79ab147ab771e9fb"]]},{"id":"e0588b45e337dd3d","type":"api-call-service","z":"4d69908ddcfaac9c","g":"691fbdbe109ddb09","name":"Notification","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"persistent_notification","service":"create","entityId":"","data":"{\"title\":\"Info\",\"message\":\"Error in the Kinematics system, turned off the motor.\"}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":690,"y":2520,"wires":[[]]},{"id":"5dc9770fcb4efdd8","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"Automation Fan anhand Temperatur oder LED?","info":"","x":3140,"y":380,"wires":[]},{"id":"7c6477169fd4c6d9","type":"switch","z":"4d69908ddcfaac9c","name":"","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"get_daytime_day_state","vt":"str"},{"t":"eq","v":"call_camera_sequence","vt":"str"},{"t":"eq","v":"get_camera_sequence_state","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":370,"y":1760,"wires":[["0e5ad999a36c8965"],["9186e572e06fa84d"],["b160a72f3b88b02d"],["8844b49f3c76d85d"]]},{"id":"0e5ad999a36c8965","type":"api-current-state","z":"4d69908ddcfaac9c","g":"277e265964d355ba","name":"daytime_day?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_daytime_day_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":680,"y":1760,"wires":[["e656a35e49130482"]]},{"id":"e656a35e49130482","type":"function","z":"4d69908ddcfaac9c","g":"277e265964d355ba","name":"DAYTIME_DAY","func":"const topic = 'DAYTIME_DAY'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":1760,"wires":[["1e6e23fe99c8d241"]]},{"id":"259d4fd83bf318d5","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"delay_day","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.{{pcs}}_kinematics_automation_delay_day","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"topic","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":640,"y":1480,"wires":[["698ec6bd61faab38"]]},{"id":"84b0af335a9cb1c5","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"delay_night","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.{{pcs}}_kinematics_automation_delay_night","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"topic","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":650,"y":1540,"wires":[["698ec6bd61faab38"]]},{"id":"cf022ab0eb479907","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"Start und Endzeit, Länge, Starttag, Endtag, Mitteltag, Setze Tag Ein/aus","info":"","x":2650,"y":200,"wires":[]},{"id":"35ef2ae94920a5f6","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"sync pump with kinematic","info":"","x":2430,"y":320,"wires":[]},{"id":"03cc2cfbb7550c0a","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"send graphana annotations","info":"","x":2780,"y":460,"wires":[]},{"id":"95119205324e5929","type":"trigger-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"stepper_mode","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"sensor.pcs1_kin_stepper_mode","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":670,"y":980,"wires":[[],["3f82fb9177eb48a4"]]},{"id":"380dd68c5061d4d7","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"change notes instead of triggers","info":"","x":2730,"y":380,"wires":[]},{"id":"487a3da5c22e9dfc","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"Fan steuerung","info":"","x":3040,"y":300,"wires":[]},{"id":"5c5521698cb72cbe","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"Pump mode: time and synced","info":"","x":2440,"y":280,"wires":[]},{"id":"51d51c0cd0c4a949","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"KINEMATICS_AUTOMATION_DELAY","func":"const topic = 'KINEMATICS_AUTOMATION_'\nmsg.topic = topic + msg.topic;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1270,"y":1520,"wires":[["a99a6db3b524c49a"]]},{"id":"4e2350a9b0e65ec9","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"pinionwheel_count","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_proximity_switch_pinion_wheel_count","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"pinionwheel_count","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":670,"y":1580,"wires":[["a6c0605898e4e118"]]},{"id":"a6c0605898e4e118","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"expected_pinionwheel_count","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_proximity_switch_expected_pinion_wheel_count","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"expected_pinionwheel_count","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":710,"y":1620,"wires":[["466ff8738c869dd4"]]},{"id":"0e7975f874edbc85","type":"function","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"function 28","func":"var abs_diff = Math.abs(msg.pinionwheel_count - msg.expected_pinionwheel_count);\n\nif (abs_diff >= msg.pinionwheel_count_difference_error){\n    msg.topic = \"KINEMATICS_PINIONWHEEL_COUNT_DIFFERENCE_ERROR_ON\";\n}else{\n    msg.topic = \"KINEMATICS_PINIONWHEEL_COUNT_DIFFERENCE_ERROR_OFF\";\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":990,"y":1620,"wires":[["a99a6db3b524c49a"]]},{"id":"466ff8738c869dd4","type":"api-current-state","z":"4d69908ddcfaac9c","g":"64fd3b31b60a4e17","name":"pinionwheel_count_difference_error","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_kinematics_pinionwheel_count_difference_error","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"pinionwheel_count_difference_error","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":730,"y":1660,"wires":[["0e7975f874edbc85"]]},{"id":"656acfae3e0d9c64","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"LEDs aus, ab temperatur X","info":"","x":3070,"y":340,"wires":[]},{"id":"9e3387dca00a1a17","type":"spline-curve","z":"4d69908ddcfaac9c","name":"S_CURVE_FALLING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.999},{"x":0.375,"y":0.882},{"x":0.501,"y":0.752},{"x":0.628,"y":0.622},{"x":1,"y":0.5}],"x":1360,"y":2380,"wires":[["01263ebbefde2d08"]]},{"id":"840beffb39345108","type":"switch","z":"4d69908ddcfaac9c","name":"","property":"daylength_function","propertyType":"msg","rules":[{"t":"eq","v":"CONSTANT_LOW","vt":"str"},{"t":"eq","v":"CONSTANT_HIGH","vt":"str"},{"t":"eq","v":"DISCRETE_PEAK_FALLING","vt":"str"},{"t":"eq","v":"DISCRETE_PEAK_RISING","vt":"str"},{"t":"eq","v":"LINEAR_FALLING","vt":"str"},{"t":"eq","v":"LINEAR_RISING","vt":"str"},{"t":"eq","v":"S_CURVE_FALLING","vt":"str"},{"t":"eq","v":"S_CURVE_RISING","vt":"str"},{"t":"eq","v":"SPLINE_FALLING","vt":"str"},{"t":"eq","v":"SPLINE_RISING","vt":"str"},{"t":"eq","v":"PLATEAU_BIG_FALLING","vt":"str"},{"t":"eq","v":"PLATEAU_BIG_RISING","vt":"str"},{"t":"eq","v":"PLATEAU_MID_FALLING","vt":"str"},{"t":"eq","v":"PLATEAU_MID_RISING","vt":"str"},{"t":"eq","v":"PLATEAU_SMALL_FALLING","vt":"str"},{"t":"eq","v":"PLATEAU_SMALL_RISING","vt":"str"}],"checkall":"true","repair":false,"outputs":16,"x":1030,"y":2480,"wires":[[],[],[],[],["912e5f6ba2f6531b"],["dc8dc2a97ac48714"],["9e3387dca00a1a17"],["81113659a9a1d866"],["3dfa5b7978c1e9ec"],["d90bd8a8c33a564e"],["6bc3199d2b3a8509"],["8feacf9622a2734a"],["f002b43a803cf47c"],["67bb7bb136d9cbcf"],["131c010e08dfcc0f"],["d8353db71708f748"]]},{"id":"81113659a9a1d866","type":"spline-curve","z":"4d69908ddcfaac9c","name":"S_CURVE_RISING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.005,"y":0.502},{"x":0.368,"y":0.609},{"x":0.501,"y":0.752},{"x":0.615,"y":0.879},{"x":0.995,"y":0.999}],"x":1350,"y":2420,"wires":[["01263ebbefde2d08"]]},{"id":"3dfa5b7978c1e9ec","type":"spline-curve","z":"4d69908ddcfaac9c","name":"SPLINE_FALLING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.999},{"x":0.185,"y":0.976},{"x":0.378,"y":0.846},{"x":0.675,"y":0.636},{"x":0.838,"y":0.539},{"x":1,"y":0.5}],"x":1350,"y":2460,"wires":[["01263ebbefde2d08"]]},{"id":"d90bd8a8c33a564e","type":"spline-curve","z":"4d69908ddcfaac9c","name":"SPLINE_RISING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.005,"y":0.502},{"x":0.368,"y":0.609},{"x":0.501,"y":0.752},{"x":0.615,"y":0.879},{"x":0.995,"y":0.999}],"x":1350,"y":2500,"wires":[["01263ebbefde2d08"]]},{"id":"6bc3199d2b3a8509","type":"spline-curve","z":"4d69908ddcfaac9c","name":"PLATEAU_BIG_FALLING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.999},{"x":0.155,"y":0.992},{"x":0.715,"y":0.969},{"x":0.798,"y":0.906},{"x":0.885,"y":0.642},{"x":0.938,"y":0.522},{"x":1,"y":0.5}],"x":1370,"y":2540,"wires":[["01263ebbefde2d08"]]},{"id":"8feacf9622a2734a","type":"spline-curve","z":"4d69908ddcfaac9c","name":"PLATEAU_BIG_RISING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.499},{"x":0.061,"y":0.569},{"x":0.098,"y":0.772},{"x":0.151,"y":0.916},{"x":0.251,"y":0.969},{"x":0.781,"y":0.992},{"x":0.995,"y":0.999}],"x":1370,"y":2580,"wires":[["01263ebbefde2d08"]]},{"id":"f002b43a803cf47c","type":"spline-curve","z":"4d69908ddcfaac9c","name":"PLATEAU_BIG_FALLING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.999},{"x":0.171,"y":0.996},{"x":0.455,"y":0.972},{"x":0.545,"y":0.879},{"x":0.615,"y":0.669},{"x":0.725,"y":0.539},{"x":1,"y":0.5}],"x":1370,"y":2620,"wires":[["01263ebbefde2d08"]]},{"id":"67bb7bb136d9cbcf","type":"spline-curve","z":"4d69908ddcfaac9c","name":"PLATEAU_MID_RISING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.499},{"x":0.275,"y":0.592},{"x":0.351,"y":0.699},{"x":0.428,"y":0.879},{"x":0.561,"y":0.982},{"x":0.768,"y":0.992},{"x":0.995,"y":0.999}],"x":1370,"y":2660,"wires":[["01263ebbefde2d08"]]},{"id":"131c010e08dfcc0f","type":"spline-curve","z":"4d69908ddcfaac9c","name":"PLATEAU_SMALL_FALLING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.999},{"x":0.111,"y":0.996},{"x":0.208,"y":0.976},{"x":0.261,"y":0.892},{"x":0.301,"y":0.712},{"x":0.378,"y":0.586},{"x":1,"y":0.5}],"x":1380,"y":2700,"wires":[["01263ebbefde2d08"]]},{"id":"d8353db71708f748","type":"spline-curve","z":"4d69908ddcfaac9c","name":"PLATEAU_SMALL_RISING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.499},{"x":0.595,"y":0.559},{"x":0.681,"y":0.689},{"x":0.725,"y":0.876},{"x":0.765,"y":0.952},{"x":0.875,"y":0.992},{"x":0.995,"y":0.999}],"x":1380,"y":2740,"wires":[["01263ebbefde2d08"]]},{"id":"912e5f6ba2f6531b","type":"spline-curve","z":"4d69908ddcfaac9c","name":"LINEAR_FALLING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.008,"y":0.999},{"x":0.5,"y":0.75},{"x":1,"y":0.5}],"x":1350,"y":2300,"wires":[["01263ebbefde2d08"]]},{"id":"dc8dc2a97ac48714","type":"spline-curve","z":"4d69908ddcfaac9c","name":"LINEAR_RISING","output_key":"daylength","input_key":"time_fraction","points":[{"x":0.005,"y":0.502},{"x":0.5,"y":0.75},{"x":0.995,"y":0.999}],"x":1350,"y":2340,"wires":[["01263ebbefde2d08"]]},{"id":"c81d771b36572c9a","type":"calculator","z":"4d69908ddcfaac9c","name":"","inputMsgField":"daylength","outputMsgField":"daylength","operation":"sub","constant":"0.5","round":false,"decimals":"0","x":1700,"y":2520,"wires":[["95791d0405e44a31"]]},{"id":"95791d0405e44a31","type":"calculator","z":"4d69908ddcfaac9c","name":"","inputMsgField":"daylength","outputMsgField":"daylength","operation":"mult","constant":"2","round":true,"decimals":"4","x":1860,"y":2520,"wires":[["2642ed9b88d5d026"]]},{"id":"2642ed9b88d5d026","type":"range","z":"4d69908ddcfaac9c","minin":"0","maxin":"1","minout":"0","maxout":"1","action":"clamp","round":false,"property":"daylength","name":"","x":2030,"y":2500,"wires":[[]]},{"id":"9186e572e06fa84d","type":"api-call-service","z":"4d69908ddcfaac9c","g":"65a6d1c782131ce7","name":"camera_sequence_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_boolean","service":"turn_on","entityId":"input_boolean.{{pcs}}_camera_sequence","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":700,"y":2100,"wires":[[]]},{"id":"a68aa5ec50dac5b4","type":"inject","z":"4d69908ddcfaac9c","g":"65a6d1c782131ce7","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"6","topic":"","payload":"","payloadType":"date","x":670,"y":1980,"wires":[["86805ad6307c0fa2"]]},{"id":"4fa2176a2f7e48a3","type":"api-current-state","z":"4d69908ddcfaac9c","g":"65a6d1c782131ce7","name":"!camera_sequence?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_camera_sequence","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1180,"y":1980,"wires":[["15cd0c9a735d73dd"],[]]},{"id":"aaeea55965b7ed16","type":"change","z":"4d69908ddcfaac9c","g":"65a6d1c782131ce7","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":1980,"wires":[["4fa2176a2f7e48a3"]]},{"id":"86805ad6307c0fa2","type":"delay","z":"4d69908ddcfaac9c","g":"65a6d1c782131ce7","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":870,"y":1980,"wires":[["aaeea55965b7ed16"]]},{"id":"6cc9af9e60e3e56a","type":"server-state-changed","z":"4d69908ddcfaac9c","g":"65a6d1c782131ce7","name":"camera_sequence","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_camera_sequence","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":690,"y":2040,"wires":[["86805ad6307c0fa2"]]},{"id":"b160a72f3b88b02d","type":"api-current-state","z":"4d69908ddcfaac9c","name":"camera_sequence?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_camera_sequence","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":1900,"wires":[["ce77f708b23a2744"]]},{"id":"ce77f708b23a2744","type":"function","z":"4d69908ddcfaac9c","name":"CAMERA_SEQUENCE","func":"const topic = 'CAMERA_SEQUENCE'\n\nif(msg.payload == 'on'){\n    msg.topic = topic+'_ON';\n}else{\n    msg.topic = topic + '_OFF';\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":1900,"wires":[["a99a6db3b524c49a"]]},{"id":"02106823f7f7b623","type":"comment","z":"4d69908ddcfaac9c","g":"41c2a49f0bdcc0b0","name":"automation delay day/night","info":"","x":2450,"y":420,"wires":[]},{"id":"6dbfcc23eaf92b9f","type":"api-call-service","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"day","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_boolean","service":"turn_on","entityId":"input_boolean.{{pcs}}_daytime_day_active","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1250,"y":120,"wires":[[]]},{"id":"8aa1567ae88d3a16","type":"api-current-state","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"time","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.time","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"time","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":830,"y":60,"wires":[["b7e7f0b66b302a3a"]]},{"id":"b7e7f0b66b302a3a","type":"api-current-state","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"day_start","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_datetime.{{pcs}}_daytime_day_start","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"day_start","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":820,"y":120,"wires":[["ce2ff2a7d7e73f31"]]},{"id":"ce2ff2a7d7e73f31","type":"api-current-state","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"day_end","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_datetime.{{pcs}}_daytime_day_end","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"day_end","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":820,"y":180,"wires":[["ae3e4b047fb98501"]]},{"id":"ae3e4b047fb98501","type":"function","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"convert","func":"var time = msg.time.split(\":\")\nvar time_seconds = (time[0] * 60) * 60 + (time[1] * 60)\n\nvar day_start = msg.day_start.split(\":\")\nvar day_start_seconds = (day_start[0] * 60) * 60 + (day_start[1] * 60)\n\nvar day_end = msg.day_end.split(\":\")\nvar day_end_seconds = (day_end[0] * 60) * 60 + (day_end[1] * 60)\n\n\nmsg.time = time_seconds;\nmsg.day_start = day_start_seconds;\nmsg.day_end = day_end_seconds;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":60,"wires":[["e464e13c4f816437"]]},{"id":"e464e13c4f816437","type":"function","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"check_day","func":"var result = false;\n\nif (msg.day_start<=msg.day_end){\n    if (msg.time >= msg.day_start && msg.time <= msg.day_end) {\n        result = true;\n    } else {\n        result = false;\n    }\n}else{\n    if (msg.time >= msg.day_start || msg.time <= msg.day_end){\n        result = true;\n    }else{\n        result = false;\n    }\n}\n\n\nmsg.day = result;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1050,"y":120,"wires":[["74bbe0119b080d7c"]]},{"id":"74bbe0119b080d7c","type":"switch","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"","property":"day","propertyType":"msg","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1050,"y":180,"wires":[["6dbfcc23eaf92b9f"],["1774109e9ee43aa3"]]},{"id":"1774109e9ee43aa3","type":"api-call-service","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"night","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_boolean","service":"turn_off","entityId":"input_boolean.{{pcs}}_daytime_day_active","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1250,"y":200,"wires":[[]]},{"id":"873a9c44edd2e1f1","type":"inject","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":210,"y":60,"wires":[["70dc5213afba01c8"]]},{"id":"b3eb422e7473674d","type":"change","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":60,"wires":[["a3da6a8ee429b31d"]]},{"id":"a3da6a8ee429b31d","type":"api-current-state","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"!maintenance_mode?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":540,"y":120,"wires":[["c5a47bf50ec2f8df"],[]]},{"id":"c5a47bf50ec2f8df","type":"api-current-state","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"automation_main_active?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_main_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":530,"y":160,"wires":[["c5770d1646caf1c9"],[]]},{"id":"c5770d1646caf1c9","type":"api-current-state","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"daynight automation?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_daynight_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":540,"y":200,"wires":[["8aa1567ae88d3a16"],[]]},{"id":"70dc5213afba01c8","type":"delay","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":470,"y":60,"wires":[["b3eb422e7473674d"]]},{"id":"c0a8e86d1b0723a9","type":"server-state-changed","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"automation_daynight","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_daynight_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":120,"wires":[["4dfa1d65d7540cfc"]]},{"id":"955dd9554e7d94a4","type":"server-state-changed","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"maintenance","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_mode_maintenance_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":160,"wires":[["4dfa1d65d7540cfc"]]},{"id":"52d5ea9b2ae52f98","type":"server-state-changed","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"automation_main","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_main_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":200,"wires":[["4dfa1d65d7540cfc"]]},{"id":"34a40b32178f4dc5","type":"server-state-changed","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"day_start","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_datetime.pcs1_daytime_day_start","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":260,"wires":[["63765e7b056aefb5"]]},{"id":"3b2a74f062fc5f39","type":"server-state-changed","z":"6c2304a77d361b80","g":"666a0946f4d763d8","name":"day_end","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_datetime.pcs1_daytime_day_end","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":320,"wires":[["63765e7b056aefb5"]]},{"id":"fe9efe762c3c463a","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"time","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"sensor.time","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"time","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":890,"y":1040,"wires":[["42406eed97e9a3d6"]]},{"id":"42406eed97e9a3d6","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"day_start","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_datetime.{{pcs}}_daytime_day_start","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"day_start","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":880,"y":1100,"wires":[["b8bd2e202658bd33"]]},{"id":"b8bd2e202658bd33","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"day_end","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_datetime.{{pcs}}_daytime_day_end","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"day_end","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":880,"y":1160,"wires":[["6af4e1ebf1d98e2c"]]},{"id":"6af4e1ebf1d98e2c","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"convert","func":"var time = msg.time.split(\":\")\nvar time_seconds = (time[0] * 60) * 60 + (time[1] * 60)\n\nvar day_start = msg.day_start.split(\":\")\nvar day_start_seconds = (day_start[0] * 60) * 60 + (day_start[1] * 60)\n\nvar day_end = msg.day_end.split(\":\")\nvar day_end_seconds = (day_end[0] * 60) * 60 + (day_end[1] * 60)\n\nmsg.time = time_seconds;\nmsg.day_start = day_start_seconds;\nmsg.day_end = day_end_seconds;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":1220,"wires":[["716eaca5ef298301"]]},{"id":"3ab1c276718b889b","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"PYRAMIDAL","func":"var result = 0.0;\n\nif (msg.time_fraction > 0.0 && msg.time_fraction <= 0.5){\n    var tmp = (msg.time_fraction / 0.5 );\n    result = msg.brightness_min + tmp * msg.brightness_diff;\n} else if (msg.time_fraction > 0.5 && msg.time_fraction < 1.0){\n    var tmp = (msg.time_fraction / 0.5) - 1.0;\n    result = msg.brightness_max - tmp * msg.brightness_diff;\n}else{\n    result = msg.brightness_min;\n}\nmsg.brightness = result;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1470,"y":1020,"wires":[["6a81eb7525fdbe65"]]},{"id":"ce91067e1d51115a","type":"switch","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"","property":"daylight_function","propertyType":"msg","rules":[{"t":"eq","v":"CONSTANT","vt":"str"},{"t":"eq","v":"PYRAMIDAL","vt":"str"},{"t":"eq","v":"INVERSE_PYRAMIDAL","vt":"str"},{"t":"eq","v":"SINUS","vt":"str"},{"t":"eq","v":"COSINE","vt":"str"},{"t":"eq","v":"PLATEAU","vt":"str"},{"t":"eq","v":"VALLEY","vt":"str"},{"t":"eq","v":"VALLEY_NARROW","vt":"str"},{"t":"eq","v":"PEAK_LEFT","vt":"str"},{"t":"eq","v":"PEAK_MIDDLE","vt":"str"},{"t":"eq","v":"PEAK_RIGHT","vt":"str"},{"t":"eq","v":"PLATEAU_LEFT","vt":"str"},{"t":"eq","v":"PLATEAU_MIDDLE","vt":"str"},{"t":"eq","v":"PLATEAU_RIGHT","vt":"str"}],"checkall":"true","repair":false,"outputs":14,"x":1270,"y":1260,"wires":[["cb46cd2c1e5dc129"],["3ab1c276718b889b"],["6c935722593ece35"],["06faffbd1f4defac"],["e3060135c6f87ef2"],["5a2c766924ce53dc"],["be6c750e1539e262"],["e5024bd9e374af6a"],["e034eefa31d5a615"],["36ba49678390f6f4"],["c05c57c718b218c4"],["bf1b3591e951be10"],["e4bbe823468c4c75"],["d59196bde60a2848"]]},{"id":"af86c3229d360ac0","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"brightness_max","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness_max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1240,"y":800,"wires":[["3a9daba58b3fd2fb"]]},{"id":"cb92f0db5dfe8843","type":"change","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"white","rules":[{"t":"set","p":"color","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":1380,"wires":[["a54fe2ca64b842a0"]]},{"id":"7a256adb5c4058c1","type":"change","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"red","rules":[{"t":"set","p":"color","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":1440,"wires":[["a54fe2ca64b842a0"]]},{"id":"0b711015e781f34d","type":"change","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"blue","rules":[{"t":"set","p":"color","pt":"msg","to":"blue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":1480,"wires":[["a54fe2ca64b842a0"]]},{"id":"cb5e516b1a8f4f4c","type":"change","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"green","rules":[{"t":"set","p":"color","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":1520,"wires":[["a54fe2ca64b842a0"]]},{"id":"06e9fa55a8ac2044","type":"change","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"uv","rules":[{"t":"set","p":"color","pt":"msg","to":"uv","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":1560,"wires":[["a54fe2ca64b842a0"]]},{"id":"3a9daba58b3fd2fb","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"brightness_min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness_min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1240,"y":860,"wires":[["a7fe0914ab695d44"]]},{"id":"8902d10ec62bcc5d","type":"range","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","minin":"0","maxin":"1","minout":"0","maxout":"3.14159265359","action":"scale","round":false,"property":"time_fraction_sine","name":"","x":1730,"y":1100,"wires":[["f40672f4470a1107"]]},{"id":"85182bfb34ef7d85","type":"comment","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"https://www.licht-im-terrarium.de/sonne/start","info":"","x":1570,"y":940,"wires":[]},{"id":"5a2c766924ce53dc","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_PLATEAU","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.063,"y":0.549},{"x":0.123,"y":0.719},{"x":0.266,"y":0.936},{"x":0.503,"y":0.992},{"x":0.733,"y":0.926},{"x":0.866,"y":0.716},{"x":0.93,"y":0.546},{"x":1,"y":0.5}],"x":1490,"y":1180,"wires":[["bcafbae0cc121aa8"]]},{"id":"0047b67c867b502d","type":"api-call-service","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"set brightness","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness","data":"{\"value\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2400,"y":1200,"wires":[[]]},{"id":"ed8754e05440e6aa","type":"api-call-service","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"set brightness","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness","data":"{\"value\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2400,"y":1100,"wires":[[]]},{"id":"160b8251e02d3e4f","type":"api-call-service","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"set brightness","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness","data":"{\"value\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2400,"y":980,"wires":[[]]},{"id":"6a81eb7525fdbe65","type":"api-call-service","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"set brightness","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness","data":"{\"value\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2400,"y":1020,"wires":[[]]},{"id":"cb46cd2c1e5dc129","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"CONSTANT","func":"var result = 0.0;\n\nif (msg.time_fraction > 0.0 && msg.time_fraction < 1.0){\n    result = msg.brightness_max;\n}else{\n    result = msg.brightness_min;\n}\nmsg.brightness = result;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1470,"y":980,"wires":[["160b8251e02d3e4f"]]},{"id":"bd8e0ea9010a6f82","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SINE","func":"var result = 0.0;\n\nif (msg.time_fraction > 0.0 && msg.time_fraction < 1.0){\n    result = msg.brightness_min + msg.brightness_sine * msg.brightness_diff;\n}else{\n    result = msg.brightness_min;\n}\nmsg.brightness = result;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2050,"y":1100,"wires":[["ed8754e05440e6aa"]]},{"id":"06faffbd1f4defac","type":"change","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"time_fraction_sine","rules":[{"t":"set","p":"time_fraction_sine","pt":"msg","to":"time_fraction","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":1100,"wires":[["8902d10ec62bcc5d"]]},{"id":"f40672f4470a1107","type":"calculator","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"","inputMsgField":"time_fraction_sine","outputMsgField":"brightness_sine","operation":"sin","constant":"","round":true,"decimals":"5","x":1910,"y":1100,"wires":[["bd8e0ea9010a6f82"]]},{"id":"22d0e047ba06307f","type":"calculator","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"","inputMsgField":"brightness_spline","outputMsgField":"brightness_spline","operation":"sub","constant":"0.5","round":false,"decimals":"0","x":1720,"y":1200,"wires":[["9c8d1153226f7de6"]]},{"id":"f0d182e5eccc9dff","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"apply_spline_function","func":"var result = 0.0;\n\nif (msg.time_fraction > 0.0 && msg.time_fraction < 1.0){\n    result = msg.brightness_min + msg.brightness_spline * msg.brightness_diff;\n}else{\n    result = msg.brightness_min;\n}\nmsg.brightness = result;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2200,"y":1200,"wires":[["0047b67c867b502d"]]},{"id":"a7fe0914ab695d44","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"brightness_diff","func":"msg.brightness_diff = msg.brightness_max - msg.brightness_min;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1240,"y":920,"wires":[["63465bc6e9197536"]]},{"id":"9c8d1153226f7de6","type":"calculator","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"","inputMsgField":"brightness_spline","outputMsgField":"brightness_spline","operation":"mult","constant":"2","round":true,"decimals":"4","x":1880,"y":1200,"wires":[["d6b9149612c6b98c"]]},{"id":"a0ada0fa02727f30","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_uv_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":740,"y":1560,"wires":[["06e9fa55a8ac2044"]]},{"id":"716eaca5ef298301","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"TIME_FRACTION","func":"var time_fraction = 0.0;\n\nif (msg.time > msg.day_start && msg.time <= msg.day_end){\n    time_fraction = (msg.time - msg.day_start) / (msg.day_end - msg.day_start);\n}else{\n    time_fraction = 0.0;\n}\nmsg.time_fraction = time_fraction;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":1280,"wires":[["5bdf480d65fbe912"]]},{"id":"63465bc6e9197536","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"daylight_function","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_select.{{pcs}}_led_{{color}}_daylight_function","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"daylight_function","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1230,"y":980,"wires":[["ce91067e1d51115a"]]},{"id":"6c935722593ece35","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"INVERSE_PYRAMIDAL","func":"var result = 0.0;\n\nif (msg.time_fraction > 0.0 && msg.time_fraction <= 0.5){\n    var tmp = (msg.time_fraction / 0.5 );\n    result = msg.brightness_max - tmp * msg.brightness_diff;\n} else if (msg.time_fraction > 0.5 && msg.time_fraction < 1.0){\n    var tmp = (msg.time_fraction / 0.5) - 1.0;\n    result = msg.brightness_min + tmp * msg.brightness_diff;\n}else{\n    result = msg.brightness_min;\n}\nmsg.brightness = result;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1510,"y":1060,"wires":[["017223ba6ad3b894"]]},{"id":"017223ba6ad3b894","type":"api-call-service","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"set brightness","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness","data":"{\"value\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2400,"y":1060,"wires":[[]]},{"id":"e3060135c6f87ef2","type":"change","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"time_fraction_cosine","rules":[{"t":"set","p":"time_fraction_cosine","pt":"msg","to":"time_fraction","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1500,"y":1140,"wires":[["95cf05bbeed3bd91"]]},{"id":"95cf05bbeed3bd91","type":"range","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","minin":"0","maxin":"1","minout":"0","maxout":"3.14159265359","action":"scale","round":false,"property":"time_fraction_cosine","name":"","x":1730,"y":1140,"wires":[["cdd4b1ac09073c0e"]]},{"id":"cdd4b1ac09073c0e","type":"calculator","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"","inputMsgField":"time_fraction_cosine","outputMsgField":"brightness_cosine","operation":"cos","constant":"","round":true,"decimals":"5","x":1920,"y":1140,"wires":[["083bf01f2db0f9a3"]]},{"id":"083bf01f2db0f9a3","type":"function","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"COSINE","func":"var result = 0.0;\n\nif (msg.time_fraction > 0.0 && msg.time_fraction < 1.0){\n    result = msg.brightness_min + msg.brightness_cosine * msg.brightness_diff;\n}else{\n    result = msg.brightness_min;\n}\nmsg.brightness = result;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2060,"y":1140,"wires":[["a685eca8e485888b"]]},{"id":"a685eca8e485888b","type":"api-call-service","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"set brightness","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness","data":"{\"value\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2400,"y":1140,"wires":[[]]},{"id":"be6c750e1539e262","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_VALLEY","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.032,"y":0.896},{"x":0.062,"y":0.986},{"x":0.135,"y":0.719},{"x":0.212,"y":0.586},{"x":0.502,"y":0.512},{"x":0.809,"y":0.576},{"x":0.875,"y":0.712},{"x":0.935,"y":0.986},{"x":0.965,"y":0.896},{"x":1,"y":0.5}],"x":1490,"y":1220,"wires":[["bcafbae0cc121aa8"]]},{"id":"d6b9149612c6b98c","type":"range","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","minin":"0","maxin":"1","minout":"0","maxout":"1","action":"clamp","round":false,"property":"brightness_spline","name":"","x":2030,"y":1200,"wires":[["f0d182e5eccc9dff"]]},{"id":"e034eefa31d5a615","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_PEAK_LEFT","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.082,"y":0.869},{"x":0.135,"y":0.992},{"x":0.219,"y":0.832},{"x":0.285,"y":0.636},{"x":0.389,"y":0.542},{"x":0.635,"y":0.512},{"x":1,"y":0.5}],"x":1500,"y":1300,"wires":[["bcafbae0cc121aa8"]]},{"id":"c05c57c718b218c4","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_PEAK_RIGHT","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.415,"y":0.519},{"x":0.579,"y":0.549},{"x":0.699,"y":0.642},{"x":0.785,"y":0.846},{"x":0.882,"y":0.986},{"x":0.942,"y":0.879},{"x":1,"y":0.5}],"x":1510,"y":1380,"wires":[["bcafbae0cc121aa8"]]},{"id":"36ba49678390f6f4","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_PEAK_MIDDLE","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.252,"y":0.526},{"x":0.369,"y":0.619},{"x":0.425,"y":0.749},{"x":0.509,"y":0.992},{"x":0.595,"y":0.752},{"x":0.662,"y":0.616},{"x":0.745,"y":0.546},{"x":1,"y":0.5}],"x":1510,"y":1340,"wires":[["bcafbae0cc121aa8"]]},{"id":"bf1b3591e951be10","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_PLATEAU_LEFT","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.049,"y":0.636},{"x":0.079,"y":0.802},{"x":0.142,"y":0.952},{"x":0.245,"y":0.992},{"x":0.375,"y":0.956},{"x":0.455,"y":0.819},{"x":0.499,"y":0.652},{"x":0.555,"y":0.559},{"x":0.692,"y":0.516},{"x":1,"y":0.5}],"x":1510,"y":1420,"wires":[["bcafbae0cc121aa8"]]},{"id":"e4bbe823468c4c75","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_PLATEAU_MIDDLE","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.189,"y":0.522},{"x":0.262,"y":0.622},{"x":0.309,"y":0.789},{"x":0.385,"y":0.942},{"x":0.502,"y":0.986},{"x":0.635,"y":0.906},{"x":0.675,"y":0.806},{"x":0.722,"y":0.622},{"x":0.809,"y":0.516},{"x":1,"y":0.5}],"x":1520,"y":1460,"wires":[["bcafbae0cc121aa8"]]},{"id":"d59196bde60a2848","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_PLATEAU_RIGHT","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.392,"y":0.519},{"x":0.479,"y":0.536},{"x":0.522,"y":0.616},{"x":0.545,"y":0.746},{"x":0.595,"y":0.882},{"x":0.755,"y":0.982},{"x":0.879,"y":0.959},{"x":0.959,"y":0.792},{"x":0.982,"y":0.649},{"x":1,"y":0.5}],"x":1520,"y":1500,"wires":[["bcafbae0cc121aa8"]]},{"id":"e5024bd9e374af6a","type":"spline-curve","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"SPLINE_VALLEY_NARROW","output_key":"brightness_spline","input_key":"time_fraction","points":[{"x":0,"y":0.5},{"x":0.035,"y":0.896},{"x":0.059,"y":0.969},{"x":0.122,"y":0.992},{"x":0.212,"y":0.992},{"x":0.289,"y":0.929},{"x":0.345,"y":0.746},{"x":0.395,"y":0.609},{"x":0.502,"y":0.516},{"x":0.619,"y":0.592},{"x":0.672,"y":0.749},{"x":0.705,"y":0.899},{"x":0.769,"y":0.986},{"x":0.855,"y":0.992},{"x":0.925,"y":0.986},{"x":0.962,"y":0.906},{"x":1,"y":0.5}],"x":1520,"y":1260,"wires":[["bcafbae0cc121aa8"]]},{"id":"cb347f05f5e8f151","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"!maintenance_mode?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":840,"y":920,"wires":[["27c4e2bf9699cc13"],[]]},{"id":"decc5dd354be0cd6","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"automation_main_active?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_main_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":830,"y":1000,"wires":[["fe9efe762c3c463a"],[]]},{"id":"210594d846d0dbb2","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"daylight automation?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_daylight_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":840,"y":860,"wires":[["cb347f05f5e8f151"],[]]},{"id":"7369df66c150c317","type":"inject","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":270,"y":800,"wires":[["b3dccdb71076fce5"]]},{"id":"1e7aeae3579cd872","type":"change","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":800,"wires":[["210594d846d0dbb2"]]},{"id":"b3dccdb71076fce5","type":"delay","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":630,"y":800,"wires":[["1e7aeae3579cd872"]]},{"id":"f6be39abae7fccae","type":"delay","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"5","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1070,"y":800,"wires":[["af86c3229d360ac0"]]},{"id":"cf4f938b469cc76d","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"day_start","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_datetime.pcs1_daytime_day_start","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":260,"y":840,"wires":[["a3c2642225d26285"]]},{"id":"bdaad57cf10763d8","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"day_end","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_datetime.pcs1_daytime_day_end","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":260,"y":880,"wires":[["a3c2642225d26285"]]},{"id":"7aecb92978aa8b08","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"automation_daylight_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_daylight_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":200,"y":920,"wires":[["a3c2642225d26285"]]},{"id":"cbfd310bd09f67be","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"white_brightness_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"pcs1_led_white_brightness_min","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1060,"wires":[["00237a27c967eedf"]]},{"id":"922b2bd6c898268f","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"white_brightness_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_white_brightness_max","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1100,"wires":[["00237a27c967eedf"]]},{"id":"1765386fddcc2c4c","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"white_daylight_function","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_select.pcs1_led_white_daylight_function","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":1140,"wires":[["00237a27c967eedf"]]},{"id":"01f6ec0d64e99630","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"maintenance","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_mode_maintenance_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":250,"y":960,"wires":[[]]},{"id":"f279070d697c4abd","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"automation_main","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_main_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":230,"y":1000,"wires":[["a3c2642225d26285"]]},{"id":"1420293998f1b1b3","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"blue_brightness_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_blue_brightness_min","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1320,"wires":[["ebb60c1c61efe5bd"]]},{"id":"1cbe91a0dfc70688","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"blue_brightness_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_blue_brightness_max","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1360,"wires":[["ebb60c1c61efe5bd"]]},{"id":"deca50aadc9879df","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"blue_daylight_function","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_select.pcs1_led_blue_daylight_function","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1400,"wires":[["ebb60c1c61efe5bd"]]},{"id":"b1da5f62a3c466fd","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"red_daylight_function","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_select.pcs1_led_red_daylight_function","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1260,"wires":[["479ef872e788f41e"]]},{"id":"264fcf65fa185265","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"red_brightness_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_red_brightness_max","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1220,"wires":[["479ef872e788f41e"]]},{"id":"49aa2a52c4111675","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"red_brightness_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_red_brightness_min","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":230,"y":1180,"wires":[["479ef872e788f41e"]]},{"id":"57f4b3cbf6dd98fa","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"green_brightness_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_green_brightness_min","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1460,"wires":[["21fccd4a97536344"]]},{"id":"961ff7f717ef33fc","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"green_brightness_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_green_brightness_max","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1500,"wires":[["21fccd4a97536344"]]},{"id":"a4a35d751457eaca","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"green_daylight_function","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_select.pcs1_led_green_daylight_function","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":1540,"wires":[["21fccd4a97536344"]]},{"id":"2a54c77f1942de5b","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"uv_brightness_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_uv_brightness_min","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":230,"y":1600,"wires":[["54d7708df168952c"]]},{"id":"036dad166d1b4159","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"uv_brightness_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_uv_brightness_max","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":230,"y":1640,"wires":[["54d7708df168952c"]]},{"id":"42a970a24c42776b","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"uv_daylight_function","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_select.pcs1_led_uv_daylight_function","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1680,"wires":[["54d7708df168952c"]]},{"id":"5f5ae0d709e125f3","type":"api-current-state","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"daylength","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_datetime.{{pcs}}_daytime_day_length","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"day_length","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":780,"y":580,"wires":[["8372558ac9162d14"]]},{"id":"8372558ac9162d14","type":"function","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"seconds","func":"var day_length = msg.day_length.split(\":\")\nvar day_length_seconds = (day_length[0] * 60) * 60 + (day_length[1] * 60)\n\nmsg.day_length_s = day_length_seconds;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":580,"wires":[["c73c4d3f691dcd59"]]},{"id":"c73c4d3f691dcd59","type":"function","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"calc day_startend","func":"var day_length = msg.day_length_s;\nvar day_mid = 60 * 60 * 12;\nvar day_start = Math.round(day_mid - day_length / 2.0);\nvar day_end = Math.round(day_mid + day_length / 2.0);\n\nmsg.day_start_s = day_start;\nmsg.day_end_s = day_end;\nmsg.day_start_ms = day_start * 1000;\nmsg.day_end_ms = day_end * 1000;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1150,"y":580,"wires":[["5497e7a85a5d4654"]]},{"id":"5497e7a85a5d4654","type":"moment","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"","topic":"","input":"day_start_ms","inputType":"msg","inTz":"Europe/Berlin","adjAmount":"0","adjType":"hours","adjDir":"subtract","format":"","locale":"Berlin","output":"day_start_string","outputType":"msg","outTz":"Europe/Berlin","x":1400,"y":580,"wires":[["aea71149ca4b79aa"]]},{"id":"aea71149ca4b79aa","type":"moment","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"","topic":"","input":"day_end_ms","inputType":"msg","inTz":"Europe/Berlin","adjAmount":"0","adjType":"hours","adjDir":"subtract","format":"","locale":"Berlin","output":"day_end_string","outputType":"msg","outTz":"Europe/Berlin","x":1660,"y":580,"wires":[["20696e0ce9df07f5"]]},{"id":"20696e0ce9df07f5","type":"function","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"HH:MM:SS","func":"var tmp = msg.day_start_string.split(\"T\")[1].split(\".\");\nvar day_start_hh_mm_ss = tmp[0];\n\nvar tmp = msg.day_end_string.split(\"T\")[1].split(\".\");\nvar day_end_hh_mm_ss = tmp[0];\n\nmsg.day_start_hh_mm_ss = day_start_hh_mm_ss;\nmsg.day_end_hh_mm_ss = day_end_hh_mm_ss;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1870,"y":580,"wires":[["6cb6919a78ecf2e1","4b747eb510fcae82","5924c2047bac91f0"]]},{"id":"6cb6919a78ecf2e1","type":"api-call-service","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"set day_start","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_datetime","service":"set_datetime","entityId":"input_datetime.{{pcs}}_daytime_day_start","data":"{\"time\": msg.day_start_hh_mm_ss}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2090,"y":480,"wires":[[]]},{"id":"4b747eb510fcae82","type":"api-call-service","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"set day_end","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_datetime","service":"set_datetime","entityId":"input_datetime.{{pcs}}_daytime_day_end","data":"{\"time\": msg.day_end_hh_mm_ss}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":2110,"y":600,"wires":[[]]},{"id":"5924c2047bac91f0","type":"debug","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"debug 14","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1900,"y":640,"wires":[]},{"id":"eedb5a81d7fa23ba","type":"inject","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"","payloadType":"date","x":250,"y":440,"wires":[["59e10d8ec1f02837"]]},{"id":"59e10d8ec1f02837","type":"change","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":480,"wires":[["674a6478d9931d4e"]]},{"id":"4b461e4b418822e6","type":"api-current-state","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"!maintenance_mode?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":480,"y":540,"wires":[["eb60fad939428a0b"],[]]},{"id":"eb60fad939428a0b","type":"api-current-state","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"automation_main_active?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_main_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":470,"y":600,"wires":[["b478057eb616670c"],[]]},{"id":"b478057eb616670c","type":"api-current-state","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"daystartend","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_daystartend_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":510,"y":640,"wires":[["b9e2f4902ffd88c5","5f5ae0d709e125f3"],[]]},{"id":"b9e2f4902ffd88c5","type":"debug","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"debug 15","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":720,"y":660,"wires":[]},{"id":"b3a20e975f9061c9","type":"server-state-changed","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"day_length","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_datetime.pcs1_daytime_day_length","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":230,"y":480,"wires":[["59e10d8ec1f02837"]]},{"id":"674a6478d9931d4e","type":"delay","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":530,"y":480,"wires":[["4b461e4b418822e6"]]},{"id":"9bd09c8e087e2e39","type":"server-state-changed","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"automation_daystartend","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_daystartend_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":540,"wires":[["59e10d8ec1f02837"]]},{"id":"b5a0a6614a37d4d9","type":"server-state-changed","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"maintenance","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_mode_maintenance_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":230,"y":580,"wires":[["59e10d8ec1f02837"]]},{"id":"3e4c51a5866cf87c","type":"server-state-changed","z":"6c2304a77d361b80","g":"8cb7deb87cbc2851","name":"automation_main","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_main_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":620,"wires":[["59e10d8ec1f02837"]]},{"id":"fb82010ad8c698d2","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"White_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"light","service":"turn_on","entityId":"light.{{pcs}}_pwm_cc_a_1_white, light.{{pcs}}_pwm_cc_a_2_white","data":"{\"brightness\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":3860,"y":1920,"wires":[[]]},{"id":"0ba3d0b861519d55","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_white_camera_mode","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_white_brightness_camera_mode","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1540,"y":1960,"wires":[["c02f7c0809254d4a"]]},{"id":"b3a09943a46b7bb8","type":"range","z":"6c2304a77d361b80","g":"fe1035315dc798e0","minin":"0","maxin":"100","minout":"0","maxout":"255","action":"clamp","round":true,"property":"brightness","name":"","x":3600,"y":1920,"wires":[["fb82010ad8c698d2"]]},{"id":"fea461457d30c66d","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"All_off","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"switch","service":"turn_off","entityId":"switch.pcs1_pwm_cc_a_switch, switch.pcs1_led1_cc_switch, switch.pcs1_led2_cc_switch, switch.pcs1_led3_cc_switch, switch.pcs1_led4_cc_switch","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1450,"y":1880,"wires":[[]]},{"id":"14e9f644eaa9854b","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_red","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_red_brightness","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":2000,"wires":[["e3b950f44aa1667c"]]},{"id":"9383ab4d307c8b74","type":"range","z":"6c2304a77d361b80","g":"fe1035315dc798e0","minin":"0","maxin":"100","minout":"0","maxout":"255","action":"clamp","round":true,"property":"brightness","name":"","x":3600,"y":2000,"wires":[["ca5da5cdf6669106"]]},{"id":"221d607e57a4eec9","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red_660nm_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"light","service":"turn_on","entityId":"light.{{pcs}}_led1_cc_b_1_660nm, light.{{pcs}}_led1_cc_b_2_660nm, light.{{pcs}}_led1_cc_b_3_660nm, light.{{pcs}}_led1_cc_b_4_660nm","data":"{\"brightness\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":3880,"y":1960,"wires":[[]]},{"id":"163bc989c0cbd973","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red_630nm_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"light","service":"turn_on","entityId":"light.{{pcs}}_led2_cc_a_1_630nm, light.{{pcs}}_led2_cc_a_2_630nm, light.{{pcs}}_led2_cc_a_3_630nm, light.{{pcs}}_led2_cc_a_4_630nm, light.{{pcs}}_led2_cc_b_1_630nm, light.{{pcs}}_led2_cc_b_2_630nm, light.{{pcs}}_led2_cc_b_3_630nm, light.{{pcs}}_led2_cc_b_4_630nm","data":"{\"brightness\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":3880,"y":2000,"wires":[[]]},{"id":"6a6e41e7ea98d3f4","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red_730nm_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"light","service":"turn_on","entityId":"light.{{pcs}}_led1_cc_a_1_730nm, light.{{pcs}}_led1_cc_a_2_730nm, light.{{pcs}}_led1_cc_a_3_730nm, light.{{pcs}}_led1_cc_a_4_730nm","data":"{\"brightness\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":3880,"y":2040,"wires":[[]]},{"id":"e6deee08b29fc990","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red_butterfly_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"light","service":"turn_on","entityId":"light.{{pcs}}_led3_cc_a_1_butterfly, light.{{pcs}}_led3_cc_a_3_butterfly, light.{{pcs}}_led3_cc_a_4_butterfly","data":"{\"brightness\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":3880,"y":2080,"wires":[[]]},{"id":"43cdb00178fe7cc1","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_white","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_white_brightness","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1490,"y":1920,"wires":[["8e7556d39277456c"]]},{"id":"8cc11108ca19a42a","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_red_camera_mode","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_red_brightness_camera_mode","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1530,"y":2040,"wires":[["c293608ef26c5928"]]},{"id":"6a0cfd5a8ac67a4e","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"blue_450nm_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"light","service":"turn_on","entityId":"light.{{pcs}}_led4_cc_a_1_450nm, light.{{pcs}}_led4_cc_a_2_450nm, light.{{pcs}}_led4_cc_a_3_450nm, light.{{pcs}}_led4_cc_a_4_450nm, light.{{pcs}}_led3_cc_a_2_butterfly","data":"{\"brightness\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":3890,"y":2140,"wires":[[]]},{"id":"f6311c587b76e10c","type":"range","z":"6c2304a77d361b80","g":"fe1035315dc798e0","minin":"0","maxin":"100","minout":"0","maxout":"255","action":"clamp","round":true,"property":"brightness","name":"","x":3600,"y":2080,"wires":[["6a0cfd5a8ac67a4e"]]},{"id":"5dd8d63fb2037396","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_blue","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_blue_brightness","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1490,"y":2080,"wires":[["ce11681074ff9b0b"]]},{"id":"67e66918e8c10b56","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_blue_camera_mode","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_blue_brightness_camera_mode","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1540,"y":2120,"wires":[["4d6932b42438da36"]]},{"id":"138f3b1a7ff7fb4e","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"green_520nm_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"light","service":"turn_on","entityId":"light.{{pcs}}_pwm_cc_a_3_520nm","data":"{\"brightness\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":3890,"y":2200,"wires":[[]]},{"id":"f3224783b785bf13","type":"range","z":"6c2304a77d361b80","g":"fe1035315dc798e0","minin":"0","maxin":"100","minout":"0","maxout":"255","action":"clamp","round":true,"property":"brightness","name":"","x":3600,"y":2160,"wires":[["138f3b1a7ff7fb4e"]]},{"id":"6c5498373f8a259e","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_green_camera_mode","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_green_brightness_camera_mode","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1540,"y":2200,"wires":[["0ee9b79f8f300454"]]},{"id":"7311a8a12909a06a","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_green","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_green_brightness","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1490,"y":2160,"wires":[["cb69d58f30f836cf"]]},{"id":"64c759e07c439f7c","type":"api-call-service","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"uv_280nm_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"light","service":"turn_on","entityId":"light.{{pcs}}_led4_cc_b_3_280nm, light.{{pcs}}_led4_cc_b_4_280nm","data":"{\"brightness\": {{brightness}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":3880,"y":2260,"wires":[[]]},{"id":"8146bba8bbe99445","type":"range","z":"6c2304a77d361b80","g":"fe1035315dc798e0","minin":"0","maxin":"100","minout":"0","maxout":"255","action":"clamp","round":true,"property":"brightness","name":"","x":3600,"y":2220,"wires":[["64c759e07c439f7c"]]},{"id":"c54c03bcac30ed44","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_uv_camera_mode","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_uv_brightness_camera_mode","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1530,"y":2280,"wires":[["ac589db0da458bfa"]]},{"id":"0a8ce9bc98bb56d5","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"brightness_uv","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_uv_brightness","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"brightness","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":2240,"wires":[["7e8353a0eb5c8d5f"]]},{"id":"283cf585f5cfc725","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_camera_mode_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":1960,"wires":[["61150eebb5efa74f"],["4b98bff6d5306df2"]]},{"id":"95ab6f9ba36cd00c","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_camera_mode_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":2040,"wires":[["182db0a1c6dbc858"],["b9fcd5f68019ca40"]]},{"id":"fb41c0125a6f8b52","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_camera_mode_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":2120,"wires":[["a876ede498158194"],["4b25efcef9cad0b5"]]},{"id":"f7d3e2175c10009a","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_camera_mode_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":2200,"wires":[["76f0b6013cb19be7"],["48b03eb9e43876b4"]]},{"id":"6e1329267cb211a7","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_camera_mode_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":2280,"wires":[["63374ebf919b41a4"],["058beba00dd6bb12"]]},{"id":"c7cf5b819324165c","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"UV enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_uv_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2810,"y":2220,"wires":[["c208beec026ae315"],["0c88717393e4629e"]]},{"id":"b0225f871664421e","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"led_enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"led_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2260,"y":2240,"wires":[["c7cf5b819324165c"],["74092c6544dbb67a"]]},{"id":"d32cf281cf06032c","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"led_enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"led_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2260,"y":2160,"wires":[["9a2c74c6bbbc716b"],["79f6b84412d87738"]]},{"id":"6215051ba83240ed","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"led_enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"led_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2260,"y":2080,"wires":[["89bd3dc12aec428b"],["97f3cdc418ade4b4"]]},{"id":"3eb4b97be1ced555","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"led_enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"led_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2260,"y":2000,"wires":[["20506b4bbb33dd94"],["a8011174b48de6a5"]]},{"id":"0bdd9f0a4a386ccd","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"led_enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"led_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2260,"y":1920,"wires":[["dadc7f0900357a47"],["b65e7ec6b647f8b3"]]},{"id":"0c88717393e4629e","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"off","rules":[{"t":"set","p":"brightness","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2970,"y":2260,"wires":[["c208beec026ae315"]]},{"id":"815e7220f354fb42","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"off","rules":[{"t":"set","p":"brightness","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2790,"y":2120,"wires":[["9a2c74c6bbbc716b"]]},{"id":"c68ed1c02008de01","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"off","rules":[{"t":"set","p":"brightness","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2790,"y":2040,"wires":[["89bd3dc12aec428b"]]},{"id":"ce262c84b8caa18e","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"off","rules":[{"t":"set","p":"brightness","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2790,"y":1960,"wires":[["20506b4bbb33dd94"]]},{"id":"d23843a2b4cd1f84","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"off","rules":[{"t":"set","p":"brightness","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2790,"y":1860,"wires":[["dadc7f0900357a47"]]},{"id":"027d3d81487b9335","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":2240,"wires":[["63374ebf919b41a4"],["058beba00dd6bb12"]]},{"id":"bada2d2c233c2858","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"white","rules":[{"t":"set","p":"color","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":1920,"wires":[["4bdbc09b36ac0a66"]]},{"id":"ea91b79e8389397a","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red","rules":[{"t":"set","p":"color","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2000,"wires":[["35704879e43daa60"]]},{"id":"c02f7c0809254d4a","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"white","rules":[{"t":"set","p":"color","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":1960,"wires":[["283cf585f5cfc725"]]},{"id":"c293608ef26c5928","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red","rules":[{"t":"set","p":"color","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2040,"wires":[["95ab6f9ba36cd00c"]]},{"id":"f8c745ccc1e14a1c","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"green","rules":[{"t":"set","p":"color","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2160,"wires":[["2182e50928063704"]]},{"id":"0ee9b79f8f300454","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"green","rules":[{"t":"set","p":"color","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2200,"wires":[["f7d3e2175c10009a"]]},{"id":"c6a834dba431d100","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"uv","rules":[{"t":"set","p":"color","pt":"msg","to":"uv","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2240,"wires":[["027d3d81487b9335"]]},{"id":"ac589db0da458bfa","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"uv","rules":[{"t":"set","p":"color","pt":"msg","to":"uv","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2280,"wires":[["6e1329267cb211a7"]]},{"id":"b3850da6a7fc4695","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"blue","rules":[{"t":"set","p":"color","pt":"msg","to":"blue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2080,"wires":[["c9471a0c644a021a"]]},{"id":"4d6932b42438da36","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"blue","rules":[{"t":"set","p":"color","pt":"msg","to":"blue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1810,"y":2120,"wires":[["fb41c0125a6f8b52"]]},{"id":"2182e50928063704","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":2160,"wires":[["76f0b6013cb19be7"],["48b03eb9e43876b4"]]},{"id":"c9471a0c644a021a","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":2080,"wires":[["a876ede498158194"],["4b25efcef9cad0b5"]]},{"id":"35704879e43daa60","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":2000,"wires":[["182db0a1c6dbc858"],["b9fcd5f68019ca40"]]},{"id":"4bdbc09b36ac0a66","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_{{color}}_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1980,"y":1920,"wires":[["61150eebb5efa74f"],["4b98bff6d5306df2"]]},{"id":"406c8b69f51d6a55","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"safety_factor","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_power_safety_factor","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"safety_factor","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":3290,"y":1920,"wires":[["1ff7f4bad879a2c9"]]},{"id":"1ff7f4bad879a2c9","type":"function","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"mult","func":"msg.brightness = msg.brightness * msg.safety_factor;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3450,"y":1920,"wires":[["b3a09943a46b7bb8"]]},{"id":"66b3ee41cf4c0b9e","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"safety_factor","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_power_safety_factor","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"safety_factor","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":3290,"y":2000,"wires":[["cc76c1cefc26a2b4"]]},{"id":"cc76c1cefc26a2b4","type":"function","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"mult","func":"msg.brightness = msg.brightness * msg.safety_factor;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3450,"y":2000,"wires":[["9383ab4d307c8b74"]]},{"id":"f0d34e5b5a8a21eb","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"safety_factor","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_power_safety_factor","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"safety_factor","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":3290,"y":2080,"wires":[["41d437038e5c04ea"]]},{"id":"41d437038e5c04ea","type":"function","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"mult","func":"msg.brightness = msg.brightness * msg.safety_factor;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3450,"y":2080,"wires":[["f6311c587b76e10c"]]},{"id":"cd18a6c73f1b0e6a","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"safety_factor","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_power_safety_factor","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"safety_factor","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":3290,"y":2160,"wires":[["68e1f4c8bbc2dba1"]]},{"id":"68e1f4c8bbc2dba1","type":"function","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"mult","func":"msg.brightness = msg.brightness * msg.safety_factor;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3450,"y":2160,"wires":[["f3224783b785bf13"]]},{"id":"0782d29e5df3367c","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"safety_factor","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_power_safety_factor","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"safety_factor","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":3290,"y":2220,"wires":[["6bdd938b989ac798"]]},{"id":"6bdd938b989ac798","type":"function","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"mult","func":"msg.brightness = msg.brightness * msg.safety_factor;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3450,"y":2220,"wires":[["8146bba8bbe99445"]]},{"id":"3511eb942b05dabc","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"!maintenance?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2540,"y":1940,"wires":[["d23843a2b4cd1f84"],["dadc7f0900357a47"]]},{"id":"2b729516132bbec8","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"!maintenance?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2540,"y":2020,"wires":[["ce262c84b8caa18e"],["20506b4bbb33dd94"]]},{"id":"06c19c58a6872b4c","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"!maintenance?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2540,"y":2100,"wires":[["c68ed1c02008de01"],["89bd3dc12aec428b"]]},{"id":"5a310592fb6ab221","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"!maintenance?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2540,"y":2180,"wires":[["815e7220f354fb42"],["9a2c74c6bbbc716b"]]},{"id":"d45c88f902805414","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"!maintenance?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2540,"y":2260,"wires":[["0c88717393e4629e"],["c7cf5b819324165c"]]},{"id":"e93c0b7c204f54af","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"camera_mode?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_camera_mode_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":980,"y":1980,"wires":[["d776bbafa5cc71d7"],["32a8f53ec33ddf46"]]},{"id":"f84492bde5f3dc99","type":"delay","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"4","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":330,"y":1860,"wires":[["8c689d2a3e5f1a94"]]},{"id":"3dda1aedc4bb2e54","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"automation_led?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_led_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"automation_led","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1050,"y":1840,"wires":[["340ea6da4520c27d"],["e93c0b7c204f54af"]]},{"id":"a6fceecab9390a4b","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"automation_main?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_main_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"automation_main","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":850,"y":1860,"wires":[["3dda1aedc4bb2e54"],["e93c0b7c204f54af"]]},{"id":"8c689d2a3e5f1a94","type":"change","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":1860,"wires":[["ea82d1b60f274740"]]},{"id":"ea82d1b60f274740","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"!maintenance_mode?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is_not","entity_id":"input_boolean.{{pcs}}_mode_maintenance_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"maintenance_mode","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":620,"y":1860,"wires":[["a6fceecab9390a4b"],["bfa42af1815f3079"]]},{"id":"340ea6da4520c27d","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"day?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_daytime_day_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"day","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1250,"y":1840,"wires":[["e93c0b7c204f54af"],["fea461457d30c66d","ff2c7579a65290be"]]},{"id":"6b66e1a30f0a0cf7","type":"inject","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"","payloadType":"date","x":190,"y":1840,"wires":[["f84492bde5f3dc99"]]},{"id":"9acd9d9d4b0f8dc8","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"led_enabled","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_enabled","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":2040,"wires":[["ed716cab95e82f70"]]},{"id":"403cb6aa1625b873","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"white","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_white_brightness","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":2160,"wires":[["e5f9f0c7d9bdc8f8"]]},{"id":"72b8d51bc7109482","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"maintenance","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_mode_maintenance_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":1920,"wires":[["ed716cab95e82f70"]]},{"id":"38f6a0b76339dbc9","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"automation_main","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_main_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":1960,"wires":[["ed716cab95e82f70"]]},{"id":"0f86837e71513667","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"blue","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_blue_brightness","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":2200,"wires":[["e5f9f0c7d9bdc8f8"]]},{"id":"350d5349a3688f2e","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"green","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_green_brightness","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":2240,"wires":[["e5f9f0c7d9bdc8f8"]]},{"id":"e43470ad50e29bd8","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"uv","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_uv_brightness","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":2280,"wires":[["e5f9f0c7d9bdc8f8"]]},{"id":"f4214041af3117ab","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_red_brightness","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":2320,"wires":[["e5f9f0c7d9bdc8f8"]]},{"id":"4deed3a64d543dc6","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"safety_factor","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_power_safety_factor","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":2080,"wires":[["ed716cab95e82f70"]]},{"id":"29b385b28fcd25d8","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"automation_led","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_led_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":2000,"wires":[["ed716cab95e82f70"]]},{"id":"460b3cf2c9d55f95","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"camera_mode","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_camera_mode_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":2120,"wires":[["ed716cab95e82f70"]]},{"id":"c7fbc6602dd42789","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"uv_enabled","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_uv_enabled","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":2360,"wires":[["e5f9f0c7d9bdc8f8"]]},{"id":"b5713b69ca864b16","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"white_camera","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_white_brightness_camera_mode","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":2420,"wires":[["de26ba509786ccd9"]]},{"id":"0f75ec7cdc71cf2e","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"blue_camera","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_blue_brightness_camera_mode","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":2460,"wires":[["de26ba509786ccd9"]]},{"id":"f18df80d32b61e7d","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"green_camera","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_green_brightness_camera_mode","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":200,"y":2500,"wires":[["de26ba509786ccd9"]]},{"id":"89dcbdf915948bec","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"uv_camera","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_uv_brightness_camera_mode","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":2540,"wires":[["de26ba509786ccd9"]]},{"id":"b7803a57c4f75665","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red_camera","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_red_brightness_camera_mode","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":2580,"wires":[["de26ba509786ccd9"]]},{"id":"cf027065c7627374","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"white_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_white_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":530,"y":2360,"wires":[["cd76f256782e7490"]]},{"id":"3b787aeaaf5ffe5a","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"white_camera_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_white_camera_mode_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":560,"y":2100,"wires":[["e0859806cfc83320"]]},{"id":"3ffd0895f03766f0","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"blue_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_blue_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":530,"y":2400,"wires":[["cd76f256782e7490"]]},{"id":"7f78cd0d8879dcc9","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"blue_camera_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_blue_camera_mode_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":550,"y":2180,"wires":[["e0859806cfc83320"]]},{"id":"1370b9dd84b1c1b2","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"uv_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_uv_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":520,"y":2480,"wires":[["cd76f256782e7490"]]},{"id":"b5a99d67f8c63e6e","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"green_camera_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_green_camera_mode_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":560,"y":2220,"wires":[["e0859806cfc83320"]]},{"id":"e62bbce11942e8f7","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red_camera_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_red_camera_mode_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":550,"y":2260,"wires":[["e0859806cfc83320"]]},{"id":"8eb06aef12baaca8","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"red_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_red_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":520,"y":2520,"wires":[["cd76f256782e7490"]]},{"id":"28ad279d78ba4637","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"green_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_green_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":530,"y":2440,"wires":[["cd76f256782e7490"]]},{"id":"b81a6714d257b8ea","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"uv_camera_active","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_uv_camera_mode_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":550,"y":2140,"wires":[["e0859806cfc83320"]]},{"id":"aeb8844a7cf36822","type":"server-state-changed","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"automation_camera","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_camera_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":1880,"wires":[["ed716cab95e82f70"]]},{"id":"27c4e2bf9699cc13","type":"api-current-state","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"automation_led?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_led_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"automation_led","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":850,"y":960,"wires":[["decc5dd354be0cd6"],[]]},{"id":"ee93c9d82eeb75cc","type":"server-state-changed","z":"6c2304a77d361b80","g":"1620ec042e6a36cf","name":"automation_led","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_led_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":1020,"wires":[["a3c2642225d26285"]]},{"id":"ff2c7579a65290be","type":"api-current-state","z":"6c2304a77d361b80","g":"fe1035315dc798e0","name":"camera_mode?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_camera_mode_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":1800,"wires":[["d776bbafa5cc71d7"],["fea461457d30c66d"]]},{"id":"d3e992b454b19cfd","type":"subflow:d2fb9f710e7a6826","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":2310,"y":2680,"wires":[["202cbf58869e889b"]]},{"id":"a05a06a21f46661e","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":true,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2720,"y":2680,"wires":[[]]},{"id":"21cb1d283508a226","type":"subflow:d2fb9f710e7a6826","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":2310,"y":2740,"wires":[["097c8a79d0f8282b"]]},{"id":"3cfd0b2693a31021","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2720,"y":2740,"wires":[[]]},{"id":"2b2d3213a49a1311","type":"subflow:d2fb9f710e7a6826","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":2310,"y":2800,"wires":[["1c57d09efa5007a0"]]},{"id":"d6e2c81e52f96c28","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2720,"y":2800,"wires":[[]]},{"id":"60aed97cce689e32","type":"subflow:d2fb9f710e7a6826","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":2310,"y":2860,"wires":[["9c84216de2a4e609"]]},{"id":"832a8a412d3c4984","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2720,"y":2860,"wires":[[]]},{"id":"28ee94dc703bed85","type":"subflow:d2fb9f710e7a6826","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":2310,"y":2920,"wires":[["1fa012e3cfed2f17"]]},{"id":"0c8f9cd23a7a29e8","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2720,"y":2920,"wires":[[]]},{"id":"e49a44efef0b25c4","type":"subflow:d2fb9f710e7a6826","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":2310,"y":2980,"wires":[["18422b88f225298b"]]},{"id":"9318777bc0a58ddb","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & plant_name & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2720,"y":2980,"wires":[[]]},{"id":"aaee11faa48320f6","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & global_angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":2720,"y":3040,"wires":[[]]},{"id":"d065d3577d31bce9","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2110,"y":2680,"wires":[["d3e992b454b19cfd"]]},{"id":"4482ef9d7204f2c1","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2110,"y":2740,"wires":[["21cb1d283508a226"]]},{"id":"df82764698faf548","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2110,"y":2800,"wires":[["2b2d3213a49a1311"]]},{"id":"0938d6e94292ce94","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2110,"y":2860,"wires":[["60aed97cce689e32"]]},{"id":"b87797f2846538a4","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2110,"y":2920,"wires":[["28ee94dc703bed85"]]},{"id":"4fcb5d3d961528ec","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2110,"y":2980,"wires":[["e49a44efef0b25c4"]]},{"id":"202cbf58869e889b","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2490,"y":2680,"wires":[["a05a06a21f46661e"]]},{"id":"097c8a79d0f8282b","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2490,"y":2740,"wires":[["3cfd0b2693a31021"]]},{"id":"1c57d09efa5007a0","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2490,"y":2800,"wires":[["d6e2c81e52f96c28"]]},{"id":"9c84216de2a4e609","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2490,"y":2860,"wires":[["832a8a412d3c4984"]]},{"id":"1fa012e3cfed2f17","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2490,"y":2920,"wires":[["0c8f9cd23a7a29e8"]]},{"id":"18422b88f225298b","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"plant_name","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_text.{{pcs}}_{{plant}}_name","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"plant_name","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":2490,"y":2980,"wires":[["9318777bc0a58ddb"]]},{"id":"da071124d891f659","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"led_camera_mode_off","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_boolean","service":"turn_off","entityId":"input_boolean.{{pcs}}_led_camera_mode_active","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1400,"y":3100,"wires":[["7fa5d749b5b2db01"]]},{"id":"b9e79777a83131a5","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cam1","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2680,"wires":[["771dee6535e2642c"]]},{"id":"305d59de30584936","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cam2","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2740,"wires":[["d6b348fe59afd606"]]},{"id":"a1204ea828693cba","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cam3","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2800,"wires":[["693bc9c50b29301f"]]},{"id":"2302e81365d1cfb6","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cam4","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2860,"wires":[["7c3a19434ae4e8c0"]]},{"id":"8f6cc852c3668504","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cam5","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2920,"wires":[["89b1afd1b54fb512"]]},{"id":"9e7ec1c836105d60","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cam6","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":2980,"wires":[["60f258a7a1268a5f"]]},{"id":"504e167e79629284","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cam7","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350,"y":3040,"wires":[["9c9f13a9a5e843c5"]]},{"id":"388f4365abcbb540","type":"subflow:d2fb9f710e7a6826","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":1770,"y":3040,"wires":[["aaee11faa48320f6"]]},{"id":"f1f66389f61b4d36","type":"subflow:6c80f1ca0dd2938f","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":1760,"y":2680,"wires":[["26d28fd2d514a6b0"]]},{"id":"7031130376f7c3cc","type":"subflow:6c80f1ca0dd2938f","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":1760,"y":2740,"wires":[["a236273c16976832"]]},{"id":"74bfc8a0044512f8","type":"subflow:6c80f1ca0dd2938f","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":1760,"y":2800,"wires":[["b7a56701cd03bd6d"]]},{"id":"773c92490d2f4826","type":"subflow:6c80f1ca0dd2938f","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":1760,"y":2860,"wires":[["3f6a1ff4586b3b58"]]},{"id":"4e2c2cbd288fedad","type":"subflow:6c80f1ca0dd2938f","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":1760,"y":2920,"wires":[["de39656a7c1907f6"]]},{"id":"871f6de77f14b508","type":"subflow:6c80f1ca0dd2938f","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":1760,"y":2980,"wires":[["815d28f9afbd6e1d"]]},{"id":"771dee6535e2642c","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":2680,"wires":[["6abb78b1969b6a45"]]},{"id":"6abb78b1969b6a45","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1610,"y":2680,"wires":[["f1f66389f61b4d36"]]},{"id":"d6b348fe59afd606","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":2740,"wires":[["a4355dbc69df502b"]]},{"id":"a4355dbc69df502b","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1610,"y":2740,"wires":[["7031130376f7c3cc"]]},{"id":"693bc9c50b29301f","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":2800,"wires":[["c8b32b4d5b199cca"]]},{"id":"c8b32b4d5b199cca","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1610,"y":2800,"wires":[["74bfc8a0044512f8"]]},{"id":"7c3a19434ae4e8c0","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":2860,"wires":[["a5672204c699910c"]]},{"id":"a5672204c699910c","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1610,"y":2860,"wires":[["773c92490d2f4826"]]},{"id":"89b1afd1b54fb512","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":2920,"wires":[["437fd59bde47b12a"]]},{"id":"437fd59bde47b12a","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1610,"y":2920,"wires":[["4e2c2cbd288fedad"]]},{"id":"60f258a7a1268a5f","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":2980,"wires":[["1896a27b76728349"]]},{"id":"1896a27b76728349","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1610,"y":2980,"wires":[["871f6de77f14b508"]]},{"id":"9c9f13a9a5e843c5","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{cam}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1480,"y":3040,"wires":[["228e8a6e2a8fb4e3"]]},{"id":"228e8a6e2a8fb4e3","type":"switch","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","property":"camera_enabled","propertyType":"msg","rules":[{"t":"eq","v":"on","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1610,"y":3040,"wires":[["388f4365abcbb540"]]},{"id":"26d28fd2d514a6b0","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1920,"y":2680,"wires":[["d065d3577d31bce9"]]},{"id":"a236273c16976832","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1920,"y":2740,"wires":[["4482ef9d7204f2c1"]]},{"id":"b7a56701cd03bd6d","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1920,"y":2800,"wires":[["df82764698faf548"]]},{"id":"3f6a1ff4586b3b58","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1920,"y":2860,"wires":[["0938d6e94292ce94"]]},{"id":"de39656a7c1907f6","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1920,"y":2920,"wires":[["b87797f2846538a4"]]},{"id":"815d28f9afbd6e1d","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_{{plant}}_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"camera_enabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1920,"y":2980,"wires":[["4fcb5d3d961528ec"]]},{"id":"7fa5d749b5b2db01","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"camera_sequence_off","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_boolean","service":"turn_off","entityId":"input_boolean.{{pcs}}_camera_sequence","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1400,"y":3160,"wires":[[]]},{"id":"5c76b9d948d8cf93","type":"subflow:01e96d9e32906378","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"","x":900,"y":2800,"wires":[["c9ce0c8b7db1810e"]]},{"id":"4f8df11a16b34a98","type":"delay","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"delay","pauseType":"delay","timeout":"20","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1170,"y":3060,"wires":[["da071124d891f659"]]},{"id":"1b360ceb51b0d1aa","type":"api-call-service","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"led_camera_mode_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_boolean","service":"turn_on","entityId":"input_boolean.{{pcs}}_led_camera_mode_active","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":920,"y":2960,"wires":[["96e1478622d58827"]]},{"id":"96e1478622d58827","type":"delay","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"delay","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1030,"y":2860,"wires":[["4f8df11a16b34a98","112a1360670b7d32"]]},{"id":"f7599daa58d19b50","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cameras_enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":600,"y":2900,"wires":[["bc1c8ea91b2c58c2"],["b9881b6644758d71"]]},{"id":"5047e97461550f17","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"camera_sequence?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_camera_sequence","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":600,"y":2840,"wires":[["f7599daa58d19b50"],[]]},{"id":"80e2c0b3c6a98395","type":"delay","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":2900,"wires":[["0b3b5a47044aa868"]]},{"id":"d646788927b30eb6","type":"server-state-changed","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"camera_sequence","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_camera_sequence","entityidfiltertype":"exact","outputinitially":true,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":2860,"wires":[["80e2c0b3c6a98395"]]},{"id":"30488744fb419d97","type":"server-state-changed","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cameras_enabled","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_cameras_enabled","entityidfiltertype":"exact","outputinitially":true,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":2920,"wires":[["80e2c0b3c6a98395"]]},{"id":"0b3b5a47044aa868","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":2840,"wires":[["5047e97461550f17"]]},{"id":"c9ce0c8b7db1810e","type":"delay","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":870,"y":2900,"wires":[["1b360ceb51b0d1aa"]]},{"id":"3f2fcfc88a2d2794","type":"inject","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"","payloadType":"date","x":190,"y":2800,"wires":[["80e2c0b3c6a98395"]]},{"id":"cb973994f4826fbf","type":"trigger-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"manual_snapshot","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"input_button.pcs1_camera_manual_snapshot","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":170,"y":2980,"wires":[[],["d2d75c101d09c052"]]},{"id":"6464495bdab4af9c","type":"api-current-state","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"cameras_enabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":560,"y":3040,"wires":[["10a741d7856f84bd"],[]]},{"id":"816f60c9f7bb08df","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":2980,"wires":[["6464495bdab4af9c"]]},{"id":"d2d75c101d09c052","type":"delay","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":2980,"wires":[["816f60c9f7bb08df"]]},{"id":"10a741d7856f84bd","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"path","rules":[{"t":"set","p":"path","pt":"msg","to":"/config/www/photos/manual/","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":2980,"wires":[["5c76b9d948d8cf93"]]},{"id":"bc1c8ea91b2c58c2","type":"change","z":"6c2304a77d361b80","g":"d2c61814b86846fb","name":"path","rules":[{"t":"set","p":"path","pt":"msg","to":"/config/www/photos/automation/","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":2720,"wires":[["5c76b9d948d8cf93"]]},{"id":"98162e520aefef74","type":"inject","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"6","topic":"","payload":"","payloadType":"date","x":150,"y":3280,"wires":[["29f37f8ad9971855"]]},{"id":"29f37f8ad9971855","type":"delay","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":450,"y":3280,"wires":[["731d45e91fd15317"]]},{"id":"731d45e91fd15317","type":"change","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":3280,"wires":[["45483bd5cc96ec74"]]},{"id":"45483bd5cc96ec74","type":"api-current-state","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"automation_pump?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_pump_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":3280,"wires":[["9c85fdfecfea4b63"],["1f6f0f8ca7daf997"]]},{"id":"9c85fdfecfea4b63","type":"api-current-state","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"pump_enable?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.{{pcs}}_pump_enable","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":780,"y":3320,"wires":[["facefbbd87372c41"],["1f6f0f8ca7daf997"]]},{"id":"3ac75bf94a49b8fe","type":"api-call-service","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"pump_automation_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"switch","service":"turn_on","entityId":"switch.{{pcs}}_pump_automation","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1100,"y":3320,"wires":[[]]},{"id":"a7927be7d7ce4eb5","type":"server-state-changed","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"automation_pump","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_pump_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":3340,"wires":[["29f37f8ad9971855"]]},{"id":"34cddbaf4fbc2abe","type":"server-state-changed","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"pump_enable","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"switch.pcs1_pump_enable","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":3400,"wires":[["29f37f8ad9971855"]]},{"id":"facefbbd87372c41","type":"api-current-state","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"pump_automation?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.pcs1_pump_automation","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":3380,"wires":[[],["3ac75bf94a49b8fe"]]},{"id":"1f6f0f8ca7daf997","type":"api-call-service","z":"6c2304a77d361b80","g":"f608c33f06e4a6a3","name":"pump_automation_off","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"switch","service":"turn_off","entityId":"switch.{{pcs}}_pump_automation","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1100,"y":3380,"wires":[[]]},{"id":"37c5bd49b4977d73","type":"inject","z":"6e04541125600418","name":"trigger","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"0.5","topic":"","payload":"","payloadType":"date","x":210,"y":80,"wires":[["35c63a389b761ec7"]]},{"id":"e115344c7f2c0543","type":"api-call-service","z":"6e04541125600418","name":"camera_sequence_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_boolean","service":"turn_off","entityId":"input_boolean.{{pcs}}_camera_sequence","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":560,"y":80,"wires":[["1d42cb221802a67a"]]},{"id":"35c63a389b761ec7","type":"change","z":"6e04541125600418","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":80,"wires":[["e115344c7f2c0543"]]},{"id":"1d42cb221802a67a","type":"api-call-service","z":"6e04541125600418","name":"camera_sequence_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_boolean","service":"turn_off","entityId":"input_boolean.{{pcs}}_led_camera_mode_active","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":800,"y":80,"wires":[[]]},{"id":"8ca9ffa5c084a199","type":"api-current-state","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"pinionwheel_count_difference_error","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_kinematics_pinionwheel_count_difference_error","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"pinionwheel_count_difference_error","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":910,"y":200,"wires":[["107ba1e3b54447b3"]]},{"id":"1391a6ec2c6256f6","type":"api-current-state","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"expected_pinionwheel_count","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_proximity_switch_expected_pinion_wheel_count","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"expected_pinionwheel_count","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":890,"y":160,"wires":[["8ca9ffa5c084a199"]]},{"id":"107ba1e3b54447b3","type":"function","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"difference_error","func":"var abs_diff = 0.0;\nvar error = false;\n\n\nif ((msg.pinionwheel_count >= 191.0 / 2.0 && msg.expected_pinionwheel_count < 191.0 / 2.0)){\n    abs_diff = 192.0 - msg.pinionwheel_count + msg.expected_pinionwheel_count;\n} else if ((msg.pinionwheel_count < 191.0 / 2.0 && msg.expected_pinionwheel_count >= 191.0 / 2.0)){\n    abs_diff = 192.0 - msg.expected_pinionwheel_count + msg.pinionwheel_count;\n}else{\n    abs_diff = Math.abs(msg.pinionwheel_count - msg.expected_pinionwheel_count);\n}\n\nif (abs_diff >= msg.pinionwheel_count_difference_error)\n    error = true;\nelse if (abs_diff < msg.pinionwheel_count_difference_error)\n    error = false;\n\n\nmsg.error = error;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1160,"y":120,"wires":[["0807ebe463bd202b"]]},{"id":"b0739b91bf047eb7","type":"api-current-state","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"pinionwheel_count","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.{{pcs}}_kin_proximity_switch_pinion_wheel_count","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"pinionwheel_count","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":850,"y":120,"wires":[["1391a6ec2c6256f6"]]},{"id":"eb9d0a84067feebb","type":"inject","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"30","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"","payloadType":"date","x":130,"y":120,"wires":[["bdbeba2de4faef43"]]},{"id":"ce7c158c3f28e19b","type":"api-current-state","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"motor_enabled","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.{{pcs}}_kin_stepper_enable_motor","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":460,"y":120,"wires":[["b0739b91bf047eb7"],[]]},{"id":"bdbeba2de4faef43","type":"change","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"pcs","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":120,"wires":[["ce7c158c3f28e19b"]]},{"id":"0807ebe463bd202b","type":"switch","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"error?","property":"error","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1330,"y":120,"wires":[["72a98dda56f8774d","c16233c373d5d5cc"]]},{"id":"c16233c373d5d5cc","type":"api-call-service","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"shutdown kinematics","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"switch","service":"turn_off","entityId":"switch.{{pcs}}_kin_stepper_enable_motor","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1540,"y":120,"wires":[[]]},{"id":"72a98dda56f8774d","type":"api-call-service","z":"ad70ca3f38056645","g":"90d9ac488dc91ae9","name":"Notification","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"persistent_notification","service":"create","entityId":"","data":"{\"title\":\"Info\",\"message\":\"Error in the Kinematics system, turned off the motor.\"}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1510,"y":80,"wires":[[]]},{"id":"f77b6b99d9b585d9","type":"inject","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"","payloadType":"date","x":150,"y":400,"wires":[["420fbbf9e490b640"]]},{"id":"7ff682cfe81be418","type":"change","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"pcs","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":400,"wires":[["b269615afdc18c97"]]},{"id":"73c85f65a748498e","type":"api-current-state","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"max_temp","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.pcs1_led_panel_max_temperature","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_temp","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":990,"y":380,"wires":[["d863332e03aafe37"]]},{"id":"a89a797d47c84619","type":"api-call-service","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"Fan_on","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"fan","service":"turn_on","entityId":"fan.{{pcs}}_pwm_cc_a_4_fan","data":"{\"percentage\": 100}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1420,"y":320,"wires":[[]]},{"id":"66aa662f9a030146","type":"api-call-service","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"Fan_off","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"fan","service":"turn_off","entityId":"fan.{{pcs}}_pwm_cc_a_4_fan","data":"","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1420,"y":480,"wires":[[]]},{"id":"b269615afdc18c97","type":"api-current-state","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"automation_fan","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_automation_fan_active","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"automation_fan","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":640,"y":400,"wires":[["73c85f65a748498e"],["66aa662f9a030146"]]},{"id":"65c056c2b3d8efbd","type":"server-state-changed","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"automation_fan","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_automation_fan_active","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"num","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":"","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":140,"y":460,"wires":[["420fbbf9e490b640"]]},{"id":"d863332e03aafe37","type":"switch","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"> 30.0","property":"max_temp","propertyType":"msg","rules":[{"t":"gt","v":"30.0","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":380,"wires":[["a89a797d47c84619"],["85987e9396cecee1"]]},{"id":"85987e9396cecee1","type":"switch","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"< 28.0","property":"max_temp","propertyType":"msg","rules":[{"t":"lt","v":"28.0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1270,"y":420,"wires":[["66aa662f9a030146"]]},{"id":"9fb97547d2bd440f","type":"inject","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"","payloadType":"date","x":150,"y":620,"wires":[["bd4b30573f7b3401"]]},{"id":"1373f324c02f03f5","type":"change","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"pcs","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":530,"y":620,"wires":[["b56330fe8f0f9426"]]},{"id":"818545a1697e8921","type":"api-current-state","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"max_temp","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"sensor.pcs1_led_panel_max_temperature","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_temp","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1050,"y":600,"wires":[["46c2013b3b1eea7c"]]},{"id":"b56330fe8f0f9426","type":"api-current-state","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"led_safety_disabled?","server":"f482c16b.7b4d","version":3,"outputs":2,"halt_if":"on","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_led_safety_disabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"led_safety_disabled","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":700,"y":620,"wires":[["818545a1697e8921"],[]]},{"id":"89916ea0b973751c","type":"server-state-changed","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"led_safety_disabled","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_boolean.pcs1_led_safety_disabled","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"","halt_if_type":"num","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":"","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":680,"wires":[["bd4b30573f7b3401"]]},{"id":"46c2013b3b1eea7c","type":"switch","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"> 40.0","property":"max_temp","propertyType":"msg","rules":[{"t":"gt","v":"40.0","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1210,"y":600,"wires":[["94b36427af066668"],["40fc822db9a1218f"]]},{"id":"94b36427af066668","type":"range","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","minin":"40.0","maxin":"50.0","minout":"0.0","maxout":"1.0","action":"scale","round":false,"property":"max_temp","name":"","x":1400,"y":600,"wires":[["830fe8a54ab79e64"]]},{"id":"2ad7e35e4f545a99","type":"api-call-service","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"set safety_factor","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_power_safety_factor","data":"{\"value\": {{safety_factor}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1920,"y":660,"wires":[[]]},{"id":"40fc822db9a1218f","type":"change","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"safety_factor = 1.0","rules":[{"t":"set","p":"safety_factor","pt":"msg","to":"1.0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1410,"y":660,"wires":[["2ad7e35e4f545a99"]]},{"id":"830fe8a54ab79e64","type":"spline-curve","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"","output_key":"safety_factor","input_key":"max_temp","points":[{"x":0.011,"y":0.992},{"x":0.271,"y":0.992},{"x":0.481,"y":0.975},{"x":0.628,"y":0.949},{"x":0.851,"y":0.799},{"x":0.974,"y":0.232},{"x":0.994,"y":0.005}],"x":1590,"y":620,"wires":[["2ad7e35e4f545a99"]]},{"id":"bd4b30573f7b3401","type":"delay","z":"ad70ca3f38056645","g":"4b8b61390d3258ac","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":620,"wires":[["1373f324c02f03f5"]]},{"id":"420fbbf9e490b640","type":"delay","z":"ad70ca3f38056645","g":"6665484f8e6201fb","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":330,"y":400,"wires":[["7ff682cfe81be418"]]},{"id":"b405c97244a48623","type":"api-current-state","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":840,"wires":[["f070e3301c83e7de"]]},{"id":"23915c5983c29334","type":"change","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":840,"wires":[["b405c97244a48623","86c6837a97abc6bd"]]},{"id":"454841d0413e0d67","type":"server-state-changed","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"red_max_winter","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_red_brightness_max_winter","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":160,"y":840,"wires":[["135ab68b715b01a8"]]},{"id":"f070e3301c83e7de","type":"switch","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1080,"y":840,"wires":[["000ad56c6f8b7ea1"]]},{"id":"582c9de03778d0ae","type":"api-call-service","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1260,"y":600,"wires":[[]]},{"id":"0ce5e54724da0d63","type":"server-state-changed","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"red_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_red_brightness_min","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":600,"wires":[["e455ac45201ed0f4"]]},{"id":"bca75399dc7b7a43","type":"change","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":600,"wires":[["495a07ed3d2ee38c","47710d7f37607b32"]]},{"id":"495a07ed3d2ee38c","type":"api-current-state","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":600,"wires":[["5219a2b5f16371f7"]]},{"id":"5219a2b5f16371f7","type":"switch","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":600,"wires":[["582c9de03778d0ae"]]},{"id":"f8e1e293cf26f072","type":"server-state-changed","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"red_max_summer","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_red_brightness_max_summer","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":1020,"wires":[["ac121f8d716be353"]]},{"id":"77da6c79e98e722e","type":"change","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1020,"wires":[["8dbd6a59a24925a9"]]},{"id":"8dbd6a59a24925a9","type":"api-current-state","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":1020,"wires":[["e570026f73f4c7dc"]]},{"id":"e570026f73f4c7dc","type":"switch","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1100,"y":1020,"wires":[["1f5e64788483fc27"]]},{"id":"86c6837a97abc6bd","type":"api-current-state","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"max_summer","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_summer","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":800,"y":940,"wires":[["07802d444ac66ee5"]]},{"id":"07802d444ac66ee5","type":"switch","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1080,"y":940,"wires":[["e2ddab2d5feeb314"]]},{"id":"e2ddab2d5feeb314","type":"api-call-service","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1290,"y":940,"wires":[[]]},{"id":"000ad56c6f8b7ea1","type":"api-call-service","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1280,"y":840,"wires":[[]]},{"id":"1f5e64788483fc27","type":"api-call-service","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1290,"y":1020,"wires":[[]]},{"id":"47710d7f37607b32","type":"api-current-state","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"max","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":660,"wires":[["e8df7e2ce49a5909"]]},{"id":"e8df7e2ce49a5909","type":"switch","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":660,"wires":[["d7ba3d594aeda62f"]]},{"id":"d7ba3d594aeda62f","type":"api-call-service","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":660,"wires":[[]]},{"id":"2f9bd364159be769","type":"server-state-changed","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"red_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_red_brightness_max","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":740,"wires":[["cd3c849e169214f9"]]},{"id":"d5b8ddd629a28ee7","type":"switch","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":740,"wires":[["2d960bb1d890766d"]]},{"id":"b3b06dc2f207ea7a","type":"change","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":740,"wires":[["0657d3b660d0a681"]]},{"id":"0657d3b660d0a681","type":"api-current-state","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":740,"wires":[["d5b8ddd629a28ee7"]]},{"id":"2d960bb1d890766d","type":"api-call-service","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":740,"wires":[[]]},{"id":"e95cf8544df7bd2f","type":"change","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":600,"wires":[["bca75399dc7b7a43"]]},{"id":"18ee58626c2cd09c","type":"change","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":740,"wires":[["b3b06dc2f207ea7a"]]},{"id":"9643e0787a16ba76","type":"change","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":840,"wires":[["23915c5983c29334"]]},{"id":"72d873ef39e4e3ed","type":"change","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1020,"wires":[["77da6c79e98e722e"]]},{"id":"162bb5921868c11e","type":"api-current-state","z":"a071896d152eb245","g":"2361221b0eb65853","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":1380,"wires":[["3b2478327df6e32a"]]},{"id":"b9e5488fd431ec1f","type":"change","z":"a071896d152eb245","g":"2361221b0eb65853","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1380,"wires":[["162bb5921868c11e","378e871b809e639e"]]},{"id":"866b424c36ed9b9a","type":"server-state-changed","z":"a071896d152eb245","g":"2361221b0eb65853","name":"blue_max_winter","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_blue_brightness_max_winter","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":160,"y":1380,"wires":[["75b787980b3e8ccc"]]},{"id":"3b2478327df6e32a","type":"switch","z":"a071896d152eb245","g":"2361221b0eb65853","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1080,"y":1380,"wires":[["fedd9e693df8d2b8"]]},{"id":"9ce5292fd52a14f5","type":"api-call-service","z":"a071896d152eb245","g":"2361221b0eb65853","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1260,"y":1140,"wires":[[]]},{"id":"3a492a7c0492545c","type":"server-state-changed","z":"a071896d152eb245","g":"2361221b0eb65853","name":"blue_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_blue_brightness_min","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":1140,"wires":[["4cf6ae319522d33a"]]},{"id":"257b355afc622b92","type":"change","z":"a071896d152eb245","g":"2361221b0eb65853","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1140,"wires":[["4b9c63b4ed98fe59","6830c0af05cf7229"]]},{"id":"4b9c63b4ed98fe59","type":"api-current-state","z":"a071896d152eb245","g":"2361221b0eb65853","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":1140,"wires":[["71cdfe7535468a2c"]]},{"id":"71cdfe7535468a2c","type":"switch","z":"a071896d152eb245","g":"2361221b0eb65853","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":1140,"wires":[["9ce5292fd52a14f5"]]},{"id":"40a16276481bd30e","type":"server-state-changed","z":"a071896d152eb245","g":"2361221b0eb65853","name":"blue_max_summer","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_blue_brightness_max_summer","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":150,"y":1560,"wires":[["67259a846e8ca4df"]]},{"id":"687add4ca87d3ba3","type":"change","z":"a071896d152eb245","g":"2361221b0eb65853","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1560,"wires":[["90cd545394e217a7"]]},{"id":"90cd545394e217a7","type":"api-current-state","z":"a071896d152eb245","g":"2361221b0eb65853","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":1560,"wires":[["789a806e0d4f0e3c"]]},{"id":"789a806e0d4f0e3c","type":"switch","z":"a071896d152eb245","g":"2361221b0eb65853","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1100,"y":1560,"wires":[["f7da26dd153d1dd6"]]},{"id":"378e871b809e639e","type":"api-current-state","z":"a071896d152eb245","g":"2361221b0eb65853","name":"max_summer","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_summer","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":800,"y":1480,"wires":[["feb79f45727afada"]]},{"id":"feb79f45727afada","type":"switch","z":"a071896d152eb245","g":"2361221b0eb65853","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1080,"y":1480,"wires":[["85fee2a385293a41"]]},{"id":"85fee2a385293a41","type":"api-call-service","z":"a071896d152eb245","g":"2361221b0eb65853","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1290,"y":1480,"wires":[[]]},{"id":"fedd9e693df8d2b8","type":"api-call-service","z":"a071896d152eb245","g":"2361221b0eb65853","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1280,"y":1380,"wires":[[]]},{"id":"f7da26dd153d1dd6","type":"api-call-service","z":"a071896d152eb245","g":"2361221b0eb65853","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1290,"y":1560,"wires":[[]]},{"id":"6830c0af05cf7229","type":"api-current-state","z":"a071896d152eb245","g":"2361221b0eb65853","name":"max","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":1200,"wires":[["d8a73af75d857296"]]},{"id":"d8a73af75d857296","type":"switch","z":"a071896d152eb245","g":"2361221b0eb65853","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":1200,"wires":[["d37bb4582cc60540"]]},{"id":"d37bb4582cc60540","type":"api-call-service","z":"a071896d152eb245","g":"2361221b0eb65853","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":1200,"wires":[[]]},{"id":"a4b707f7cec12288","type":"server-state-changed","z":"a071896d152eb245","g":"2361221b0eb65853","name":"blue_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_blue_brightness_max","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":1280,"wires":[["b3575d16fc2272df"]]},{"id":"c4e87af4e7272915","type":"switch","z":"a071896d152eb245","g":"2361221b0eb65853","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":1280,"wires":[["8ffe05e3624e192a"]]},{"id":"0c87f4ba827d4dde","type":"change","z":"a071896d152eb245","g":"2361221b0eb65853","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1280,"wires":[["8719df971fdad8bb"]]},{"id":"8719df971fdad8bb","type":"api-current-state","z":"a071896d152eb245","g":"2361221b0eb65853","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":1280,"wires":[["c4e87af4e7272915"]]},{"id":"8ffe05e3624e192a","type":"api-call-service","z":"a071896d152eb245","g":"2361221b0eb65853","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":1280,"wires":[[]]},{"id":"67911042620f6a12","type":"change","z":"a071896d152eb245","g":"2361221b0eb65853","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"blue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":1140,"wires":[["257b355afc622b92"]]},{"id":"fa5588752dd64bdf","type":"change","z":"a071896d152eb245","g":"2361221b0eb65853","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"blue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":1280,"wires":[["0c87f4ba827d4dde"]]},{"id":"28bada945bf52135","type":"change","z":"a071896d152eb245","g":"2361221b0eb65853","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"blue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":1380,"wires":[["b9e5488fd431ec1f"]]},{"id":"0d7651e362608978","type":"change","z":"a071896d152eb245","g":"2361221b0eb65853","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"blue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":1560,"wires":[["687add4ca87d3ba3"]]},{"id":"591ab1cf973c7243","type":"api-current-state","z":"a071896d152eb245","g":"6920ac130d304910","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":320,"wires":[["4766f276fe427190"]]},{"id":"26e2f6ae3368051d","type":"change","z":"a071896d152eb245","g":"6920ac130d304910","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":320,"wires":[["591ab1cf973c7243","ab33347066c0787f"]]},{"id":"2bc95003dc759b24","type":"server-state-changed","z":"a071896d152eb245","g":"6920ac130d304910","name":"white_max_winter","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_white_brightness_max_winter","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":160,"y":320,"wires":[["d4db4b828fa4b72d"]]},{"id":"4766f276fe427190","type":"switch","z":"a071896d152eb245","g":"6920ac130d304910","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1080,"y":320,"wires":[["19951b43f5fdf48c"]]},{"id":"790133988aa3a1a7","type":"api-call-service","z":"a071896d152eb245","g":"6920ac130d304910","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1260,"y":80,"wires":[[]]},{"id":"dc3a7b9cba47ffc9","type":"server-state-changed","z":"a071896d152eb245","g":"6920ac130d304910","name":"white_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_white_brightness_min","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":80,"wires":[["be01c9b8f2a309db"]]},{"id":"c41b0284fcb927ed","type":"change","z":"a071896d152eb245","g":"6920ac130d304910","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":80,"wires":[["b1f88d45dded939f","d7ce139ba9c43c23"]]},{"id":"b1f88d45dded939f","type":"api-current-state","z":"a071896d152eb245","g":"6920ac130d304910","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":80,"wires":[["e023df5f11d0eeab"]]},{"id":"e023df5f11d0eeab","type":"switch","z":"a071896d152eb245","g":"6920ac130d304910","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":80,"wires":[["790133988aa3a1a7"]]},{"id":"fbe6e6b429761cf0","type":"server-state-changed","z":"a071896d152eb245","g":"6920ac130d304910","name":"white_max_summer","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_white_brightness_max_summer","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":500,"wires":[["d1b8885c41113080"]]},{"id":"8ce5e78a6f24a2c3","type":"change","z":"a071896d152eb245","g":"6920ac130d304910","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":500,"wires":[["2e20354fcc2a56f4"]]},{"id":"2e20354fcc2a56f4","type":"api-current-state","z":"a071896d152eb245","g":"6920ac130d304910","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":500,"wires":[["f835f73a98c85ea5"]]},{"id":"f835f73a98c85ea5","type":"switch","z":"a071896d152eb245","g":"6920ac130d304910","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1070,"y":500,"wires":[["3893f376aed7f352"]]},{"id":"ab33347066c0787f","type":"api-current-state","z":"a071896d152eb245","g":"6920ac130d304910","name":"max_summer","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_summer","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":800,"y":420,"wires":[["98791e5b1aff5297"]]},{"id":"98791e5b1aff5297","type":"switch","z":"a071896d152eb245","g":"6920ac130d304910","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1070,"y":420,"wires":[["0d2671876a531ba2"]]},{"id":"0d2671876a531ba2","type":"api-call-service","z":"a071896d152eb245","g":"6920ac130d304910","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1270,"y":420,"wires":[[]]},{"id":"19951b43f5fdf48c","type":"api-call-service","z":"a071896d152eb245","g":"6920ac130d304910","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1280,"y":320,"wires":[[]]},{"id":"3893f376aed7f352","type":"api-call-service","z":"a071896d152eb245","g":"6920ac130d304910","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1270,"y":500,"wires":[[]]},{"id":"d7ce139ba9c43c23","type":"api-current-state","z":"a071896d152eb245","g":"6920ac130d304910","name":"max","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":140,"wires":[["396a0fe774e96162"]]},{"id":"396a0fe774e96162","type":"switch","z":"a071896d152eb245","g":"6920ac130d304910","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":140,"wires":[["9cd5e269345c6069"]]},{"id":"9cd5e269345c6069","type":"api-call-service","z":"a071896d152eb245","g":"6920ac130d304910","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":140,"wires":[[]]},{"id":"3838e4a95eb2963b","type":"server-state-changed","z":"a071896d152eb245","g":"6920ac130d304910","name":"white_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_white_brightness_max","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":180,"y":220,"wires":[["a9109330b9283f4e"]]},{"id":"5cf8f80c506a6dde","type":"switch","z":"a071896d152eb245","g":"6920ac130d304910","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":220,"wires":[["b360c448d2c82472"]]},{"id":"1c7d41696f1edd94","type":"change","z":"a071896d152eb245","g":"6920ac130d304910","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":220,"wires":[["4e6844e10b366cf7"]]},{"id":"4e6844e10b366cf7","type":"api-current-state","z":"a071896d152eb245","g":"6920ac130d304910","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":770,"y":220,"wires":[["5cf8f80c506a6dde"]]},{"id":"b360c448d2c82472","type":"api-call-service","z":"a071896d152eb245","g":"6920ac130d304910","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1240,"y":220,"wires":[[]]},{"id":"38858bf9db522b25","type":"change","z":"a071896d152eb245","g":"6920ac130d304910","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":80,"wires":[["c41b0284fcb927ed"]]},{"id":"cccab3ab5010649c","type":"change","z":"a071896d152eb245","g":"6920ac130d304910","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":220,"wires":[["1c7d41696f1edd94"]]},{"id":"ca2d83564f7dac58","type":"change","z":"a071896d152eb245","g":"6920ac130d304910","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":320,"wires":[["26e2f6ae3368051d"]]},{"id":"4a91bfee7218f819","type":"change","z":"a071896d152eb245","g":"6920ac130d304910","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":500,"wires":[["8ce5e78a6f24a2c3"]]},{"id":"2515d71481f5f318","type":"api-current-state","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":1900,"wires":[["40feb36534c95f59"]]},{"id":"c3b1b0f1ce726a7d","type":"change","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1900,"wires":[["2515d71481f5f318","36c13ecea2ddaf1b"]]},{"id":"7fde090fe37fa2ea","type":"server-state-changed","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"green_max_winter","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_green_brightness_max_winter","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":190,"y":1900,"wires":[["b733b1b2a2d840a8"]]},{"id":"40feb36534c95f59","type":"switch","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1100,"y":1900,"wires":[["4b37181896066e8f"]]},{"id":"839583dc53776b26","type":"api-call-service","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1280,"y":1660,"wires":[[]]},{"id":"4571a28cdf2a8405","type":"server-state-changed","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"green_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_green_brightness_min","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":200,"y":1660,"wires":[["0f8ce5b0a614bbed"]]},{"id":"2d9195cea94d096b","type":"change","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1660,"wires":[["e6700a133892e4fa","1519293c156f7122"]]},{"id":"e6700a133892e4fa","type":"api-current-state","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":810,"y":1660,"wires":[["1189fa3f9e0b478b"]]},{"id":"1189fa3f9e0b478b","type":"switch","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1080,"y":1660,"wires":[["839583dc53776b26"]]},{"id":"af858e5dfda58919","type":"server-state-changed","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"green_max_summer","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_green_brightness_max_summer","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":160,"y":2080,"wires":[["28811582f577fb1c"]]},{"id":"6ed050c92479c191","type":"change","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":2080,"wires":[["fb962faef204920e"]]},{"id":"fb962faef204920e","type":"api-current-state","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":810,"y":2080,"wires":[["f7fa5410f519b494"]]},{"id":"f7fa5410f519b494","type":"switch","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1120,"y":2080,"wires":[["f7998a0786e7cf2e"]]},{"id":"36c13ecea2ddaf1b","type":"api-current-state","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"max_summer","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_summer","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":820,"y":2000,"wires":[["3d3ef93f058a8535"]]},{"id":"3d3ef93f058a8535","type":"switch","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1100,"y":2000,"wires":[["669551b5667f3725"]]},{"id":"669551b5667f3725","type":"api-call-service","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1310,"y":2000,"wires":[[]]},{"id":"4b37181896066e8f","type":"api-call-service","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1300,"y":1900,"wires":[[]]},{"id":"f7998a0786e7cf2e","type":"api-call-service","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1310,"y":2080,"wires":[[]]},{"id":"1519293c156f7122","type":"api-current-state","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"max","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":1720,"wires":[["87afa3aba032f01d"]]},{"id":"87afa3aba032f01d","type":"switch","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1080,"y":1720,"wires":[["7f600c284104e521"]]},{"id":"7f600c284104e521","type":"api-call-service","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1260,"y":1720,"wires":[[]]},{"id":"2ac7ab0b299adf30","type":"server-state-changed","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"green_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_green_brightness_max","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":1800,"wires":[["ae1acb1af55045b5"]]},{"id":"ce29b5662db57c93","type":"switch","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1080,"y":1800,"wires":[["8b7ec2f6d53ff5dc"]]},{"id":"8c6b4179a3b7db9e","type":"change","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1800,"wires":[["a34cc5fcf561c98d"]]},{"id":"a34cc5fcf561c98d","type":"api-current-state","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":790,"y":1800,"wires":[["ce29b5662db57c93"]]},{"id":"8b7ec2f6d53ff5dc","type":"api-call-service","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1260,"y":1800,"wires":[[]]},{"id":"b1d40e5d3ea9bc60","type":"change","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1660,"wires":[["2d9195cea94d096b"]]},{"id":"294ed060cc921d62","type":"change","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1800,"wires":[["8c6b4179a3b7db9e"]]},{"id":"645e1d7030ab45fd","type":"change","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":1900,"wires":[["c3b1b0f1ce726a7d"]]},{"id":"0201e0d07d776025","type":"change","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":2080,"wires":[["6ed050c92479c191"]]},{"id":"5d4252397a15cb33","type":"api-current-state","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":810,"y":2440,"wires":[["b05115f78aac6a05"]]},{"id":"cc6ad7e8c28ccdd7","type":"change","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":2440,"wires":[["5d4252397a15cb33","662abcc11802cf2a"]]},{"id":"1da0f6d520f831e9","type":"server-state-changed","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"green_max_winter","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_uv_brightness_max_winter","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":230,"y":2440,"wires":[["82cabd56478777e1"]]},{"id":"b05115f78aac6a05","type":"switch","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1120,"y":2440,"wires":[["9c9506d70fc12c91"]]},{"id":"bc4db2c40cbc3a2e","type":"api-call-service","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1300,"y":2200,"wires":[[]]},{"id":"daf6ab147fd9813e","type":"server-state-changed","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"uv_min","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_uv_brightness_min","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":210,"y":2200,"wires":[["11e4c3aa298efa97"]]},{"id":"3f4f25bb3f6c46bb","type":"change","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":2200,"wires":[["424aa7060f60a6fc","c85e9f760b068144"]]},{"id":"424aa7060f60a6fc","type":"api-current-state","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":830,"y":2200,"wires":[["c4e0b19c50a876ce"]]},{"id":"c4e0b19c50a876ce","type":"switch","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max_winter","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1100,"y":2200,"wires":[["bc4db2c40cbc3a2e"]]},{"id":"ad8b62da67e84d9e","type":"server-state-changed","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"green_max_summer","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_uv_brightness_max_summer","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":220,"y":2620,"wires":[["05851328aaf4af5b"]]},{"id":"7c2579a83b5dcfc5","type":"change","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":2620,"wires":[["cd69f55f2a13a629"]]},{"id":"cd69f55f2a13a629","type":"api-current-state","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"max_winter","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_winter","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":830,"y":2620,"wires":[["9c1d45a42873a071"]]},{"id":"9c1d45a42873a071","type":"switch","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1140,"y":2620,"wires":[["32e5c7e4b665c4e3"]]},{"id":"662abcc11802cf2a","type":"api-current-state","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"max_summer","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max_summer","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max_summer","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":840,"y":2540,"wires":[["30bbd0edd70e8144"]]},{"id":"30bbd0edd70e8144","type":"switch","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"winter >  summer","property":"max_winter","propertyType":"msg","rules":[{"t":"gt","v":"max_summer","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1120,"y":2540,"wires":[["624c3ecb47e3e490"]]},{"id":"624c3ecb47e3e490","type":"api-call-service","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1330,"y":2540,"wires":[[]]},{"id":"9c9506d70fc12c91","type":"api-call-service","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"set max_winter","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max_winter","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1320,"y":2440,"wires":[[]]},{"id":"32e5c7e4b665c4e3","type":"api-call-service","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"set max_summer","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.pcs1_led_{{color}}_brightness_max_summer","data":"{\"value\": {{max_winter}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1330,"y":2620,"wires":[[]]},{"id":"c85e9f760b068144","type":"api-current-state","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"max","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_max","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":810,"y":2260,"wires":[["ddc965e287e65023"]]},{"id":"ddc965e287e65023","type":"switch","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1100,"y":2260,"wires":[["0924905f499c443b"]]},{"id":"0924905f499c443b","type":"api-call-service","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1280,"y":2260,"wires":[[]]},{"id":"60309901b9d2a8ce","type":"server-state-changed","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"green_max","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"input_number.pcs1_led_uv_brightness_max","entityidfiltertype":"exact","outputinitially":true,"state_type":"num","haltifstate":"","halt_if_type":"str","halt_if_compare":"is","outputs":1,"output_only_on_state_change":true,"for":0,"forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"max","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":230,"y":2340,"wires":[["8c25980ebff02f13"]]},{"id":"ce5fd925cc47cdb1","type":"switch","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"min >  max","property":"min","propertyType":"msg","rules":[{"t":"gt","v":"max","vt":"msg"}],"checkall":"true","repair":false,"outputs":1,"x":1100,"y":2340,"wires":[["389898a961f00c7b"]]},{"id":"1891bbc13f99fae0","type":"change","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":2340,"wires":[["b95b2e1513702681"]]},{"id":"b95b2e1513702681","type":"api-current-state","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"min","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"num","halt_if_compare":"is","entity_id":"input_number.{{pcs}}_led_{{color}}_brightness_min","state_type":"num","blockInputOverrides":false,"outputProperties":[{"property":"min","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":810,"y":2340,"wires":[["ce5fd925cc47cdb1"]]},{"id":"389898a961f00c7b","type":"api-call-service","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"set max","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"input_number","service":"set_value","entityId":"input_number.{{pcs}}_led_{{color}}_brightness_max","data":"{\"value\": {{min}}}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1280,"y":2340,"wires":[[]]},{"id":"784090adfd7e339f","type":"change","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"uv","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":2200,"wires":[["3f4f25bb3f6c46bb"]]},{"id":"34e0326e86546cae","type":"change","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"uv","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":2340,"wires":[["1891bbc13f99fae0"]]},{"id":"a0a613a480e833a2","type":"change","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"uv","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":2440,"wires":[["cc6ad7e8c28ccdd7"]]},{"id":"442a2cd615ab249f","type":"change","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"color","rules":[{"t":"set","p":"color","pt":"msg","to":"uv","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":2620,"wires":[["7c2579a83b5dcfc5"]]},{"id":"11e4c3aa298efa97","type":"delay","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":2200,"wires":[["784090adfd7e339f"]]},{"id":"8c25980ebff02f13","type":"delay","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":370,"y":2340,"wires":[["34e0326e86546cae"]]},{"id":"82cabd56478777e1","type":"delay","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":390,"y":2440,"wires":[["a0a613a480e833a2"]]},{"id":"05851328aaf4af5b","type":"delay","z":"a071896d152eb245","g":"45a22e8eeb00d1a1","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":390,"y":2620,"wires":[["442a2cd615ab249f"]]},{"id":"0f8ce5b0a614bbed","type":"delay","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":1660,"wires":[["b1d40e5d3ea9bc60"]]},{"id":"ae1acb1af55045b5","type":"delay","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":1800,"wires":[["294ed060cc921d62"]]},{"id":"b733b1b2a2d840a8","type":"delay","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":1900,"wires":[["645e1d7030ab45fd"]]},{"id":"28811582f577fb1c","type":"delay","z":"a071896d152eb245","g":"1be6052effb87dcb","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":330,"y":2080,"wires":[["0201e0d07d776025"]]},{"id":"4cf6ae319522d33a","type":"delay","z":"a071896d152eb245","g":"2361221b0eb65853","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":1140,"wires":[["67911042620f6a12"]]},{"id":"b3575d16fc2272df","type":"delay","z":"a071896d152eb245","g":"2361221b0eb65853","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":1280,"wires":[["fa5588752dd64bdf"]]},{"id":"75b787980b3e8ccc","type":"delay","z":"a071896d152eb245","g":"2361221b0eb65853","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":330,"y":1380,"wires":[["28bada945bf52135"]]},{"id":"67259a846e8ca4df","type":"delay","z":"a071896d152eb245","g":"2361221b0eb65853","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":330,"y":1560,"wires":[["0d7651e362608978"]]},{"id":"ac121f8d716be353","type":"delay","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":1020,"wires":[["72d873ef39e4e3ed"]]},{"id":"135ab68b715b01a8","type":"delay","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":330,"y":840,"wires":[["9643e0787a16ba76"]]},{"id":"cd3c849e169214f9","type":"delay","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":740,"wires":[["18ee58626c2cd09c"]]},{"id":"e455ac45201ed0f4","type":"delay","z":"a071896d152eb245","g":"dae8012c595a5f92","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":600,"wires":[["e95cf8544df7bd2f"]]},{"id":"d1b8885c41113080","type":"delay","z":"a071896d152eb245","g":"6920ac130d304910","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":500,"wires":[["4a91bfee7218f819"]]},{"id":"d4db4b828fa4b72d","type":"delay","z":"a071896d152eb245","g":"6920ac130d304910","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":330,"y":320,"wires":[["ca2d83564f7dac58"]]},{"id":"a9109330b9283f4e","type":"delay","z":"a071896d152eb245","g":"6920ac130d304910","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":220,"wires":[["cccab3ab5010649c"]]},{"id":"be01c9b8f2a309db","type":"delay","z":"a071896d152eb245","g":"6920ac130d304910","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":310,"y":80,"wires":[["38858bf9db522b25"]]},{"id":"bf5145cbd4576c8c","type":"trigger-state","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"button.pcs1_cam1_snapshot","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":220,"y":60,"wires":[[],["27b26dbbde49a7fc"]]},{"id":"07868bddaa38f021","type":"trigger-state","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"button.pcs1_cam2_snapshot","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":220,"y":140,"wires":[[],["b844f4e58bae3fe2"]]},{"id":"bb5b37506aad5a84","type":"trigger-state","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"button.pcs1_cam3_snapshot","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":220,"y":220,"wires":[[],["17129ebc6a72e2a2"]]},{"id":"9b077ec7e9fe29be","type":"trigger-state","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"button.pcs1_cam4_snapshot","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":220,"y":300,"wires":[[],["98a76db1b75106cf"]]},{"id":"dcad76570f5dbf58","type":"trigger-state","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"button.pcs1_cam5_snapshot","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":220,"y":380,"wires":[[],["cb71d33d91e3a73f"]]},{"id":"f90e664e01777516","type":"trigger-state","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"button.pcs1_cam6_snapshot","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":220,"y":460,"wires":[[],["adc56685e4c4c711"]]},{"id":"1922eca2d3b939c4","type":"api-call-service","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & plant & \"_\" & angle & \"_\" & cam & \"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":1940,"y":260,"wires":[[]]},{"id":"d09e4c3205eb22fb","type":"change","z":"8ecde103e664eec0","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":260,"wires":[["031638b1808cf698"]]},{"id":"43a5bb8bf8c926d5","type":"change","z":"8ecde103e664eec0","name":"cam6","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":460,"wires":[["d09e4c3205eb22fb"]]},{"id":"fe7e27084f31f82c","type":"subflow:6c80f1ca0dd2938f","z":"8ecde103e664eec0","name":"","x":1560,"y":260,"wires":[["4fa6b5a84a2c3d25"]]},{"id":"9f5014156fa00969","type":"change","z":"8ecde103e664eec0","name":"cam5","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":380,"wires":[["d09e4c3205eb22fb"]]},{"id":"629b0e57f24f2a47","type":"change","z":"8ecde103e664eec0","name":"cam4","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":300,"wires":[["d09e4c3205eb22fb"]]},{"id":"a8b3e1e342c9c93d","type":"change","z":"8ecde103e664eec0","name":"cam3","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":220,"wires":[["d09e4c3205eb22fb"]]},{"id":"d3014e0924a897a2","type":"change","z":"8ecde103e664eec0","name":"cam2","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":140,"wires":[["d09e4c3205eb22fb"]]},{"id":"43b64665bd7d669e","type":"change","z":"8ecde103e664eec0","name":"cam1","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":60,"wires":[["d09e4c3205eb22fb"]]},{"id":"29ad1169d5426c1a","type":"trigger-state","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"button.pcs1_cam7_snapshot","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":210,"y":540,"wires":[[],["89cadf81cc15e559"]]},{"id":"8ee19769765a14ad","type":"change","z":"8ecde103e664eec0","name":"cam7","rules":[{"t":"set","p":"cam","pt":"msg","to":"cam7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":540,"wires":[["14b20e27953f4a42"]]},{"id":"77a9658c631f53a7","type":"api-call-service","z":"8ecde103e664eec0","name":"","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"camera","service":"snapshot","entityId":"camera.{{pcs}}_{{cam}}_camera","data":"{\"filename\": path & pcs & \"_\" & \"topview\" & \"_\" & angle & \"_\" & cam & \"_\" & global_angle &\"_\" & \"{{ now().strftime(\\\"%Y%m%d-%H%M%S\\\") }}.jpg\"}","dataType":"jsonata","mergecontext":"","mustacheAltTags":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"data"}],"queue":"none","x":1740,"y":440,"wires":[[]]},{"id":"14b20e27953f4a42","type":"change","z":"8ecde103e664eec0","name":"pcs1","rules":[{"t":"set","p":"pcs","pt":"msg","to":"pcs1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":440,"wires":[["c3c018ab8ded9dc8"]]},{"id":"4fa6b5a84a2c3d25","type":"subflow:d2fb9f710e7a6826","z":"8ecde103e664eec0","name":"","x":1730,"y":260,"wires":[["1922eca2d3b939c4"]]},{"id":"4df7ba51c3f6f068","type":"subflow:d2fb9f710e7a6826","z":"8ecde103e664eec0","name":"","x":1550,"y":440,"wires":[["77a9658c631f53a7"]]},{"id":"27b26dbbde49a7fc","type":"subflow:4e99185239cf91b2","z":"8ecde103e664eec0","name":"","x":510,"y":60,"wires":[["43b64665bd7d669e"]]},{"id":"b844f4e58bae3fe2","type":"subflow:4e99185239cf91b2","z":"8ecde103e664eec0","name":"","x":510,"y":140,"wires":[["d3014e0924a897a2"]]},{"id":"17129ebc6a72e2a2","type":"subflow:4e99185239cf91b2","z":"8ecde103e664eec0","name":"","x":510,"y":220,"wires":[["a8b3e1e342c9c93d"]]},{"id":"98a76db1b75106cf","type":"subflow:4e99185239cf91b2","z":"8ecde103e664eec0","name":"","x":510,"y":300,"wires":[["629b0e57f24f2a47"]]},{"id":"cb71d33d91e3a73f","type":"subflow:4e99185239cf91b2","z":"8ecde103e664eec0","name":"","x":510,"y":380,"wires":[["9f5014156fa00969"]]},{"id":"adc56685e4c4c711","type":"subflow:4e99185239cf91b2","z":"8ecde103e664eec0","name":"","x":510,"y":460,"wires":[["43a5bb8bf8c926d5"]]},{"id":"89cadf81cc15e559","type":"subflow:4e99185239cf91b2","z":"8ecde103e664eec0","name":"","x":510,"y":540,"wires":[["8ee19769765a14ad"]]},{"id":"63884053ccd8640c","type":"comment","z":"8ecde103e664eec0","name":"ausschalten, wenn automatik ein ist?","info":"","x":430,"y":20,"wires":[]},{"id":"031638b1808cf698","type":"api-current-state","z":"8ecde103e664eec0","name":"cameras_enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.{{pcs}}_cameras_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1080,"y":260,"wires":[["6b7daabe08af1bdb"]]},{"id":"6b7daabe08af1bdb","type":"function","z":"8ecde103e664eec0","name":"check","func":"var cameras_enabled = false;\n\n\nif (msg.payload == 'on'){\n    cameras_enabled = true;\n}else{\n    cameras_enabled = false;\n}\nmsg.cameras_enabled = cameras_enabled;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1270,"y":260,"wires":[["e062ffa9c0a81028"]]},{"id":"e062ffa9c0a81028","type":"switch","z":"8ecde103e664eec0","name":"","property":"cameras_enabled","propertyType":"msg","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1410,"y":260,"wires":[["fe7e27084f31f82c"],["6024ad081c43e26e"]]},{"id":"c3c018ab8ded9dc8","type":"api-current-state","z":"8ecde103e664eec0","name":"cameras_enabled?","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"input_boolean.pcs1_cameras_enabled","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","override_topic":false,"state_location":"payload","override_payload":"msg","entity_location":"data","override_data":"msg","x":1080,"y":440,"wires":[["26e7eb753ea9955a"]]},{"id":"26e7eb753ea9955a","type":"function","z":"8ecde103e664eec0","name":"check","func":"var cameras_enabled = false;\n\n\nif (msg.payload == 'on'){\n    cameras_enabled = true;\n}else{\n    cameras_enabled = false;\n}\nmsg.cameras_enabled = cameras_enabled;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1270,"y":440,"wires":[["8329952dfa896a22"]]},{"id":"8329952dfa896a22","type":"switch","z":"8ecde103e664eec0","name":"","property":"cameras_enabled","propertyType":"msg","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1390,"y":440,"wires":[["4df7ba51c3f6f068"],["6024ad081c43e26e"]]},{"id":"6024ad081c43e26e","type":"api-call-service","z":"8ecde103e664eec0","name":"Notification","server":"f482c16b.7b4d","version":3,"debugenabled":false,"service_domain":"persistent_notification","service":"create","entityId":"","data":"{\"title\":\"Info\",\"message\":\"The Cameras are disabled.\"}","dataType":"json","mergecontext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","x":1670,"y":360,"wires":[[]]},{"id":"80dc41578b609278","type":"comment","z":"2709ed20d07ea830","name":"Chatbot Configuration","info":"","x":120,"y":40,"wires":[]},{"id":"a07815afd5edd683","type":"telegram receiver","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","saveDataDir":"/config/www/photos/telegram/","filterCommands":true,"x":110,"y":80,"wires":[["94518195985a2eb0","aec621617fd3c929"],[]]},{"id":"d20dc6252e2e9a62","type":"function","z":"2709ed20d07ea830","name":"Save Original Message","func":"msg.telegram_message = msg.payload;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":80,"wires":[["68ef32afc4a49a44"]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"68ef32afc4a49a44","type":"switch","z":"2709ed20d07ea830","name":"","property":"payload.chatId","propertyType":"msg","rules":[{"t":"lt","v":"0","vt":"num"},{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":630,"y":80,"wires":[["9fdf55e33f02f3ba"],["ff27df9f8a9a92e0"]]},{"id":"1c41ac86cc152bef","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1330,"y":60,"wires":[[]]},{"id":"9fdf55e33f02f3ba","type":"function","z":"2709ed20d07ea830","name":"Help Information Message","func":"var message =\n  `\n*Hello, i am the Plant Control System Bot*\n\n*Logging information\\\\:*\nI provide monitoring Information in this group like info, warning and error messages\\\\.\n\n*Status updates\\\\:*\nI also do provide a daily status message to let you know that the system is up and running\\\\.\n\nIf you do not receive that message, have a look on the situation on site to check if something went wrong\\\\.\n\n*Control and monitoring interface\\\\:*\nYou can send commands to a private chat with \\\\@protohaus\\\\_ofai\\\\_pcs\\\\_bot\\\\ to receive data and control the system\\\\.\n\nContact the group admins to get access to the private chat functionality\\\\.\n\n`;\n\n///pic pcs\\\\<number\\\\>\\\\_cam\\\\<number\\\\>\\\\: sends a picture of the requested camera (pcs\\\\: 1, cam: 1\\\\-7)\n//  / pic all\\\\: sends all camera pictures\n//  \nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview: true,\n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":60,"wires":[["1c41ac86cc152bef"]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"c097e34f3bd5698f","type":"subflow:ab1036a4c01aab80","z":"2709ed20d07ea830","name":"","x":1020,"y":260,"wires":[["fa74b3a9302f1f71"]]},{"id":"3e5b8775a83fa1f5","type":"subflow:48c607f195e854e0","z":"2709ed20d07ea830","x":1020,"y":300,"wires":[["81df7537e0155935"]]},{"id":"61d9cbd837178059","type":"subflow:b23737722e71b01c","z":"2709ed20d07ea830","x":1010,"y":340,"wires":[["aa92c16ac5f4ba51"]]},{"id":"e3106a65c5f9250e","type":"subflow:9e7ca1741a410453","z":"2709ed20d07ea830","x":1020,"y":380,"wires":[["06bb162d7128a209"]]},{"id":"4f5769ad82292928","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":990,"y":920,"wires":[[]]},{"id":"498322567513c93b","type":"function","z":"2709ed20d07ea830","name":"LED Panel max Temperature","func":"var message =\n  `\n*Warning*\nThe max\\\\. temperature somewhere on the led panel is above 35°C since 1 minute\\\\.\n\n`;\n\n///pic pcs\\\\<number\\\\>\\\\_cam\\\\<number\\\\>\\\\: sends a picture of the requested camera (pcs\\\\: 1, cam: 1\\\\-7)\n//  / pic all\\\\: sends all camera pictures\n//  \nmsg.payload = {}\nmsg.payload.type = 'message';\nmsg.payload.content = message;\nmsg.payload.chatId ='-1001698219543'\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview: true,\n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":920,"wires":[["4f5769ad82292928"]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"94518195985a2eb0","type":"delay","z":"2709ed20d07ea830","name":"limit","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":270,"y":80,"wires":[["d20dc6252e2e9a62"]]},{"id":"7f63cdc16df19eef","type":"comment","z":"2709ed20d07ea830","name":"Info Channel Configuration","info":"","x":130,"y":560,"wires":[]},{"id":"ff27df9f8a9a92e0","type":"switch","z":"2709ed20d07ea830","name":"Commands","property":"originalMessage.text","propertyType":"msg","rules":[{"t":"eq","v":"/help","vt":"str"},{"t":"eq","v":"/heartbeat","vt":"str"},{"t":"cont","v":"/power","vt":"str"},{"t":"cont","v":"/pic","vt":"str"},{"t":"cont","v":"/sensor","vt":"str"},{"t":"cont","v":"/status","vt":"str"},{"t":"cont","v":"/restart","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":8,"x":770,"y":280,"wires":[["1eae9b738163016b"],["8bba143356d1b955"],["a63a24b48693882d"],["c097e34f3bd5698f"],["3e5b8775a83fa1f5"],["61d9cbd837178059"],["e3106a65c5f9250e"],["6b628bbfdbde2fe7"]]},{"id":"6b628bbfdbde2fe7","type":"function","z":"2709ed20d07ea830","name":"Information Message","func":"var message = \n`\n*Hello, i am the Plant Control System Bot*\n\nPlease send /help for more information on what commands you can use\\\\.\n\n`;\n\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode : \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1060,"y":480,"wires":[["24ee802744cf149b"]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"8bba143356d1b955","type":"function","z":"2709ed20d07ea830","name":"Heartbeat Message","func":"var message = \n`\n*I am alive*\n\n`;\n\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview : true, \n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1050,"y":160,"wires":[["b95e9abd59218e41"]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"1eae9b738163016b","type":"function","z":"2709ed20d07ea830","name":"Help Message","func":"var message =\n  `\n*Hello, i am the Plant Control System Bot*\n\nYou can interact with me for monitoring and system control\\\\.\n \n*Choose one of the following commands\\\\:*\n/heartbeat\n/power \\\\- control the main power of the pcs units\n/pic \\\\- get live pictures from the cameras\n/sensor \\\\- get a live overview of the sensor data\n/status \\\\- get a status report of the system\n/restart \\\\- restart devices\n/help\n`;\n\n // /control \\\\- access actuators and devices\n // / automations \\\\- turn on / off automations\n // / parameters \\\\- change parameters for the control of the system\n\n\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview: true,\n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":120,"wires":[["b59501ce84f26a8d"]],"info":"## New message\n\nHello *markdown* formatted messages!'\n\nwith `inline` code\n\n> and quote\n>> nested\n\n\\`\\`\\`\nvar code = \"cool\";\n\\`\\`\\`\n\n| table | data |\n|---|---|\n| 1 | fred |\n| 2 | bob |\n\n_Italic_ **bold** "},{"id":"b59501ce84f26a8d","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1330,"y":120,"wires":[[]]},{"id":"24ee802744cf149b","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1330,"y":420,"wires":[[]]},{"id":"b95e9abd59218e41","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1330,"y":160,"wires":[[]]},{"id":"fa74b3a9302f1f71","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1330,"y":260,"wires":[[]]},{"id":"81df7537e0155935","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1330,"y":300,"wires":[[]]},{"id":"aa92c16ac5f4ba51","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1330,"y":340,"wires":[[]]},{"id":"06bb162d7128a209","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1330,"y":380,"wires":[[]]},{"id":"740fb05c7ac80888","type":"inject","z":"2709ed20d07ea830","name":"Daily trigger","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"00 09 * * *","once":false,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":120,"y":620,"wires":[["257a6541255b9730"]]},{"id":"8e0c4cabe1128ec6","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1450,"y":620,"wires":[[]]},{"id":"a63a24b48693882d","type":"subflow:ca65c1dbac21ab41","z":"2709ed20d07ea830","name":"","x":1010,"y":200,"wires":[["5a640f40a5389f9a"]]},{"id":"5a640f40a5389f9a","type":"telegram sender","z":"2709ed20d07ea830","name":"","bot":"a526e1d6acb6b7ab","haserroroutput":false,"outputs":1,"x":1370,"y":200,"wires":[[]]},{"id":"92f6ac9c9ea7c339","type":"template","z":"2709ed20d07ea830","name":"format it","field":"sensor_values","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*__Plant Control System 1 \\- Device Information__*\n\nPCS1 Main Power Supply\\: {{pcs1_main}}\nAtlas Scientific\\: {{pcs1_as_status}}\nCam 1\\: {{pcs1_cam1_status}}\nCam 2\\: {{pcs1_cam2_status}}\nCam 3\\: {{pcs1_cam3_status}}\nCam 4\\: {{pcs1_cam4_status}}\nCam 5\\: {{pcs1_cam5_status}}\nCam 6\\: {{pcs1_cam6_status}}\nCam 7\\: {{pcs1_cam7_status}}\nKinematics\\: {{pcs1_kin_status}}\nLED 1\\: {{pcs1_led1_status}}\nLED 2\\: {{pcs1_led2_status}}\nLED 3\\: {{pcs1_led3_status}}\nLED 4\\: {{pcs1_led4_status}}\nPWM\\: {{pcs1_pwm_status}}\nPump\\: {{pcs1_pump_status}}","output":"str","x":520,"y":1460,"wires":[["f8fa45eb4dc9cecf"]]},{"id":"f8fa45eb4dc9cecf","type":"function","z":"2709ed20d07ea830","name":"function 4","func":"var message = msg.sensor_values;\nmessage = msg.sensor_values.replace(/\\./g, \"\\\\.\");\nmsg.sensor_values = message;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2220,"y":1540,"wires":[["193f89b4e99dfedf"]]},{"id":"193f89b4e99dfedf","type":"function","z":"2709ed20d07ea830","name":"send message","func":"var message = msg.sensor_values;\nmsg.payload = msg.telegram_message;\nmsg.payload.type = 'message';\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview: true,\n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2420,"y":1540,"wires":[[]]},{"id":"7867f50f842360c8","type":"function","z":"2709ed20d07ea830","name":"send message","func":"var message = msg.message;\nmsg.payload.content = message;\n\n// activate markdown\nmsg.payload.options = {\n  disable_web_page_preview: true,\n  parse_mode: \"MarkdownV2\"\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1220,"y":620,"wires":[["8e0c4cabe1128ec6"]]},{"id":"1cabd9b1eed72789","type":"function","z":"2709ed20d07ea830","name":"escapes","func":"var message = msg.message;\nmessage = msg.message.replace(/\\./g, \"\\\\.\");\nmsg.message = message;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":620,"wires":[["7867f50f842360c8"]]},{"id":"4796e46de4a9befe","type":"template","z":"2709ed20d07ea830","name":"format it","field":"message","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"*Info*\nHome Assistant\\: running\nMain Power Supply PCS1\\: {{pcs1_main}} \n","output":"str","x":840,"y":620,"wires":[["1cabd9b1eed72789"]]},{"id":"3bdb78e4bd694aca","type":"api-current-state","z":"2709ed20d07ea830","name":"pcs1_main","server":"f482c16b.7b4d","version":3,"outputs":1,"halt_if":"","halt_if_type":"str","halt_if_compare":"is","entity_id":"switch.pcs1_main","state_type":"str","blockInputOverrides":false,"outputProperties":[{"property":"pcs1_main","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"}],"for":0,"forType":"num","forUnits":"minutes","x":670,"y":620,"wires":[["4796e46de4a9befe"]]},{"id":"257a6541255b9730","type":"function","z":"2709ed20d07ea830","d":true,"name":"function 6","func":"msg.payload = {}\nmsg.payload.type = 'message';\nmsg.payload.chatId = '-1001698219543'\n// activate markdown\nmsg.payload.options = {\n    disable_web_page_preview: true,\n    parse_mode: \"MarkdownV2\"\n};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":620,"wires":[["3bdb78e4bd694aca"]]},{"id":"ac5ad8a6567ca71a","type":"trigger-state","z":"2709ed20d07ea830","name":"pcs1_main on","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"switch.pcs1_main","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":110,"y":700,"wires":[["257a6541255b9730"],[]]},{"id":"98b06753fe49c796","type":"trigger-state","z":"2709ed20d07ea830","name":"pcs1_main off","server":"f482c16b.7b4d","version":1,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityid":"switch.pcs1_main","entityidfiltertype":"exact","debugenabled":false,"constraints":[{"targetType":"this_entity","targetValue":"","propertyType":"previous_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"on","propertyValue":"old_state.state"},{"targetType":"this_entity","targetValue":"","propertyType":"current_state","comparatorType":"is","comparatorValueDatatype":"str","comparatorValue":"off","propertyValue":"new_state.state"}],"inputs":0,"outputs":2,"customoutputs":[],"outputinitially":false,"state_type":"str","enableInput":false,"x":110,"y":760,"wires":[["257a6541255b9730"],[]]},{"id":"6a6619a52c966feb","type":"server-state-changed","z":"2709ed20d07ea830","name":"","server":"f482c16b.7b4d","version":3,"exposeToHomeAssistant":false,"haConfig":[{"property":"name","value":""},{"property":"icon","value":""}],"entityidfilter":"sensor.pcs1_led_panel_average_max_temperature","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"35","halt_if_type":"num","halt_if_compare":"gt","outputs":2,"output_only_on_state_change":true,"for":"5","forType":"num","forUnits":"minutes","ignorePrevStateNull":false,"ignorePrevStateUnknown":false,"ignorePrevStateUnavailable":false,"ignoreCurrentStateUnknown":false,"ignoreCurrentStateUnavailable":false,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":260,"y":920,"wires":[["498322567513c93b"],[]]},{"id":"aec621617fd3c929","type":"debug","z":"2709ed20d07ea830","name":"debug 7","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":340,"y":160,"wires":[]},{"id":"c363ac69f6426299","type":"mqtt in","z":"0a84fcef42ddc94e","d":true,"name":"","topic":"#","qos":"2","datatype":"auto","broker":"090665a04fa6c385","nl":false,"rap":true,"rh":0,"inputs":0,"x":190,"y":40,"wires":[["b394058093f84240"]]},{"id":"b394058093f84240","type":"debug","z":"0a84fcef42ddc94e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":430,"y":120,"wires":[]},{"id":"960397ce4bbc7662","type":"comment","z":"0a84fcef42ddc94e","name":"Send the picture to the AI Server","info":"","x":950,"y":40,"wires":[]},{"id":"cb0d25c7b7b6aece","type":"comment","z":"0a84fcef42ddc94e","name":"save the picture to the server file system","info":"","x":300,"y":320,"wires":[]},{"id":"3b3c3b068dcdc6a0","type":"exec","z":"0a84fcef42ddc94e","d":true,"command":"curl --request POST 'http://192.168.178.201:8001/prediction/' --form 'file=@\"/path/to/image.jpg\"'","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":470,"y":360,"wires":[[],[],[]]},{"id":"64045843ccf3be90","type":"http request","z":"0a84fcef42ddc94e","name":"accounts","method":"GET","ret":"obj","paytoqs":"ignore","url":"https://fabman.io/api/v1/members","tls":"","persist":false,"proxy":"","authType":"bearer","senderr":false,"x":300,"y":440,"wires":[["c78c3ce82bb9f974"]]},{"id":"b0d01a6df724d8e6","type":"inject","z":"0a84fcef42ddc94e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":110,"y":440,"wires":[["64045843ccf3be90"]]},{"id":"c78c3ce82bb9f974","type":"debug","z":"0a84fcef42ddc94e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":550,"y":440,"wires":[]},{"id":"aa312f6f1d1f6fa7","type":"tcp out","z":"0a84fcef42ddc94e","name":"Send Signal","host":"192.168.99.12","port":"1234","beserver":"client","base64":false,"end":false,"x":530,"y":560,"wires":[]},{"id":"703676520359d407","type":"inject","z":"0a84fcef42ddc94e","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"\"Message:I\\n\"","payloadType":"str","x":170,"y":560,"wires":[["d8e111d4e3b55ce8"]]},{"id":"554dde7fb94b24c1","type":"debug","z":"0a84fcef42ddc94e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":530,"y":640,"wires":[]},{"id":"c43eb6d0.a40ec8","type":"inject","z":"0a84fcef42ddc94e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[\"0x7B\",\"0x4D\",\"0x43\",\"0x00\",\"0x04\",\"0x1F\",\"0x0a\",\"0x08\",\"0x00\",\"0x0d\",\"0x7D\"]","payloadType":"bin","x":190,"y":620,"wires":[["aa312f6f1d1f6fa7","554dde7fb94b24c1"]]},{"id":"d8e111d4e3b55ce8","type":"function","z":"0a84fcef42ddc94e","name":"","func":"//const str = \"Hey. this is a string!\";\n\n// convert string to Buffer\n//const buff = Buffer.from(msg.payload, \"utf-8\");\nvar b = Buffer.from(msg.payload);\nmsg.payload = b;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":560,"wires":[["aa312f6f1d1f6fa7","554dde7fb94b24c1"]]},{"id":"31d2a9ed5c5d5901","type":"mqtt out","z":"0a84fcef42ddc94e","name":"","topic":"test","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"090665a04fa6c385","x":690,"y":40,"wires":[]},{"id":"61481db6918f8409","type":"inject","z":"0a84fcef42ddc94e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"asassa111","payloadType":"str","x":560,"y":40,"wires":[["31d2a9ed5c5d5901"]]},{"id":"fc9b72ca994f8c65","type":"mqtt in","z":"0a84fcef42ddc94e","d":true,"name":"","topic":"fraunhofer-as-4417935ef20c/sensor/fraunhoferas4417935ef20cph/state","qos":"2","datatype":"auto","broker":"090665a04fa6c385","nl":false,"rap":true,"rh":0,"inputs":0,"x":380,"y":160,"wires":[["5c1fc6f7cc252803"]]},{"id":"5c1fc6f7cc252803","type":"debug","z":"0a84fcef42ddc94e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":750,"y":160,"wires":[]},{"id":"4910e0e72b93875a","type":"mqtt in","z":"0a84fcef42ddc94e","d":true,"name":"","topic":"fraunhofer-as-4417935ef20c/ph","qos":"2","datatype":"auto","broker":"090665a04fa6c385","nl":false,"rap":true,"rh":0,"inputs":0,"x":190,"y":220,"wires":[["de0d47101037e5ae"]]},{"id":"216994cffd7c5282","type":"debug","z":"0a84fcef42ddc94e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":610,"y":220,"wires":[]},{"id":"cc84c91ade7aa64c","type":"function","z":"0a84fcef42ddc94e","name":"function 7","func":"msg.payload = \"OFF\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":280,"wires":[["b2b547e5f1912399"]]},{"id":"b2b547e5f1912399","type":"mqtt out","z":"0a84fcef42ddc94e","d":true,"name":"","topic":"fraunhofer-as-4417935ef20c/switch/fraunhoferas4417935ef20crtdmqtt/state","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"090665a04fa6c385","x":1010,"y":240,"wires":[]},{"id":"5a8d0219d1a23f2a","type":"inject","z":"0a84fcef42ddc94e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":440,"y":260,"wires":[["cc84c91ade7aa64c"]]},{"id":"de0d47101037e5ae","type":"json","z":"0a84fcef42ddc94e","name":"","property":"payload","action":"","pretty":false,"x":430,"y":220,"wires":[["216994cffd7c5282"]]},{"id":"b481d84ae887617a","type":"function","z":"0f3990356594599b","name":"send annotation to grafana","func":"tn = new Date().getTime();\n\ntags=[\"from node-red\"];\nif( msg.tags != undefined ){\n    for( var t=0,tc=msg.tags.length; t<tc; t++)\n        tags.push( msg.tags[t] );\n}\n\nmsgTs = {\n    \"payload\": \n    //JSON.stringify(\n        {\n\"dashboardId\": msg.dashboardId,\n\"panelId\": msg.panelId,\n\"time\": tn,\n\"inRegion\": true,\n\"timeEnd\": tn,\n\"text\": msg.txt,\n\"tags\": tags\n    }\n    //)\n\n};\n\nif( msg[\"patch\"] ){\n    node.status({text:\"add patch:\"+JSON.stringify(msg[\"patch\"])});\n    pa = msg[\"patch\"];\n    for (const [key, value] of Object.entries(pa)) {\n      msgTs.payload[key] = value;\n    }\n}else{\n    //node.status({text:\"no patch\"});\n    \n\n}\n\n\nnode.send(msgTs);\n//node.status({ text:JSON.stringify( msg ) });","outputs":1,"noerr":11,"initialize":"","finalize":"","libs":[],"x":340,"y":480,"wires":[["582b616768db1a4d","bdb3c1a8c406f504"]]},{"id":"bdb3c1a8c406f504","type":"debug","z":"0f3990356594599b","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":750,"y":180,"wires":[]},{"id":"6f7847275c5e6b76","type":"http request","z":"0f3990356594599b","name":"","method":"POST","ret":"obj","paytoqs":"body","url":"http://admin:admin@localhost:3000/api/annotations","tls":"","persist":false,"proxy":"","authType":"","senderr":true,"headers":[],"x":790,"y":520,"wires":[["bdb3c1a8c406f504"]]},{"id":"582b616768db1a4d","type":"change","z":"0f3990356594599b","name":"Set Headers","rules":[{"t":"set","p":"headers","pt":"msg","to":"{}","tot":"json"},{"t":"set","p":"headers.content-type","pt":"msg","to":"application/json","tot":"str"},{"t":"set","p":"headers.accept","pt":"msg","to":"application/json","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":420,"wires":[["6f7847275c5e6b76"]]},{"id":"9a02d7d30eafbbaa","type":"link in","z":"0f3990356594599b","name":"send grafana annotation","links":["f4a11268fee11b69"],"x":175,"y":380,"wires":[["b481d84ae887617a","bdb3c1a8c406f504"]]},{"id":"30fad9aefc47480e","type":"comment","z":"0f3990356594599b","name":"Use info","info":"Examples if it will get:\n\n> msg = {\n>     \"dashboardId\": 7,\n>     \"panelId\": 3,\n>     \"txt\": \"abcd\",\n>     \"tags\": [ \"huawaii plug / unplug\" ]\n> };\n> node.send(msg);\n\nregular annotation will be added.\n\n\n        \n> msg = {\n>     \"dashboardId\": 7,\n>     \"panelId\": 3,\n>     \"patch\":{\n>         \"time\": global.get(\"hu_plug_t\"),\n>         \"timeEnd\": new Date().getTime()\n>         },\n>     \"txt\": \"huawaii was charging\",\n>     \"tags\": [ \"huawaii charging\" ]\n> };\n> node.send(msg);\n\nannotation with overrite time and timeEnd will be post'ed\n\n\n\n\n","x":220,"y":300,"wires":[]}]